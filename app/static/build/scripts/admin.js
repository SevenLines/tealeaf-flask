(function(){function aq(c){function b(h,j,k,f,g,l){for(;g>=0&&l>g;g+=c){var d=f?f[g]:g;k=j(k,h[d],d,h)}return k}return function(h,j,f,g){j=aD(j,g,4);var k=!au(h)&&ar.keys(h),d=(k||h).length,l=c>0?0:d-1;return arguments.length<3&&(f=h[k?k[l]:l],l+=c),b(h,j,f,k,l,d)}}function ak(b){return function(f,g,h){g=ag(g,h);for(var c=Q(f),d=b>0?0:c-1;d>=0&&c>d;d+=b){if(g(f[d],d,f)){return d}}return -1}}function am(d,b,c){return function(j,g,h){var k=0,f=Q(j);if("number"==typeof h){d>0?k=h>=0?h:Math.max(h+f,k):f=h>=0?Math.min(h+1,f):h+f+1}else{if(c&&h&&f){return h=c(j,g),j[h]===g?h:-1}}if(g!==g){return h=b(at.call(j,k,f),ar.isNaN),h>=0?h+k:-1}for(h=d>0?k:f-1;h>=0&&f>h;h+=d){if(j[h]===g){return h}}return -1}}function aA(h,d){var f=Y.length,g=h.constructor,b=ar.isFunction(g)&&g.prototype||aE,c="constructor";for(ar.has(h,c)&&!ar.contains(d,c)&&d.push(c);f--;){c=Y[f],c in h&&h[c]!==b[c]&&!ar.contains(d,c)&&d.push(c)}}var aj=this,aw=aj._,ap=Array.prototype,aE=Object.prototype,aC=Function.prototype,az=ap.push,at=ap.slice,al=aE.toString,ao=aE.hasOwnProperty,ax=Array.isArray,ai=Object.keys,ay=aC.bind,af=Object.create,aB=function(){},ar=function(b){return b instanceof ar?b:this instanceof ar?void (this._wrapped=b):new ar(b)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=ar),exports._=ar):aj._=ar,ar.VERSION="1.8.3";var aD=function(d,b,c){if(b===void 0){return d}switch(null==c?3:c){case 1:return function(e){return d.call(b,e)};case 2:return function(f,g){return d.call(b,f,g)};case 3:return function(g,h,f){return d.call(b,g,h,f)};case 4:return function(h,j,f,g){return d.call(b,h,j,f,g)}}return function(){return d.apply(b,arguments)}},ag=function(d,b,c){return null==d?ar.identity:ar.isFunction(d)?aD(d,b,c):ar.isObject(d)?ar.matcher(d):ar.property(d)};ar.iteratee=function(c,b){return ag(c,b,1/0)};var aF=function(c,b){return function(j){var l=arguments.length;if(2>l||null==j){return j}for(var g=1;l>g;g++){for(var h=arguments[g],m=c(h),d=m.length,n=0;d>n;n++){var k=m[n];b&&j[k]!==void 0||(j[k]=h[k])}}return j}},av=function(c){if(!ar.isObject(c)){return{}}if(af){return af(c)}aB.prototype=c;var b=new aB;return aB.prototype=null,b},ah=function(b){return function(c){return null==c?void 0:c[b]}},ad=Math.pow(2,53)-1,Q=ah("length"),au=function(c){var b=Q(c);return"number"==typeof b&&b>=0&&ad>=b};ar.each=ar.forEach=function(h,d,f){d=aD(d,f);var g,b;if(au(h)){for(g=0,b=h.length;b>g;g++){d(h[g],g,h)}}else{var c=ar.keys(h);for(g=0,b=c.length;b>g;g++){d(h[c[g]],c[g],h)}}return h},ar.map=ar.collect=function(k,f,g){f=ag(f,g);for(var h=!au(k)&&ar.keys(k),c=(h||k).length,d=Array(c),j=0;c>j;j++){var b=h?h[j]:j;d[j]=f(k[b],b,k)}return d},ar.reduce=ar.foldl=ar.inject=aq(1),ar.reduceRight=ar.foldr=aq(-1),ar.find=ar.detect=function(f,b,c){var d;return d=au(f)?ar.findIndex(f,b,c):ar.findKey(f,b,c),d!==void 0&&d!==-1?f[d]:void 0},ar.filter=ar.select=function(f,b,c){var d=[];return b=ag(b,c),ar.each(f,function(h,g,e){b(h,g,e)&&d.push(h)}),d},ar.reject=function(d,b,c){return ar.filter(d,ar.negate(ag(b)),c)},ar.every=ar.all=function(j,d,f){d=ag(d,f);for(var g=!au(j)&&ar.keys(j),b=(g||j).length,c=0;b>c;c++){var h=g?g[c]:c;if(!d(j[h],h,j)){return !1}}return !0},ar.some=ar.any=function(j,d,f){d=ag(d,f);for(var g=!au(j)&&ar.keys(j),b=(g||j).length,c=0;b>c;c++){var h=g?g[c]:c;if(d(j[h],h,j)){return !0}}return !1},ar.contains=ar.includes=ar.include=function(f,b,c,d){return au(f)||(f=ar.values(f)),("number"!=typeof c||d)&&(c=0),ar.indexOf(f,b,c)>=0},ar.invoke=function(f,b){var c=at.call(arguments,2),d=ar.isFunction(b);return ar.map(f,function(g){var e=d?b:g[b];return null==e?e:e.apply(g,c)})},ar.pluck=function(c,b){return ar.map(c,ar.property(b))},ar.where=function(c,b){return ar.filter(c,ar.matcher(b))},ar.findWhere=function(c,b){return ar.find(c,ar.matcher(b))},ar.max=function(f,m,b){var h,l,g=-1/0,d=-1/0;if(null==m&&null!=f){f=au(f)?f:ar.values(f);for(var k=0,j=f.length;j>k;k++){h=f[k],h>g&&(g=h)}}else{m=ag(m,b),ar.each(f,function(o,c,i){l=m(o,c,i),(l>d||l===-1/0&&g===-1/0)&&(g=o,d=l)})}return g},ar.min=function(f,m,b){var h,l,g=1/0,d=1/0;if(null==m&&null!=f){f=au(f)?f:ar.values(f);for(var k=0,j=f.length;j>k;k++){h=f[k],g>h&&(g=h)}}else{m=ag(m,b),ar.each(f,function(o,c,i){l=m(o,c,i),(d>l||1/0===l&&1/0===g)&&(g=o,d=l)})}return g},ar.shuffle=function(h){for(var d,f=au(h)?h:ar.values(h),g=f.length,b=Array(g),c=0;g>c;c++){d=ar.random(0,c),d!==c&&(b[c]=b[d]),b[d]=f[c]}return b},ar.sample=function(d,b,c){return null==b||c?(au(d)||(d=ar.values(d)),d[ar.random(d.length-1)]):ar.shuffle(d).slice(0,Math.max(0,b))},ar.sortBy=function(d,b,c){return b=ag(b,c),ar.pluck(ar.map(d,function(h,f,g){return{value:h,index:f,criteria:b(h,f,g)}}).sort(function(i,f){var g=i.criteria,h=f.criteria;if(g!==h){if(g>h||g===void 0){return 1}if(h>g||h===void 0){return -1}}return i.index-f.index}),"value")};var Z=function(b){return function(d,f,g){var c={};return f=ag(f,g),ar.each(d,function(j,h){var k=f(j,h,d);b(c,j,k)}),c}};ar.groupBy=Z(function(d,b,c){ar.has(d,c)?d[c].push(b):d[c]=[b]}),ar.indexBy=Z(function(d,b,c){d[c]=b}),ar.countBy=Z(function(d,b,c){ar.has(d,c)?d[c]++:d[c]=1}),ar.toArray=function(b){return b?ar.isArray(b)?at.call(b):au(b)?ar.map(b,ar.identity):ar.values(b):[]},ar.size=function(b){return null==b?0:au(b)?b.length:ar.keys(b).length},ar.partition=function(g,c,d){c=ag(c,d);var f=[],b=[];return ar.each(g,function(j,h,e){(c(j,h,e)?f:b).push(j)}),[f,b]},ar.first=ar.head=ar.take=function(d,b,c){return null==d?void 0:null==b||c?d[0]:ar.initial(d,d.length-b)},ar.initial=function(d,b,c){return at.call(d,0,Math.max(0,d.length-(null==b||c?1:b)))},ar.last=function(d,b,c){return null==d?void 0:null==b||c?d[d.length-1]:ar.rest(d,Math.max(0,d.length-b))},ar.rest=ar.tail=ar.drop=function(d,b,c){return at.call(d,null==b||c?1:b)},ar.compact=function(b){return ar.filter(b,ar.identity)};var G=function(g,w,b,m){for(var v=[],j=0,d=m||0,s=Q(g);s>d;d++){var q=g[d];if(au(q)&&(ar.isArray(q)||ar.isArguments(q))){w||(q=G(q,w,b));var k=0,h=q.length;for(v.length+=h;h>k;){v[j++]=q[k++]}}else{b||(v[j++]=q)}}return v};ar.flatten=function(c,b){return G(c,b,!1)},ar.without=function(b){return ar.difference(b,at.call(arguments,1))},ar.uniq=ar.unique=function(g,s,b,k){ar.isBoolean(s)||(k=b,b=s,s=!1),null!=b&&(b=ag(b,k));for(var q=[],h=[],d=0,m=Q(g);m>d;d++){var l=g[d],j=b?b(l,d,g):l;s?(d&&h===j||q.push(l),h=j):b?ar.contains(h,j)||(h.push(j),q.push(l)):ar.contains(q,l)||q.push(l)}return q},ar.union=function(){return ar.uniq(G(arguments,!0,!0))},ar.intersection=function(j){for(var d=[],f=arguments.length,g=0,b=Q(j);b>g;g++){var c=j[g];if(!ar.contains(d,c)){for(var h=1;f>h&&ar.contains(arguments[h],c);h++){}h===f&&d.push(c)}}return d},ar.difference=function(c){var b=G(arguments,!0,!0,1);return ar.filter(c,function(d){return !ar.contains(b,d)})},ar.zip=function(){return ar.unzip(arguments)},ar.unzip=function(f){for(var b=f&&ar.max(f,Q).length||0,c=Array(b),d=0;b>d;d++){c[d]=ar.pluck(f,d)}return c},ar.object=function(g,c){for(var d={},f=0,b=Q(g);b>f;f++){c?d[g[f]]=c[f]:d[g[f][0]]=g[f][1]}return d},ar.findIndex=ak(1),ar.findLastIndex=ak(-1),ar.sortedIndex=function(k,f,g,h){g=ag(g,h,1);for(var c=g(f),d=0,j=Q(k);j>d;){var b=Math.floor((d+j)/2);g(k[b])<c?d=b+1:j=b}return d},ar.indexOf=am(1,ar.findIndex,ar.sortedIndex),ar.lastIndexOf=am(-1,ar.findLastIndex),ar.range=function(h,d,f){null==d&&(d=h||0,h=0),f=f||1;for(var g=Math.max(Math.ceil((d-h)/f),0),b=Array(g),c=0;g>c;c++,h+=f){b[c]=h}return b};var aa=function(j,d,f,g,b){if(!(g instanceof d)){return j.apply(f,b)}var c=av(j.prototype),h=j.apply(c,b);return ar.isObject(h)?h:c};ar.bind=function(f,b){if(ay&&f.bind===ay){return ay.apply(f,at.call(arguments,1))}if(!ar.isFunction(f)){throw new TypeError("Bind must be called on a function")}var c=at.call(arguments,2),d=function(){return aa(f,d,b,this,c.concat(at.call(arguments)))};return d},ar.partial=function(d){var b=at.call(arguments,1),c=function(){for(var h=0,f=b.length,g=Array(f),j=0;f>j;j++){g[j]=b[j]===ar?arguments[h++]:b[j]}for(;h<arguments.length;){g.push(arguments[h++])}return aa(d,c,this,this,g)};return c},ar.bindAll=function(f){var b,c,d=arguments.length;if(1>=d){throw new Error("bindAll must be passed function names")}for(b=1;d>b;b++){c=arguments[b],f[c]=ar.bind(f[c],f)}return f},ar.memoize=function(d,b){var c=function(h){var f=c.cache,g=""+(b?b.apply(this,arguments):h);return ar.has(f,g)||(f[g]=d.apply(this,arguments)),f[g]};return c.cache={},c},ar.delay=function(d,b){var c=at.call(arguments,2);return setTimeout(function(){return d.apply(null,c)},b)},ar.defer=ar.partial(ar.delay,ar,1),ar.throttle=function(f,m,b){var h,l,g,d=null,k=0;b||(b={});var j=function(){k=b.leading===!1?0:ar.now(),d=null,g=f.apply(h,l),d||(h=l=null)};return function(){var e=ar.now();k||b.leading!==!1||(k=e);var c=m-(e-k);return h=this,l=arguments,0>=c||c>m?(d&&(clearTimeout(d),d=null),k=e,g=f.apply(h,l),d||(h=l=null)):d||b.trailing===!1||(d=setTimeout(j,c)),g}},ar.debounce=function(f,m,b){var h,l,g,d,k,j=function(){var c=ar.now()-d;m>c&&c>=0?h=setTimeout(j,m-c):(h=null,b||(k=f.apply(g,l),h||(g=l=null)))};return function(){g=this,l=arguments,d=ar.now();var c=b&&!h;return h||(h=setTimeout(j,m)),c&&(k=f.apply(g,l),g=l=null),k}},ar.wrap=function(c,b){return ar.partial(b,c)},ar.negate=function(b){return function(){return !b.apply(this,arguments)}},ar.compose=function(){var c=arguments,b=c.length-1;return function(){for(var d=b,f=c[b].apply(this,arguments);d--;){f=c[d].call(this,f)}return f}},ar.after=function(c,b){return function(){return --c<1?b.apply(this,arguments):void 0}},ar.before=function(d,b){var c;return function(){return --d>0&&(c=b.apply(this,arguments)),1>=d&&(b=null),c}},ar.once=ar.partial(ar.before,2);var V=!{toString:null}.propertyIsEnumerable("toString"),Y=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];ar.keys=function(d){if(!ar.isObject(d)){return[]}if(ai){return ai(d)}var b=[];for(var c in d){ar.has(d,c)&&b.push(c)}return V&&aA(d,b),b},ar.allKeys=function(d){if(!ar.isObject(d)){return[]}var b=[];for(var c in d){b.push(c)}return V&&aA(d,b),b},ar.values=function(g){for(var c=ar.keys(g),d=c.length,f=Array(d),b=0;d>b;b++){f[b]=g[c[b]]}return f},ar.mapObject=function(k,f,g){f=ag(f,g);for(var h,c=ar.keys(k),d=c.length,j={},b=0;d>b;b++){h=c[b],j[h]=f(k[h],h,k)}return j},ar.pairs=function(g){for(var c=ar.keys(g),d=c.length,f=Array(d),b=0;d>b;b++){f[b]=[c[b],g[c[b]]]}return f},ar.invert=function(g){for(var c={},d=ar.keys(g),f=0,b=d.length;b>f;f++){c[g[d[f]]]=d[f]}return c},ar.functions=ar.methods=function(d){var b=[];for(var c in d){ar.isFunction(d[c])&&b.push(c)}return b.sort()},ar.extend=aF(ar.allKeys),ar.extendOwn=ar.assign=aF(ar.keys),ar.findKey=function(j,d,f){d=ag(d,f);for(var g,b=ar.keys(j),c=0,h=b.length;h>c;c++){if(g=b[c],d(j[g],g,j)){return g}}},ar.pick=function(g,w,b){var m,v,j={},d=g;if(null==d){return j}ar.isFunction(w)?(v=ar.allKeys(d),m=aD(w,b)):(v=G(arguments,!1,!1,1),m=function(f,c,e){return c in e},d=Object(d));for(var s=0,q=v.length;q>s;s++){var k=v[s],h=d[k];m(h,k,d)&&(j[k]=h)}return j},ar.omit=function(f,b,c){if(ar.isFunction(b)){b=ar.negate(b)}else{var d=ar.map(G(arguments,!1,!1,1),String);b=function(g,e){return !ar.contains(d,e)}}return ar.pick(f,b,c)},ar.defaults=aF(ar.allKeys,!0),ar.create=function(d,b){var c=av(d);return b&&ar.extendOwn(c,b),c},ar.clone=function(b){return ar.isObject(b)?ar.isArray(b)?b.slice():ar.extend({},b):b},ar.tap=function(c,b){return b(c),c},ar.isMatch=function(j,d){var f=ar.keys(d),g=f.length;if(null==j){return !g}for(var b=Object(j),c=0;g>c;c++){var h=f[c];if(d[h]!==b[h]||!(h in b)){return !1}}return !0};var U=function(g,w,b,m){if(g===w){return 0!==g||1/g===1/w}if(null==g||null==w){return g===w}g instanceof ar&&(g=g._wrapped),w instanceof ar&&(w=w._wrapped);var v=al.call(g);if(v!==al.call(w)){return !1}switch(v){case"[object RegExp]":case"[object String]":return""+g==""+w;case"[object Number]":return +g!==+g?+w!==+w:0===+g?1/+g===1/w:+g===+w;case"[object Date]":case"[object Boolean]":return +g===+w}var j="[object Array]"===v;if(!j){if("object"!=typeof g||"object"!=typeof w){return !1}var d=g.constructor,s=w.constructor;if(d!==s&&!(ar.isFunction(d)&&d instanceof d&&ar.isFunction(s)&&s instanceof s)&&"constructor" in g&&"constructor" in w){return !1}}b=b||[],m=m||[];for(var q=b.length;q--;){if(b[q]===g){return m[q]===w}}if(b.push(g),m.push(w),j){if(q=g.length,q!==w.length){return !1}for(;q--;){if(!U(g[q],w[q],b,m)){return !1}}}else{var k,h=ar.keys(g);if(q=h.length,ar.keys(w).length!==q){return !1}for(;q--;){if(k=h[q],!ar.has(w,k)||!U(g[k],w[k],b,m)){return !1}}}return b.pop(),m.pop(),!0};ar.isEqual=function(c,b){return U(c,b)},ar.isEmpty=function(b){return null==b?!0:au(b)&&(ar.isArray(b)||ar.isString(b)||ar.isArguments(b))?0===b.length:0===ar.keys(b).length},ar.isElement=function(b){return !(!b||1!==b.nodeType)},ar.isArray=ax||function(b){return"[object Array]"===al.call(b)},ar.isObject=function(c){var b=typeof c;return"function"===b||"object"===b&&!!c},ar.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(b){ar["is"+b]=function(c){return al.call(c)==="[object "+b+"]"}}),ar.isArguments(arguments)||(ar.isArguments=function(b){return ar.has(b,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(ar.isFunction=function(b){return"function"==typeof b||!1}),ar.isFinite=function(b){return isFinite(b)&&!isNaN(parseFloat(b))},ar.isNaN=function(b){return ar.isNumber(b)&&b!==+b},ar.isBoolean=function(b){return b===!0||b===!1||"[object Boolean]"===al.call(b)},ar.isNull=function(b){return null===b},ar.isUndefined=function(b){return b===void 0},ar.has=function(c,b){return null!=c&&ao.call(c,b)},ar.noConflict=function(){return aj._=aw,this},ar.identity=function(b){return b},ar.constant=function(b){return function(){return b}},ar.noop=function(){},ar.property=ah,ar.propertyOf=function(b){return null==b?function(){}:function(c){return b[c]}},ar.matcher=ar.matches=function(b){return b=ar.extendOwn({},b),function(c){return ar.isMatch(c,b)}},ar.times=function(g,c,d){var f=Array(Math.max(0,g));c=aD(c,d,1);for(var b=0;g>b;b++){f[b]=c(b)}return f},ar.random=function(c,b){return null==b&&(b=c,c=0),c+Math.floor(Math.random()*(b-c+1))},ar.now=Date.now||function(){return(new Date).getTime()};var ac={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},C=ar.invert(ac),H=function(g){var c=function(e){return g[e]},d="(?:"+ar.keys(g).join("|")+")",f=RegExp(d),b=RegExp(d,"g");return function(e){return e=null==e?"":""+e,f.test(e)?e.replace(b,c):e}};ar.escape=H(ac),ar.unescape=H(C),ar.result=function(f,b,c){var d=null==f?void 0:f[b];return d===void 0&&(d=c),ar.isFunction(d)?d.call(f):d};var an=0;ar.uniqueId=function(c){var b=++an+"";return c?c+b:b},ar.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var X=/(.)^/,ae={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},ab=/\\|'|\r|\n|\u2028|\u2029/g,W=function(b){return"\\"+ae[b]};ar.template=function(g,s,b){!s&&b&&(s=b),s=ar.defaults({},s,ar.templateSettings);var k=RegExp([(s.escape||X).source,(s.interpolate||X).source,(s.evaluate||X).source].join("|")+"|$","g"),q=0,h="__p+='";g.replace(k,function(f,i,n,u,c){return h+=g.slice(q,c).replace(ab,W),q=c+f.length,i?h+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?h+="'+\n((__t=("+n+"))==null?'':__t)+\n'":u&&(h+="';\n"+u+"\n__p+='"),f}),h+="';\n",s.variable||(h="with(obj||{}){\n"+h+"}\n"),h="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+h+"return __p;\n";try{var d=new Function(s.variable||"obj","_",h)}catch(m){throw m.source=h,m}var l=function(c){return d.call(this,c,ar)},j=s.variable||"obj";return l.source="function("+j+"){\n"+h+"}",l},ar.chain=function(c){var b=ar(c);return b._chain=!0,b};var J=function(c,b){return c._chain?ar(b).chain():b};ar.mixin=function(b){ar.each(ar.functions(b),function(c){var d=ar[c]=b[c];ar.prototype[c]=function(){var e=[this._wrapped];return az.apply(e,arguments),J(this,d.apply(ar,e))}})},ar.mixin(ar),ar.each(["pop","push","reverse","shift","sort","splice","unshift"],function(c){var b=ap[c];ar.prototype[c]=function(){var d=this._wrapped;return b.apply(d,arguments),"shift"!==c&&"splice"!==c||0!==d.length||delete d[0],J(this,d)}}),ar.each(["concat","join","slice"],function(c){var b=ap[c];ar.prototype[c]=function(){return J(this,b.apply(this._wrapped,arguments))}}),ar.prototype.value=function(){return this._wrapped},ar.prototype.valueOf=ar.prototype.toJSON=ar.prototype.value,ar.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return ar})}).call(this);(function(c){var g=typeof self=="object"&&self.self==self&&self||typeof global=="object"&&global.global==global&&global;if(typeof define==="function"&&define.amd){define(["underscore","jquery","exports"],function(e,j,h){g.Backbone=c(g,h,e,j)})}else{if(typeof exports!=="undefined"){var b=require("underscore"),f;try{f=require("jquery")}catch(d){}c(g,exports,b,f)}else{g.Backbone=c(g,{},g._,g.jQuery||g.Zepto||g.ender||g.$)}}})(function(af,av,aq,ah){var ag=af.Backbone;var al=[].slice;av.VERSION="1.2.1";av.$=ah;av.noConflict=function(){af.Backbone=ag;return this};av.emulateHTTP=false;av.emulateJSON=false;var az=function(b,d,c){switch(b){case 1:return function(){return aq[d](this[c])};case 2:return function(e){return aq[d](this[c],e)};case 3:return function(e,f){return aq[d](this[c],e,f)};case 4:return function(e,f,g){return aq[d](this[c],e,f,g)};default:return function(){var e=al.call(arguments);e.unshift(this[c]);return aq[d].apply(aq,e)}}};var ak=function(b,d,c){aq.each(d,function(g,f){if(aq[f]){b.prototype[f]=az(g,f,c)}})};var ar=av.Events={};var ae=/\s+/;var an=function(c,g,f,d,i){var b=0,h;if(f&&typeof f==="object"){if(d!==void 0&&"context" in i&&i.context===void 0){i.context=d}for(h=aq.keys(f);b<h.length;b++){g=c(g,h[b],f[h[b]],i)}}else{if(f&&ae.test(f)){for(h=f.split(ae);b<h.length;b++){g=c(g,h[b],d,i)}}else{g=c(g,f,d,i)}}return g};ar.on=function(c,d,b){return ax(this,c,d,b)};var ax=function(c,g,b,f,d){c._events=an(au,c._events||{},g,b,{context:f,ctx:c,listening:d});if(d){var h=c._listeners||(c._listeners={});h[d.id]=d}return c};ar.listenTo=function(c,g,f){if(!c){return this}var d=c._listenId||(c._listenId=aq.uniqueId("l"));var i=this._listeningTo||(this._listeningTo={});var b=i[d];if(!b){var h=this._listenId||(this._listenId=aq.uniqueId("l"));b=i[d]={obj:c,objId:d,id:h,listeningTo:i,count:0}}ax(c,g,f,this,b);return this};var au=function(d,h,c,g){if(c){var f=d[h]||(d[h]=[]);var k=g.context,b=g.ctx,j=g.listening;if(j){j.count++}f.push({callback:c,context:k,ctx:k||b,listening:j})}return d};ar.off=function(c,d,b){if(!this._events){return this}this._events=an(aw,this._events,c,d,{context:b,listeners:this._listeners});return this};ar.stopListening=function(c,g,f){var d=this._listeningTo;if(!d){return this}var i=c?[c._listenId]:aq.keys(d);for(var b=0;b<i.length;b++){var h=d[i[b]];if(!h){break}h.obj.off(g,f,this)}if(aq.isEmpty(d)){this._listeningTo=void 0}return this};var aw=function(E,q,b,H){if(!E){return}var i=0,y;var g=H.context,k=H.listeners;if(!q&&!b&&!g){var C=aq.keys(k);for(;i<C.length;i++){y=k[C[i]];delete k[y.id];delete y.listeningTo[y.objId]}return}var j=q?[q]:aq.keys(E);for(;i<j.length;i++){q=j[i];var x=E[q];if(!x){break}var m=[];for(var w=0;w<x.length;w++){var A=x[w];if(b&&b!==A.callback&&b!==A.callback._callback||g&&g!==A.context){m.push(A)}else{y=A.listening;if(y&&--y.count===0){delete k[y.id];delete y.listeningTo[y.objId]}}}if(m.length){E[q]=m}else{delete E[q]}}if(aq.size(E)){return E}};ar.once=function(b,f,d){var c=an(ad,{},b,f,aq.bind(this.off,this));return this.on(c,void 0,d)};ar.listenToOnce=function(b,f,d){var c=an(ad,{},f,d,aq.bind(this.stopListening,this,b));return this.listenTo(b,c)};var ad=function(b,f,d,c){if(d){var g=b[f]=aq.once(function(){c(f,g);d.apply(this,arguments)});g._callback=d}return b};ar.trigger=function(c){if(!this._events){return this}var f=Math.max(0,arguments.length-1);var b=Array(f);for(var d=0;d<f;d++){b[d]=arguments[d+1]}an(at,this._events,c,void 0,b);return this};var at=function(c,g,b,f){if(c){var d=c[g];var h=c.all;if(d&&h){h=h.slice()}if(d){aj(d,f)}if(h){aj(h,[g].concat(f))}}return c};var aj=function(d,h){var c,g=-1,f=d.length,k=h[0],b=h[1],j=h[2];switch(h.length){case 0:while(++g<f){(c=d[g]).callback.call(c.ctx)}return;case 1:while(++g<f){(c=d[g]).callback.call(c.ctx,k)}return;case 2:while(++g<f){(c=d[g]).callback.call(c.ctx,k,b)}return;case 3:while(++g<f){(c=d[g]).callback.call(c.ctx,k,b,j)}return;default:while(++g<f){(c=d[g]).callback.apply(c.ctx,h)}return}};ar.bind=ar.on;ar.unbind=ar.off;aq.extend(av,ar);var am=av.Model=function(b,d){var c=b||{};d||(d={});this.cid=aq.uniqueId(this.cidPrefix);this.attributes={};if(d.collection){this.collection=d.collection}if(d.parse){c=this.parse(c,d)||{}}c=aq.defaults({},c,aq.result(this,"defaults"));this.set(c,d);this.changed={};this.initialize.apply(this,arguments)};aq.extend(am.prototype,ar,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(b){return aq.clone(this.attributes)},sync:function(){return av.sync.apply(this,arguments)},get:function(b){return this.attributes[b]},escape:function(b){return aq.escape(this.get(b))},has:function(b){return this.get(b)!=null},matches:function(b){return !!aq.iteratee(b,this)(this.attributes)},set:function(A,q,b){if(A==null){return this}var C;if(typeof A==="object"){C=A;b=q}else{(C={})[A]=q}b||(b={});if(!this._validate(C,b)){return false}var i=b.unset;var x=b.silent;var g=[];var k=this._changing;this._changing=true;if(!k){this._previousAttributes=aq.clone(this.attributes);this.changed={}}var y=this.attributes;var j=this.changed;var w=this._previousAttributes;if(this.idAttribute in C){this.id=C[this.idAttribute]}for(var m in C){q=C[m];if(!aq.isEqual(y[m],q)){g.push(m)}if(!aq.isEqual(w[m],q)){j[m]=q}else{delete j[m]}i?delete y[m]:y[m]=q}if(!x){if(g.length){this._pending=b}for(var v=0;v<g.length;v++){this.trigger("change:"+g[v],this,y[g[v]],b)}}if(k){return this}if(!x){while(this._pending){b=this._pending;this._pending=false;this.trigger("change",this,b)}}this._pending=false;this._changing=false;return this},unset:function(b,c){return this.set(b,void 0,aq.extend({},c,{unset:true}))},clear:function(b){var d={};for(var c in this.attributes){d[c]=void 0}return this.set(d,aq.extend({},b,{unset:true}))},hasChanged:function(b){if(b==null){return !aq.isEmpty(this.changed)}return aq.has(this.changed,b)},changedAttributes:function(b){if(!b){return this.hasChanged()?aq.clone(this.changed):false}var f=this._changing?this._previousAttributes:this.attributes;var d={};for(var c in b){var g=b[c];if(aq.isEqual(f[c],g)){continue}d[c]=g}return aq.size(d)?d:false},previous:function(b){if(b==null||!this._previousAttributes){return null}return this._previousAttributes[b]},previousAttributes:function(){return aq.clone(this._previousAttributes)},fetch:function(b){b=aq.extend({parse:true},b);var d=this;var c=b.success;b.success=function(e){var f=b.parse?d.parse(e,b):e;if(!d.set(f,b)){return false}if(c){c.call(b.context,d,e,b)}d.trigger("sync",d,e,b)};ai(this,b);return this.sync("read",this,b)},save:function(m,i,b){var q;if(m==null||typeof m==="object"){q=m;b=i}else{(q={})[m]=i}b=aq.extend({validate:true,parse:true},b);var d=b.wait;if(q&&!d){if(!this.set(q,b)){return false}}else{if(!this._validate(q,b)){return false}}var j=this;var c=b.success;var g=this.attributes;b.success=function(h){j.attributes=g;var l=b.parse?j.parse(h,b):h;if(d){l=aq.extend({},q,l)}if(l&&!j.set(l,b)){return false}if(c){c.call(b.context,j,h,b)}j.trigger("sync",j,h,b)};ai(this,b);if(q&&d){this.attributes=aq.extend({},g,q)}var k=this.isNew()?"create":b.patch?"patch":"update";if(k==="patch"&&!b.attrs){b.attrs=q}var f=this.sync(k,this,b);this.attributes=g;return f},destroy:function(c){c=c?aq.clone(c):{};var g=this;var f=c.success;var d=c.wait;var h=function(){g.stopListening();g.trigger("destroy",g,g.collection,c)};c.success=function(e){if(d){h()}if(f){f.call(c.context,g,e,c)}if(!g.isNew()){g.trigger("sync",g,e,c)}};var b=false;if(this.isNew()){aq.defer(c.success)}else{ai(this,c);b=this.sync("delete",this,c)}if(!d){h()}return b},url:function(){var b=aq.result(this,"urlRoot")||aq.result(this.collection,"url")||L();if(this.isNew()){return b}var c=this.get(this.idAttribute);return b.replace(/[^\/]$/,"$&/")+encodeURIComponent(c)},parse:function(b,c){return b},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return !this.has(this.idAttribute)},isValid:function(b){return this._validate({},aq.defaults({validate:true},b))},_validate:function(b,d){if(!d.validate||!this.validate){return true}b=aq.extend({},this.attributes,b);var c=this.validationError=this.validate(b,d)||null;if(!c){return true}this.trigger("invalid",this,c,aq.extend(d,{validationError:c}));return false}});var aA={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};ak(am,aA,"attributes");var aa=av.Collection=function(b,c){c||(c={});if(c.model){this.model=c.model}if(c.comparator!==void 0){this.comparator=c.comparator}this._reset();this.initialize.apply(this,arguments);if(b){this.reset(b,aq.extend({silent:true},c))}};var ay={add:true,remove:true,merge:true};var ab={add:true,remove:false};aq.extend(aa.prototype,ar,{model:am,initialize:function(){},toJSON:function(b){return this.map(function(c){return c.toJSON(b)})},sync:function(){return av.sync.apply(this,arguments)},add:function(b,c){return this.set(b,aq.extend({merge:false},c,ab))},remove:function(b,f){f=aq.extend({},f);var d=!aq.isArray(b);b=d?[b]:aq.clone(b);var c=this._removeModels(b,f);if(!f.silent&&c){this.trigger("update",this,f)}return d?c[0]:c},set:function(C,aB){aB=aq.defaults({},aB,ay);if(aB.parse&&!this._isModel(C)){C=this.parse(C,aB)}var I=!aq.isArray(C);C=I?C?[C]:[]:C.slice();var H,O,aE,N,S;var q=aB.at;if(q!=null){q=+q}if(q<0){q+=this.length+1}var R=this.comparator&&q==null&&aB.sort!==false;var aD=aq.isString(this.comparator)?this.comparator:null;var U=[],aC=[],k={};var T=aB.add,M=aB.merge,P=aB.remove;var aF=!R&&T&&P?[]:false;var b=false;for(var i=0;i<C.length;i++){aE=C[i];if(N=this.get(aE)){if(P){k[N.cid]=true}if(M&&aE!==N){aE=this._isModel(aE)?aE.attributes:aE;if(aB.parse){aE=N.parse(aE,aB)}N.set(aE,aB);if(R&&!S&&N.hasChanged(aD)){S=true}}C[i]=N}else{if(T){O=C[i]=this._prepareModel(aE,aB);if(!O){continue}U.push(O);this._addReference(O,aB)}}O=N||O;if(!O){continue}H=this.modelId(O.attributes);if(aF&&(O.isNew()||!k[H])){aF.push(O);b=b||!this.models[i]||O.cid!==this.models[i].cid}k[H]=true}if(P){for(var i=0;i<this.length;i++){if(!k[(O=this.models[i]).cid]){aC.push(O)}}if(aC.length){this._removeModels(aC,aB)}}if(U.length||b){if(R){S=true}this.length+=U.length;if(q!=null){for(var i=0;i<U.length;i++){this.models.splice(q+i,0,U[i])}}else{if(aF){this.models.length=0}var j=aF||U;for(var i=0;i<j.length;i++){this.models.push(j[i])}}}if(S){this.sort({silent:true})}if(!aB.silent){var A=q!=null?aq.clone(aB):aB;for(var i=0;i<U.length;i++){if(q!=null){A.index=q+i}(O=U[i]).trigger("add",O,this,A)}if(S||b){this.trigger("sort",this,aB)}if(U.length||aC.length){this.trigger("update",this,aB)}}return I?C[0]:C},reset:function(b,d){d=d?aq.clone(d):{};for(var c=0;c<this.models.length;c++){this._removeReference(this.models[c],d)}d.previousModels=this.models;this._reset();b=this.add(b,aq.extend({silent:true},d));if(!d.silent){this.trigger("reset",this,d)}return b},push:function(b,c){return this.add(b,aq.extend({at:this.length},c))},pop:function(b){var c=this.at(this.length-1);return this.remove(c,b)},unshift:function(b,c){return this.add(b,aq.extend({at:0},c))},shift:function(b){var c=this.at(0);return this.remove(c,b)},slice:function(){return al.apply(this.models,arguments)},get:function(b){if(b==null){return void 0}var c=this.modelId(this._isModel(b)?b.attributes:b);return this._byId[b]||this._byId[c]||this._byId[b.cid]},at:function(b){if(b<0){b+=this.length}return this.models[b]},where:function(b,d){var c=aq.matches(b);return this[d?"find":"filter"](function(e){return c(e.attributes)})},findWhere:function(b){return this.where(b,true)},sort:function(b){if(!this.comparator){throw new Error("Cannot sort a set without a comparator")}b||(b={});if(aq.isString(this.comparator)||this.comparator.length===1){this.models=this.sortBy(this.comparator,this)}else{this.models.sort(aq.bind(this.comparator,this))}if(!b.silent){this.trigger("sort",this,b)}return this},pluck:function(b){return aq.invoke(this.models,"get",b)},fetch:function(b){b=aq.extend({parse:true},b);var d=b.success;var c=this;b.success=function(e){var f=b.reset?"reset":"set";c[f](e,b);if(d){d.call(b.context,c,e,b)}c.trigger("sync",c,e,b)};ai(this,b);return this.sync("read",this,b)},create:function(b,f){f=f?aq.clone(f):{};var d=f.wait;b=this._prepareModel(b,f);if(!b){return false}if(!d){this.add(b,f)}var c=this;var g=f.success;f.success=function(j,k,h){if(d){c.add(j,h)}if(g){g.call(h.context,j,k,h)}};b.save(null,f);return b},parse:function(b,c){return b},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(b){return b[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(b,d){if(this._isModel(b)){if(!b.collection){b.collection=this}return b}d=d?aq.clone(d):{};d.collection=this;var c=new this.model(b,d);if(!c.validationError){return c}this.trigger("invalid",this,c.validationError,d);return false},_removeModels:function(c,g){var b=[];for(var f=0;f<c.length;f++){var d=this.get(c[f]);if(!d){continue}var h=this.indexOf(d);this.models.splice(h,1);this.length--;if(!g.silent){g.index=h;d.trigger("remove",d,this,g)}b.push(d);this._removeReference(d,g)}return b.length?b:false},_isModel:function(b){return b instanceof am},_addReference:function(c,d){this._byId[c.cid]=c;var b=this.modelId(c.attributes);if(b!=null){this._byId[b]=c}c.on("all",this._onModelEvent,this)},_removeReference:function(c,d){delete this._byId[c.cid];var b=this.modelId(c.attributes);if(b!=null){delete this._byId[b]}if(this===c.collection){delete c.collection}c.off("all",this._onModelEvent,this)},_onModelEvent:function(c,g,b,f){if((c==="add"||c==="remove")&&b!==this){return}if(c==="destroy"){this.remove(g,f)}if(c==="change"){var d=this.modelId(g.previousAttributes());var h=this.modelId(g.attributes);if(d!==h){if(d!=null){delete this._byId[d]}if(h!=null){this._byId[h]=g}}}this.trigger.apply(this,arguments)}});var ac={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:2,contains:2,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3};ak(aa,ac,"models");var W=["groupBy","countBy","sortBy","indexBy"];aq.each(W,function(b){if(!aq[b]){return}aa.prototype[b]=function(f,d){var c=aq.isFunction(f)?f:function(e){return e.get(f)};return aq[b](this.models,c,d)}});var ao=av.View=function(b){this.cid=aq.uniqueId("view");aq.extend(this,aq.pick(b,Q));this._ensureElement();this.initialize.apply(this,arguments)};var D=/^(\S+)\s*(.*)$/;var Q=["model","collection","el","id","attributes","className","tagName","events"];aq.extend(ao.prototype,ar,{tagName:"div",$:function(b){return this.$el.find(b)},initialize:function(){},render:function(){return this},remove:function(){this._removeElement();this.stopListening();return this},_removeElement:function(){this.$el.remove()},setElement:function(b){this.undelegateEvents();this._setElement(b);this.delegateEvents();return this},_setElement:function(b){this.$el=b instanceof av.$?b:av.$(b);this.el=this.$el[0]},delegateEvents:function(b){b||(b=aq.result(this,"events"));if(!b){return this}this.undelegateEvents();for(var f in b){var d=b[f];if(!aq.isFunction(d)){d=this[d]}if(!d){continue}var c=f.match(D);this.delegate(c[1],c[2],aq.bind(d,this))}return this},delegate:function(c,d,b){this.$el.on(c+".delegateEvents"+this.cid,d,b);return this},undelegateEvents:function(){if(this.$el){this.$el.off(".delegateEvents"+this.cid)}return this},undelegate:function(c,d,b){this.$el.off(c+".delegateEvents"+this.cid,d,b);return this},_createElement:function(b){return document.createElement(b)},_ensureElement:function(){if(!this.el){var b=aq.extend({},aq.result(this,"attributes"));if(this.id){b.id=aq.result(this,"id")}if(this.className){b["class"]=aq.result(this,"className")}this.setElement(this._createElement(aq.result(this,"tagName")));this._setAttributes(b)}else{this.setElement(aq.result(this,"el"))}},_setAttributes:function(b){this.$el.attr(b)}});av.sync=function(d,g,f){var j=B[d];aq.defaults(f||(f={}),{emulateHTTP:av.emulateHTTP,emulateJSON:av.emulateJSON});var b={type:j,dataType:"json"};if(!f.url){b.url=aq.result(g,"url")||L()}if(f.data==null&&g&&(d==="create"||d==="update"||d==="patch")){b.contentType="application/json";b.data=JSON.stringify(f.attrs||g.toJSON(f))}if(f.emulateJSON){b.contentType="application/x-www-form-urlencoded";b.data=b.data?{model:b.data}:{}}if(f.emulateHTTP&&(j==="PUT"||j==="DELETE"||j==="PATCH")){b.type="POST";if(f.emulateJSON){b.data._method=j}var i=f.beforeSend;f.beforeSend=function(h){h.setRequestHeader("X-HTTP-Method-Override",j);if(i){return i.apply(this,arguments)}}}if(b.type!=="GET"&&!f.emulateJSON){b.processData=false}var e=f.error;f.error=function(k,l,h){f.textStatus=l;f.errorThrown=h;if(e){e.call(f.context,k,l,h)}};var c=f.xhr=av.ajax(aq.extend(b,f));g.trigger("request",g,c,f);return c};var B={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};av.ajax=function(){return av.$.ajax.apply(av.$,arguments)};var G=av.Router=function(b){b||(b={});if(b.routes){this.routes=b.routes}this._bindRoutes();this.initialize.apply(this,arguments)};var V=/\((.*?)\)/g;var Z=/(\(\?)?:\w+/g;var Y=/\*\w+/g;var X=/[\-{}\[\]+?.,\\\^$|#\s]/g;aq.extend(G.prototype,ar,{initialize:function(){},route:function(b,d,c){if(!aq.isRegExp(b)){b=this._routeToRegExp(b)}if(aq.isFunction(d)){c=d;d=""}if(!c){c=this[d]}var e=this;av.history.route(b,function(g){var f=e._extractParameters(b,g);if(e.execute(c,f,d)!==false){e.trigger.apply(e,["route:"+d].concat(f));e.trigger("route",d,f);av.history.trigger("route",e,d,f)}});return this},execute:function(c,d,b){if(c){c.apply(this,d)}},navigate:function(c,b){av.history.navigate(c,b);return this},_bindRoutes:function(){if(!this.routes){return}this.routes=aq.result(this,"routes");var b,c=aq.keys(this.routes);while((b=c.pop())!=null){this.route(b,this.routes[b])}},_routeToRegExp:function(b){b=b.replace(X,"\\$&").replace(V,"(?:$1)?").replace(Z,function(c,d){return d?c:"([^/?]+)"}).replace(Y,"([^?]*?)");return new RegExp("^"+b+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(b,d){var c=b.exec(d).slice(1);return aq.map(c,function(f,g){if(g===c.length-1){return f||null}return f?decodeURIComponent(f):null})}});var K=av.History=function(){this.handlers=[];aq.bindAll(this,"checkUrl");if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var F=/^[#\/]|\s+$/g;var ap=/^\/+|\/+$/g;var J=/#.*$/;K.started=false;aq.extend(K.prototype,ar,{interval:50,atRoot:function(){var b=this.location.pathname.replace(/[^\/]$/,"$&/");return b===this.root&&!this.getSearch()},matchRoot:function(){var b=this.decodeFragment(this.location.pathname);var c=b.slice(0,this.root.length-1)+"/";return c===this.root},decodeFragment:function(b){return decodeURI(b.replace(/%25/g,"%2525"))},getSearch:function(){var b=this.location.href.replace(/#.*/,"").match(/\?.+/);return b?b[0]:""},getHash:function(b){var c=(b||this).location.href.match(/#(.*)$/);return c?c[1]:""},getPath:function(){var b=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return b.charAt(0)==="/"?b.slice(1):b},getFragment:function(b){if(b==null){if(this._usePushState||!this._wantsHashChange){b=this.getPath()}else{b=this.getHash()}}return b.replace(F,"")},start:function(b){if(K.started){throw new Error("Backbone.history has already been started")}K.started=true;this.options=aq.extend({root:"/"},this.options,b);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._hasHashChange="onhashchange" in window;this._useHashChange=this._wantsHashChange&&this._hasHashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.history&&this.history.pushState);this._usePushState=this._wantsPushState&&this._hasPushState;this.fragment=this.getFragment();this.root=("/"+this.root+"/").replace(ap,"/");if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var f=this.root.slice(0,-1)||"/";this.location.replace(f+"#"+this.getPath());return true}else{if(this._hasPushState&&this.atRoot()){this.navigate(this.getHash(),{replace:true})}}}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe");this.iframe.src="javascript:0";this.iframe.style.display="none";this.iframe.tabIndex=-1;var d=document.body;var c=d.insertBefore(this.iframe,d.firstChild).contentWindow;c.document.open();c.document.close();c.location.hash="#"+this.fragment}var g=window.addEventListener||function(h,i){return attachEvent("on"+h,i)};if(this._usePushState){g("popstate",this.checkUrl,false)}else{if(this._useHashChange&&!this.iframe){g("hashchange",this.checkUrl,false)}else{if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}}}if(!this.options.silent){return this.loadUrl()}},stop:function(){var b=window.removeEventListener||function(c,d){return detachEvent("on"+c,d)};if(this._usePushState){b("popstate",this.checkUrl,false)}else{if(this._useHashChange&&!this.iframe){b("hashchange",this.checkUrl,false)}}if(this.iframe){document.body.removeChild(this.iframe);this.iframe=null}if(this._checkUrlInterval){clearInterval(this._checkUrlInterval)}K.started=false},route:function(b,c){this.handlers.unshift({route:b,callback:c})},checkUrl:function(b){var c=this.getFragment();if(c===this.fragment&&this.iframe){c=this.getHash(this.iframe.contentWindow)}if(c===this.fragment){return false}if(this.iframe){this.navigate(c)}this.loadUrl()},loadUrl:function(b){if(!this.matchRoot()){return false}b=this.fragment=this.getFragment(b);return aq.any(this.handlers,function(c){if(c.route.test(b)){c.callback(b);return true}})},navigate:function(c,g){if(!K.started){return false}if(!g||g===true){g={trigger:!!g}}c=this.getFragment(c||"");var b=this.root;if(c===""||c.charAt(0)==="?"){b=b.slice(0,-1)||"/"}var f=b+c;c=this.decodeFragment(c.replace(J,""));if(this.fragment===c){return}this.fragment=c;if(this._usePushState){this.history[g.replace?"replaceState":"pushState"]({},document.title,f)}else{if(this._wantsHashChange){this._updateHash(this.location,c,g.replace);if(this.iframe&&c!==this.getHash(this.iframe.contentWindow)){var d=this.iframe.contentWindow;if(!g.replace){d.document.open();d.document.close()}this._updateHash(d.location,c,g.replace)}}else{return this.location.assign(f)}}if(g.trigger){return this.loadUrl(c)}},_updateHash:function(c,f,b){if(b){var d=c.href.replace(/(javascript:|#).*$/,"");c.replace(d+"#"+f)}else{c.hash="#"+f}}});av.history=new K;var z=function(b,f){var d=this;var c;if(b&&aq.has(b,"constructor")){c=b.constructor}else{c=function(){return d.apply(this,arguments)}}aq.extend(c,d,f);var g=function(){this.constructor=c};g.prototype=d.prototype;c.prototype=new g;if(b){aq.extend(c.prototype,b)}c.__super__=d.prototype;return c};am.extend=aa.extend=G.extend=ao.extend=K.extend=z;var L=function(){throw new Error('A "url" property or function must be specified')};var ai=function(c,d){var b=d.error;d.error=function(e){if(b){b.call(d.context,c,e,d)}c.trigger("error",c,e,d)}};return av});(function(c,b){typeof exports==="object"&&typeof module!=="undefined"?module.exports=b():typeof define==="function"&&define.amd?define(b):c.moment=b()}(this,function(){var b3;function c9(){return b3.apply(null,arguments)}function aY(dU){b3=dU}function bs(dU){return Object.prototype.toString.call(dU)==="[object Array]"}function aL(dU){return dU instanceof Date||Object.prototype.toString.call(dU)==="[object Date]"}function a3(dU,dX){var dW=[],dV;for(dV=0;dV<dU.length;++dV){dW.push(dX(dU[dV],dV))}return dW}function a9(dV,dU){return Object.prototype.hasOwnProperty.call(dV,dU)}function cF(dV,dU){for(var dW in dU){if(a9(dU,dW)){dV[dW]=dU[dW]}}if(a9(dU,"toString")){dV.toString=dU.toString}if(a9(dU,"valueOf")){dV.valueOf=dU.valueOf}return dV}function I(dW,dX,dU,dV){return c2(dW,dX,dU,dV,true).utc()}function aG(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false}}function cq(dU){if(dU._pf==null){dU._pf=aG()}return dU._pf}function c(dU){if(dU._isValid==null){var dV=cq(dU);dU._isValid=!isNaN(dU._d.getTime())&&dV.overflow<0&&!dV.empty&&!dV.invalidMonth&&!dV.nullInput&&!dV.invalidFormat&&!dV.userInvalidated;if(dU._strict){dU._isValid=dU._isValid&&dV.charsLeftOver===0&&dV.unusedTokens.length===0&&dV.bigHour===undefined}}return dU._isValid}function bV(dV){var dU=I(NaN);if(dV!=null){cF(cq(dU),dV)}else{cq(dU).userInvalidated=true}return dU}var ap=c9.momentProperties=[];function s(dY,dX){var dU,dW,dV;if(typeof dX._isAMomentObject!=="undefined"){dY._isAMomentObject=dX._isAMomentObject}if(typeof dX._i!=="undefined"){dY._i=dX._i}if(typeof dX._f!=="undefined"){dY._f=dX._f}if(typeof dX._l!=="undefined"){dY._l=dX._l}if(typeof dX._strict!=="undefined"){dY._strict=dX._strict}if(typeof dX._tzm!=="undefined"){dY._tzm=dX._tzm}if(typeof dX._isUTC!=="undefined"){dY._isUTC=dX._isUTC}if(typeof dX._offset!=="undefined"){dY._offset=dX._offset}if(typeof dX._pf!=="undefined"){dY._pf=cq(dX)}if(typeof dX._locale!=="undefined"){dY._locale=dX._locale}if(ap.length>0){for(dU in ap){dW=ap[dU];dV=dX[dW];if(typeof dV!=="undefined"){dY[dW]=dV}}}return dY}var dG=false;function bC(dU){s(this,dU);this._d=new Date(+dU._d);if(dG===false){dG=true;c9.updateOffset(this);dG=false}}function bQ(dU){return dU instanceof bC||(dU!=null&&dU._isAMomentObject!=null)}function dM(dU){var dW=+dU,dV=0;if(dW!==0&&isFinite(dW)){if(dW>=0){dV=Math.floor(dW)}else{dV=Math.ceil(dW)}}return dV}function M(dZ,dY,dV){var dU=Math.min(dZ.length,dY.length),dW=Math.abs(dZ.length-dY.length),d0=0,dX;for(dX=0;dX<dU;dX++){if((dV&&dZ[dX]!==dY[dX])||(!dV&&dM(dZ[dX])!==dM(dY[dX]))){d0++}}return d0+dW}function aI(){}var cM={};var aB;function dw(dU){return dU?dU.toLowerCase().replace("_","-"):dU}function Z(dZ){var dX=0,dV,dY,dU,dW;while(dX<dZ.length){dW=dw(dZ[dX]).split("-");dV=dW.length;dY=dw(dZ[dX+1]);dY=dY?dY.split("-"):null;while(dV>0){dU=ab(dW.slice(0,dV).join("-"));if(dU){return dU}if(dY&&dY.length>=dV&&M(dW,dY,true)>=dV-1){break}dV--}dX++}return null}function ab(dU){var dW=null;if(!cM[dU]&&typeof module!=="undefined"&&module&&module.exports){try{dW=aB._abbr;require("./locale/"+dU);dp(dW)}catch(dV){}}return cM[dU]}function dp(dV,dU){var dW;if(dV){if(typeof dU==="undefined"){dW=o(dV)}else{dW=l(dV,dU)}if(dW){aB=dW}}return aB._abbr}function l(dV,dU){if(dU!==null){dU.abbr=dV;if(!cM[dV]){cM[dV]=new aI()}cM[dV].set(dU);dp(dV);return cM[dV]}else{delete cM[dV];return null}}function o(dV){var dU;if(dV&&dV._locale&&dV._locale._abbr){dV=dV._locale._abbr}if(!dV){return aB}if(!bs(dV)){dU=ab(dV);if(dU){return dU}dV=[dV]}return Z(dV)}var m={};function dJ(dW,dU){var dV=dW.toLowerCase();m[dV]=m[dV+"s"]=m[dU]=dW}function aa(dU){return typeof dU==="string"?m[dU]||m[dU.toLowerCase()]:undefined}function cH(dW){var dV={},dU,dX;for(dX in dW){if(a9(dW,dX)){dU=aa(dX);if(dU){dV[dU]=dW[dX]}}}return dV}function b2(dU,dV){return function(dW){if(dW!=null){N(this,dU,dW);c9.updateOffset(this,dV);return this}else{return ar(this,dU)}}}function ar(dV,dU){return dV._d["get"+(dV._isUTC?"UTC":"")+dU]()}function N(dV,dU,dW){return dV._d["set"+(dV._isUTC?"UTC":"")+dU](dW)}function bq(dU,dW){var dV;if(typeof dU==="object"){for(dV in dU){this.set(dV,dU[dV])}}else{dU=aa(dU);if(typeof this[dU]==="function"){return this[dU](dW)}}return this}function T(dY,dX,dW){var dV=""+Math.abs(dY),dU=dY>=0;while(dV.length<dX){dV="0"+dV}return(dU?(dW?"+":""):"-")+dV}var x=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g;var aT=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var a6={};var dh={};function a4(dV,dW,dU,dY){var dX=dY;if(typeof dY==="string"){dX=function(){return this[dY]()}}if(dV){dh[dV]=dX}if(dW){dh[dW[0]]=function(){return T(dX.apply(this,arguments),dW[1],dW[2])}}if(dU){dh[dU]=function(){return this.localeData().ordinal(dX.apply(this,arguments),dV)}}}function cT(dU){if(dU.match(/\[[\s\S]/)){return dU.replace(/^\[|\]$/g,"")}return dU.replace(/\\/g,"")}function a5(dW){var dX=dW.match(x),dU,dV;for(dU=0,dV=dX.length;dU<dV;dU++){if(dh[dX[dU]]){dX[dU]=dh[dX[dU]]}else{dX[dU]=cT(dX[dU])}}return function(dZ){var dY="";for(dU=0;dU<dV;dU++){dY+=dX[dU] instanceof Function?dX[dU].call(dZ,dW):dX[dU]}return dY}}function h(dU,dV){if(!dU.isValid()){return dU.localeData().invalidDate()}dV=cA(dV,dU.localeData());if(!a6[dV]){a6[dV]=a5(dV)}return a6[dV](dU)}function cA(dX,dU){var dV=5;function dW(dY){return dU.longDateFormat(dY)||dY}aT.lastIndex=0;while(dV>=0&&aT.test(dX)){dX=dX.replace(aT,dW);aT.lastIndex=0;dV-=1}return dX}var dD=/\d/;var dC=/\d\d/;var dA=/\d{3}/;var dz=/\d{4}/;var dy=/[+-]?\d{6}/;var cu=/\d\d?/;var cr=/\d{1,3}/;var co=/\d{1,4}/;var cm=/[+-]?\d{1,6}/;var aF=/\d+/;var dN=/[+-]?\d+/;var dO=/Z|[+-]\d\d:?\d\d/gi;var S=/[+-]?\d+(\.\d{1,3})?/;var C=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i;var cE={};function k(dU,dV,dW){cE[dU]=typeof dV==="function"?dV:function(dX){return(dX&&dW)?dW:dV}}function am(dV,dU){if(!a9(cE,dV)){return new RegExp(ba(dV))}return cE[dV](dU._strict,dU._locale)}function ba(dU){return dU.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(dV,dZ,dY,dX,dW){return dZ||dY||dX||dW}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var O={};function b8(dV,dX){var dU,dW=dX;if(typeof dV==="string"){dV=[dV]}if(typeof dX==="number"){dW=function(dY,dZ){dZ[dX]=dM(dY)}}for(dU=0;dU<dV.length;dU++){O[dV[dU]]=dW}}function dS(dU,dV){b8(dU,function(dW,dZ,dX,dY){dX._w=dX._w||{};dV(dW,dX._w,dX,dY)})}function a1(dW,dU,dV){if(dU!=null&&a9(O,dW)){O[dW](dU,dV._a,dV,dW)}}var cn=0;var cz=1;var cg=2;var aA=3;var di=4;var cC=5;var dK=6;function cJ(dU,dV){return new Date(Date.UTC(dU,dV+1,0)).getUTCDate()}a4("M",["MM",2],"Mo",function(){return this.month()+1});a4("MMM",0,0,function(dU){return this.localeData().monthsShort(this,dU)});a4("MMMM",0,0,function(dU){return this.localeData().months(this,dU)});dJ("month","M");k("M",cu);k("MM",cu,dC);k("MMM",C);k("MMMM",C);b8(["M","MM"],function(dU,dV){dV[cz]=dM(dU)-1});b8(["MMM","MMMM"],function(dU,dY,dV,dW){var dX=dV._locale.monthsParse(dU,dW,dV._strict);if(dX!=null){dY[cz]=dX}else{cq(dV).invalidMonth=dU}});var dQ="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function cw(dU){return this._months[dU.month()]}var bx="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function cL(dU){return this._monthsShort[dU.month()]}function bG(dV,dZ,dU){var dW,dY,dX;if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(dW=0;dW<12;dW++){dY=I([2000,dW]);if(dU&&!this._longMonthsParse[dW]){this._longMonthsParse[dW]=new RegExp("^"+this.months(dY,"").replace(".","")+"$","i");this._shortMonthsParse[dW]=new RegExp("^"+this.monthsShort(dY,"").replace(".","")+"$","i")}if(!dU&&!this._monthsParse[dW]){dX="^"+this.months(dY,"")+"|^"+this.monthsShort(dY,"");this._monthsParse[dW]=new RegExp(dX.replace(".",""),"i")}if(dU&&dZ==="MMMM"&&this._longMonthsParse[dW].test(dV)){return dW}else{if(dU&&dZ==="MMM"&&this._shortMonthsParse[dW].test(dV)){return dW}else{if(!dU&&this._monthsParse[dW].test(dV)){return dW}}}}}function du(dU,dV){var dW;if(typeof dV==="string"){dV=dU.localeData().monthsParse(dV);if(typeof dV!=="number"){return dU}}dW=Math.min(dU.date(),cJ(dU.year(),dV));dU._d["set"+(dU._isUTC?"UTC":"")+"Month"](dV,dW);return dU}function q(dU){if(dU!=null){du(this,dU);c9.updateOffset(this,true);return this}else{return ar(this,"Month")}}function aU(){return cJ(this.year(),this.month())}function ct(dU){var dW;var dV=dU._a;if(dV&&cq(dU).overflow===-2){dW=dV[cz]<0||dV[cz]>11?cz:dV[cg]<1||dV[cg]>cJ(dV[cn],dV[cz])?cg:dV[aA]<0||dV[aA]>24||(dV[aA]===24&&(dV[di]!==0||dV[cC]!==0||dV[dK]!==0))?aA:dV[di]<0||dV[di]>59?di:dV[cC]<0||dV[cC]>59?cC:dV[dK]<0||dV[dK]>999?dK:-1;if(cq(dU)._overflowDayOfYear&&(dW<cn||dW>cg)){dW=cg}cq(dU).overflow=dW}return dU}function dm(dU){if(c9.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+dU)}}function cI(dW,dV){var dX=true,dU=dW+"\n"+(new Error()).stack;return cF(function(){if(dX){dm(dU);dX=false}return dV.apply(this,arguments)},dV)}var ai={};function cj(dU,dV){if(!ai[dU]){dm(dV);ai[dU]=true}}c9.suppressDeprecationWarnings=false;var b5=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var dn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]];var cl=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]];var dg=/^\/?Date\((\-?\d+)/i;function e(dX){var dY,dU,dW=dX._i,dV=b5.exec(dW);if(dV){cq(dX).iso=true;for(dY=0,dU=dn.length;dY<dU;dY++){if(dn[dY][1].exec(dW)){dX._f=dn[dY][0]+(dV[6]||" ");break}}for(dY=0,dU=cl.length;dY<dU;dY++){if(cl[dY][1].exec(dW)){dX._f+=cl[dY][0];break}}if(dW.match(dO)){dX._f+="Z"}z(dX)}else{dX._isValid=false}}function br(dV){var dU=dg.exec(dV._i);if(dU!==null){dV._d=new Date(+dU[1]);return}e(dV);if(dV._isValid===false){delete dV._isValid;c9.createFromInputFallback(dV)}}c9.createFromInputFallback=cI("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(dU){dU._d=new Date(dU._i+(dU._useUTC?" UTC":""))});function aw(d1,dU,dZ,dY,d0,dX,dW){var dV=new Date(d1,dU,dZ,dY,d0,dX,dW);if(d1<1970){dV.setFullYear(d1)}return dV}function bF(dV){var dU=new Date(Date.UTC.apply(null,arguments));if(dV<1970){dU.setUTCFullYear(dV)}return dU}a4(0,["YY",2],0,function(){return this.year()%100});a4(0,["YYYY",4],0,"year");a4(0,["YYYYY",5],0,"year");a4(0,["YYYYYY",6,true],0,"year");dJ("year","y");k("Y",dN);k("YY",cu,dC);k("YYYY",co,dz);k("YYYYY",cm,dy);k("YYYYYY",cm,dy);b8(["YYYY","YYYYY","YYYYYY"],cn);b8("YY",function(dU,dV){dV[cn]=c9.parseTwoDigitYear(dU)});function dt(dU){return b0(dU)?366:365}function b0(dU){return(dU%4===0&&dU%100!==0)||dU%400===0}c9.parseTwoDigitYear=function(dU){return dM(dU)+(dM(dU)>68?1900:2000)};var V=b2("FullYear",false);function cS(){return b0(this.year())}a4("w",["ww",2],"wo","week");a4("W",["WW",2],"Wo","isoWeek");dJ("week","w");dJ("isoWeek","W");k("w",cu);k("ww",cu,dC);k("W",cu);k("WW",cu,dC);dS(["w","ww","W","WW"],function(dU,dX,dV,dW){dX[dW.substr(0,1)]=dM(dU)});function dT(dY,dW,dZ){var dV=dZ-dW,dU=dZ-dY.day(),dX;if(dU>dV){dU-=7}if(dU<dV-7){dU+=7}dX=bU(dY).add(dU,"d");return{week:Math.ceil(dX.dayOfYear()/7),year:dX.year()}}function c1(dU){return dT(dU,this._week.dow,this._week.doy).week}var bw={dow:0,doy:6};function aM(){return this._week.dow}function u(){return this._week.doy}function bk(dU){var dV=this.localeData().week(this);return dU==null?dV:this.add((dU-dV)*7,"d")}function dx(dU){var dV=dT(this,1,4).week;return dU==null?dV:this.add((dU-dV)*7,"d")}a4("DDD",["DDDD",3],"DDDo","dayOfYear");dJ("dayOfYear","DDD");k("DDD",cr);k("DDDD",dA);b8(["DDD","DDDD"],function(dU,dW,dV){dV._dayOfYear=dM(dU)});function aD(dY,dX,dZ,d1,dU){var d0=bF(dY,0,1).getUTCDay();var dW;var dV;d0=d0===0?7:d0;dZ=dZ!=null?dZ:dU;dW=dU-d0+(d0>d1?7:0)-(d0<dU?7:0);dV=7*(dX-1)+(dZ-dU)+dW+1;return{year:dV>0?dY:dY-1,dayOfYear:dV>0?dV:dt(dY-1)+dV}}function bN(dU){var dV=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/86400000)+1;return dU==null?dV:this.add((dU-dV),"d")}function bc(dV,dU,dW){if(dV!=null){return dV}if(dU!=null){return dU}return dW}function bl(dV){var dU=new Date();if(dV._useUTC){return[dU.getUTCFullYear(),dU.getUTCMonth(),dU.getUTCDate()]}return[dU.getFullYear(),dU.getMonth(),dU.getDate()]}function R(dY){var dZ,dX,dW=[],dV,dU;if(dY._d){return}dV=bl(dY);if(dY._w&&dY._a[cg]==null&&dY._a[cz]==null){ad(dY)}if(dY._dayOfYear){dU=bc(dY._a[cn],dV[cn]);if(dY._dayOfYear>dt(dU)){cq(dY)._overflowDayOfYear=true}dX=bF(dU,0,dY._dayOfYear);dY._a[cz]=dX.getUTCMonth();dY._a[cg]=dX.getUTCDate()}for(dZ=0;dZ<3&&dY._a[dZ]==null;++dZ){dY._a[dZ]=dW[dZ]=dV[dZ]}for(;dZ<7;dZ++){dY._a[dZ]=dW[dZ]=(dY._a[dZ]==null)?(dZ===2?1:0):dY._a[dZ]}if(dY._a[aA]===24&&dY._a[di]===0&&dY._a[cC]===0&&dY._a[dK]===0){dY._nextDay=true;dY._a[aA]=0}dY._d=(dY._useUTC?bF:aw).apply(null,dW);if(dY._tzm!=null){dY._d.setUTCMinutes(dY._d.getUTCMinutes()-dY._tzm)}if(dY._nextDay){dY._a[aA]=24}}function ad(dW){var dU,dY,dX,dZ,d1,d0,dV;dU=dW._w;if(dU.GG!=null||dU.W!=null||dU.E!=null){d1=1;d0=4;dY=bc(dU.GG,dW._a[cn],dT(bU(),1,4).year);dX=bc(dU.W,1);dZ=bc(dU.E,1)}else{d1=dW._locale._week.dow;d0=dW._locale._week.doy;dY=bc(dU.gg,dW._a[cn],dT(bU(),d1,d0).year);dX=bc(dU.w,1);if(dU.d!=null){dZ=dU.d;if(dZ<d1){++dX}}else{if(dU.e!=null){dZ=dU.e+d1}else{dZ=d1}}}dV=aD(dY,dX,dZ,d0,d1);dW._a[cn]=dV.year;dW._dayOfYear=dV.dayOfYear}c9.ISO_8601=function(){};function z(dW){if(dW._f===c9.ISO_8601){e(dW);return}dW._a=[];cq(dW).empty=true;var dZ=""+dW._i,dY,dV,d2,dX,d1,dU=dZ.length,d0=0;d2=cA(dW._f,dW._locale).match(x)||[];for(dY=0;dY<d2.length;dY++){dX=d2[dY];dV=(dZ.match(am(dX,dW))||[])[0];if(dV){d1=dZ.substr(0,dZ.indexOf(dV));if(d1.length>0){cq(dW).unusedInput.push(d1)}dZ=dZ.slice(dZ.indexOf(dV)+dV.length);d0+=dV.length}if(dh[dX]){if(dV){cq(dW).empty=false}else{cq(dW).unusedTokens.push(dX)}a1(dX,dV,dW)}else{if(dW._strict&&!dV){cq(dW).unusedTokens.push(dX)}}}cq(dW).charsLeftOver=dU-d0;if(dZ.length>0){cq(dW).unusedInput.push(dZ)}if(cq(dW).bigHour===true&&dW._a[aA]<=12&&dW._a[aA]>0){cq(dW).bigHour=undefined}dW._a[aA]=bY(dW._locale,dW._a[aA],dW._meridiem);R(dW);ct(dW)}function bY(dU,dW,dX){var dV;if(dX==null){return dW}if(dU.meridiemHour!=null){return dU.meridiemHour(dW,dX)}else{if(dU.isPM!=null){dV=dU.isPM(dX);if(dV&&dW<12){dW+=12}if(!dV&&dW===12){dW=0}return dW}else{return dW}}}function y(dU){var dY,dW,dX,dV,dZ;if(dU._f.length===0){cq(dU).invalidFormat=true;dU._d=new Date(NaN);return}for(dV=0;dV<dU._f.length;dV++){dZ=0;dY=s({},dU);if(dU._useUTC!=null){dY._useUTC=dU._useUTC}dY._f=dU._f[dV];z(dY);if(!c(dY)){continue}dZ+=cq(dY).charsLeftOver;dZ+=cq(dY).unusedTokens.length*10;cq(dY).score=dZ;if(dX==null||dZ<dX){dX=dZ;dW=dY}}cF(dU,dW||dY)}function ck(dU){if(dU._d){return}var dV=cH(dU._i);dU._a=[dV.year,dV.month,dV.day||dV.date,dV.hour,dV.minute,dV.second,dV.millisecond];R(dU)}function cf(dV){var dU=dV._i,dX=dV._f,dW;dV._locale=dV._locale||o(dV._l);if(dU===null||(dX===undefined&&dU==="")){return bV({nullInput:true})}if(typeof dU==="string"){dV._i=dU=dV._locale.preparse(dU)}if(bQ(dU)){return new bC(ct(dU))}else{if(bs(dX)){y(dV)}else{if(dX){z(dV)}else{if(aL(dU)){dV._d=dU}else{bo(dV)}}}}dW=new bC(ct(dV));if(dW._nextDay){dW.add(1,"d");dW._nextDay=undefined}return dW}function bo(dV){var dU=dV._i;if(dU===undefined){dV._d=new Date()}else{if(aL(dU)){dV._d=new Date(+dU)}else{if(typeof dU==="string"){br(dV)}else{if(bs(dU)){dV._a=a3(dU.slice(0),function(dW){return parseInt(dW,10)});R(dV)}else{if(typeof(dU)==="object"){ck(dV)}else{if(typeof(dU)==="number"){dV._d=new Date(dU)}else{c9.createFromInputFallback(dV)}}}}}}}function c2(dX,dY,dU,dW,dV){var dZ={};if(typeof(dU)==="boolean"){dW=dU;dU=undefined}dZ._isAMomentObject=true;dZ._useUTC=dZ._isUTC=dV;dZ._l=dU;dZ._i=dX;dZ._f=dY;dZ._strict=dW;return cf(dZ)}function bU(dW,dX,dU,dV){return c2(dW,dX,dU,dV,false)}var aK=cI("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var dU=bU.apply(null,arguments);return dU<this?this:dU});var dH=cI("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var dU=bU.apply(null,arguments);return dU>this?this:dU});function bT(dW,dX){var dV,dU;if(dX.length===1&&bs(dX[0])){dX=dX[0]}if(!dX.length){return bU()}dV=dX[0];for(dU=1;dU<dX.length;++dU){if(dX[dU][dW](dV)){dV=dX[dU]}}return dV}function cB(){var dU=[].slice.call(arguments,0);return bT("isBefore",dU)}function aV(){var dU=[].slice.call(arguments,0);return bT("isAfter",dU)}function af(dZ){var d1=cH(dZ),d0=d1.year||0,dV=d1.quarter||0,dW=d1.month||0,dU=d1.week||0,d4=d1.day||0,d2=d1.hour||0,dY=d1.minute||0,d3=d1.second||0,dX=d1.millisecond||0;this._milliseconds=+dX+d3*1000+dY*60000+d2*3600000;this._days=+d4+dU*7;this._months=+dW+dV*3+d0*12;this._data={};this._locale=o();this._bubble()}function L(dU){return dU instanceof af}function dB(dU,dV){a4(dU,0,0,function(){var dX=this.utcOffset();var dW="+";if(dX<0){dX=-dX;dW="-"}return dW+T(~~(dX/60),2)+dV+T(~~(dX)%60,2)})}dB("Z",":");dB("ZZ","");k("Z",dO);k("ZZ",dO);b8(["Z","ZZ"],function(dU,dW,dV){dV._useUTC=true;dV._tzm=by(dU)});var bt=/([\+\-]|\d\d)/gi;function by(dV){var dX=((dV||"").match(dO)||[]);var dU=dX[dX.length-1]||[];var dY=(dU+"").match(bt)||["-",0,0];var dW=+(dY[1]*60)+dM(dY[2]);return dY[0]==="+"?dW:-dW}function D(dU,dV){var dW,dX;if(dV._isUTC){dW=dV.clone();dX=(bQ(dU)||aL(dU)?+dU:+bU(dU))-(+dW);dW._d.setTime(+dW._d+dX);c9.updateOffset(dW,false);return dW}else{return bU(dU).local()}return dV._isUTC?bU(dU).zone(dV._offset||0):bU(dU).local()}function b(dU){return -Math.round(dU._d.getTimezoneOffset()/15)*15}c9.updateOffset=function(){};function ci(dU,dX){var dW=this._offset||0,dV;if(dU!=null){if(typeof dU==="string"){dU=by(dU)}if(Math.abs(dU)<16){dU=dU*60}if(!this._isUTC&&dX){dV=b(this)}this._offset=dU;this._isUTC=true;if(dV!=null){this.add(dV,"m")}if(dW!==dU){if(!dX||this._changeInProgress){n(this,cY(dU-dW,"m"),1,false)}else{if(!this._changeInProgress){this._changeInProgress=true;c9.updateOffset(this,true);this._changeInProgress=null}}}return this}else{return this._isUTC?dW:b(this)}}function az(dU,dV){if(dU!=null){if(typeof dU!=="string"){dU=-dU}this.utcOffset(dU,dV);return this}else{return -this.utcOffset()}}function g(dU){return this.utcOffset(0,dU)}function bn(dU){if(this._isUTC){this.utcOffset(0,dU);this._isUTC=false;if(dU){this.subtract(b(this),"m")}}return this}function bB(){if(this._tzm){this.utcOffset(this._tzm)}else{if(typeof this._i==="string"){this.utcOffset(by(this._i))}}return this}function cd(dU){if(!dU){dU=0}else{dU=bU(dU).utcOffset()}return(this.utcOffset()-dU)%60===0}function ch(){return(this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset())}function c3(){if(this._a){var dU=this._isUTC?I(this._a):bU(this._a);return this.isValid()&&M(this._a,dU.toArray())>0}return false}function a8(){return !this._isUTC}function bM(){return this._isUTC}function a7(){return this._isUTC&&this._offset===0}var aO=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/;var aJ=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;function cY(dW,dZ){var d0=dW,dY=null,dV,dX,dU;if(L(dW)){d0={ms:dW._milliseconds,d:dW._days,M:dW._months}}else{if(typeof dW==="number"){d0={};if(dZ){d0[dZ]=dW}else{d0.milliseconds=dW}}else{if(!!(dY=aO.exec(dW))){dV=(dY[1]==="-")?-1:1;d0={y:0,d:dM(dY[cg])*dV,h:dM(dY[aA])*dV,m:dM(dY[di])*dV,s:dM(dY[cC])*dV,ms:dM(dY[dK])*dV}}else{if(!!(dY=aJ.exec(dW))){dV=(dY[1]==="-")?-1:1;d0={y:bW(dY[2],dV),M:bW(dY[3],dV),d:bW(dY[4],dV),h:bW(dY[5],dV),m:bW(dY[6],dV),s:bW(dY[7],dV),w:bW(dY[8],dV)}}else{if(d0==null){d0={}}else{if(typeof d0==="object"&&("from" in d0||"to" in d0)){dU=aX(bU(d0.from),bU(d0.to));d0={};d0.ms=dU.milliseconds;d0.M=dU.months}}}}}}dX=new af(d0);if(L(dW)&&a9(dW,"_locale")){dX._locale=dW._locale}return dX}cY.fn=af.prototype;function bW(dW,dU){var dV=dW&&parseFloat(dW.replace(",","."));return(isNaN(dV)?0:dV)*dU}function dk(dW,dU){var dV={milliseconds:0,months:0};dV.months=dU.month()-dW.month()+(dU.year()-dW.year())*12;if(dW.clone().add(dV.months,"M").isAfter(dU)){--dV.months}dV.milliseconds=+dU-+(dW.clone().add(dV.months,"M"));return dV}function aX(dW,dU){var dV;dU=D(dU,dW);if(dW.isBefore(dU)){dV=dk(dW,dU)}else{dV=dk(dU,dW);dV.milliseconds=-dV.milliseconds;dV.months=-dV.months}return dV}function bm(dV,dU){return function(dZ,dY){var dX,dW;if(dY!==null&&!isNaN(+dY)){cj(dU,"moment()."+dU+"(period, number) is deprecated. Please use moment()."+dU+"(number, period).");dW=dZ;dZ=dY;dY=dW}dZ=typeof dZ==="string"?+dZ:dZ;dX=cY(dZ,dY);n(this,dX,dV);return this}}function n(dW,dZ,dY,dX){var dV=dZ._milliseconds,d0=dZ._days,dU=dZ._months;dX=dX==null?true:dX;if(dV){dW._d.setTime(+dW._d+dV*dY)}if(d0){N(dW,"Date",ar(dW,"Date")+d0*dY)}if(dU){du(dW,ar(dW,"Month")+dU*dY)}if(dX){c9.updateOffset(dW,d0||dU)}}var X=bm(1,"add");var bP=bm(-1,"subtract");function ak(dY){var dV=dY||bU(),dU=D(dV,this).startOf("day"),dX=this.diff(dU,"days",true),dW=dX<-6?"sameElse":dX<-1?"lastWeek":dX<0?"lastDay":dX<1?"sameDay":dX<2?"nextDay":dX<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(dW,this,bU(dV)))}function cW(){return new bC(this)}function bL(dV,dU){var dW;dU=aa(typeof dU!=="undefined"?dU:"millisecond");if(dU==="millisecond"){dV=bQ(dV)?dV:bU(dV);return +this>+dV}else{dW=bQ(dV)?+dV:+bU(dV);return dW<+this.clone().startOf(dU)}}function ca(dV,dU){var dW;dU=aa(typeof dU!=="undefined"?dU:"millisecond");if(dU==="millisecond"){dV=bQ(dV)?dV:bU(dV);return +this<+dV}else{dW=bQ(dV)?+dV:+bU(dV);return +this.clone().endOf(dU)<dW}}function bK(dW,dV,dU){return this.isAfter(dW,dU)&&this.isBefore(dV,dU)}function H(dV,dU){var dW;dU=aa(dU||"millisecond");if(dU==="millisecond"){dV=bQ(dV)?dV:bU(dV);return +this===+dV}else{dW=+bU(dV);return +(this.clone().startOf(dU))<=dW&&dW<=+(this.clone().endOf(dU))}}function bA(dU){if(dU<0){return Math.ceil(dU)}else{return Math.floor(dU)}}function cs(dX,dW,dU){var dZ=D(dX,this),dY=(dZ.utcOffset()-this.utcOffset())*60000,d0,dV;dW=aa(dW);if(dW==="year"||dW==="month"||dW==="quarter"){dV=cD(this,dZ);if(dW==="quarter"){dV=dV/3}else{if(dW==="year"){dV=dV/12}}}else{d0=this-dZ;dV=dW==="second"?d0/1000:dW==="minute"?d0/60000:dW==="hour"?d0/3600000:dW==="day"?(d0-dY)/86400000:dW==="week"?(d0-dY)/604800000:d0}return dU?dV:bA(dV)}function cD(dV,dU){var dZ=((dU.year()-dV.year())*12)+(dU.month()-dV.month()),dW=dV.clone().add(dZ,"months"),dX,dY;if(dU-dW<0){dX=dV.clone().add(dZ-1,"months");dY=(dU-dW)/(dW-dX)}else{dX=dV.clone().add(dZ+1,"months");dY=(dU-dW)/(dX-dW)}return -(dZ+dY)}c9.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";function G(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function cv(){var dU=this.clone().utc();if(0<dU.year()&&dU.year()<=9999){if("function"===typeof Date.prototype.toISOString){return this.toDate().toISOString()}else{return h(dU,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}}else{return h(dU,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}}function j(dV){var dU=h(this,dV||c9.defaultFormat);return this.localeData().postformat(dU)}function cR(dV,dU){if(!this.isValid()){return this.localeData().invalidDate()}return cY({to:this,from:dV}).locale(this.locale()).humanize(!dU)}function bd(dU){return this.from(bU(),dU)}function aH(dV,dU){if(!this.isValid()){return this.localeData().invalidDate()}return cY({from:this,to:dV}).locale(this.locale()).humanize(!dU)}function aS(dU){return this.to(bU(),dU)}function bZ(dV){var dU;if(dV===undefined){return this._locale._abbr}else{dU=o(dV);if(dU!=null){this._locale=dU}return this}}var da=cI("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(dU){if(dU===undefined){return this.localeData()}else{return this.locale(dU)}});function bJ(){return this._locale}function ds(dU){dU=aa(dU);switch(dU){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(dU==="week"){this.weekday(0)}if(dU==="isoWeek"){this.isoWeekday(1)}if(dU==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this}function cN(dU){dU=aa(dU);if(dU===undefined||dU==="millisecond"){return this}return this.startOf(dU).add(1,(dU==="isoWeek"?"week":dU)).subtract(1,"ms")}function bH(){return +this._d-((this._offset||0)*60000)}function bI(){return Math.floor(+this/1000)}function aC(){return this._offset?new Date(+this):this._d}function K(){var dU=this;return[dU.year(),dU.month(),dU.date(),dU.hour(),dU.minute(),dU.second(),dU.millisecond()]}function cx(){return c(this)}function f(){return cF({},cq(this))}function bf(){return cq(this).overflow}a4(0,["gg",2],0,function(){return this.weekYear()%100});a4(0,["GG",2],0,function(){return this.isoWeekYear()%100});function ah(dV,dU){a4(0,[dV,dV.length],0,dU)}ah("gggg","weekYear");ah("ggggg","weekYear");ah("GGGG","isoWeekYear");ah("GGGGG","isoWeekYear");dJ("weekYear","gg");dJ("isoWeekYear","GG");k("G",dN);k("g",dN);k("GG",cu,dC);k("gg",cu,dC);k("GGGG",co,dz);k("gggg",co,dz);k("GGGGG",cm,dy);k("ggggg",cm,dy);dS(["gggg","ggggg","GGGG","GGGGG"],function(dU,dX,dV,dW){dX[dW.substr(0,2)]=dM(dU)});dS(["gg","GG"],function(dU,dX,dV,dW){dX[dW]=c9.parseTwoDigitYear(dU)});function ao(dU,dW,dV){return dT(bU([dU,11,31+dW-dV]),dW,dV).week}function cK(dU){var dV=dT(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return dU==null?dV:this.add((dU-dV),"y")}function cG(dU){var dV=dT(this,1,4).year;return dU==null?dV:this.add((dU-dV),"y")}function dR(){return ao(this.year(),1,4)}function c7(){var dU=this.localeData()._week;return ao(this.year(),dU.dow,dU.doy)}a4("Q",0,0,"quarter");dJ("quarter","Q");k("Q",dD);b8("Q",function(dU,dV){dV[cz]=(dM(dU)-1)*3});function bS(dU){return dU==null?Math.ceil((this.month()+1)/3):this.month((dU-1)*3+this.month()%3)}a4("D",["DD",2],"Do","date");dJ("date","D");k("D",cu);k("DD",cu,dC);k("Do",function(dV,dU){return dV?dU._ordinalParse:dU._ordinalParseLenient});b8(["D","DD"],cg);b8("Do",function(dU,dV){dV[cg]=dM(dU.match(cu)[0],10)});var J=b2("Date",true);a4("d",0,"do","day");a4("dd",0,0,function(dU){return this.localeData().weekdaysMin(this,dU)});a4("ddd",0,0,function(dU){return this.localeData().weekdaysShort(this,dU)});a4("dddd",0,0,function(dU){return this.localeData().weekdays(this,dU)});a4("e",0,0,"weekday");a4("E",0,0,"isoWeekday");dJ("day","d");dJ("weekday","e");dJ("isoWeekday","E");k("d",cu);k("e",cu);k("E",cu);k("dd",C);k("ddd",C);k("dddd",C);dS(["dd","ddd","dddd"],function(dU,dW,dV){var dX=dV._locale.weekdaysParse(dU);if(dX!=null){dW.d=dX}else{cq(dV).invalidWeekday=dU}});dS(["d","e","E"],function(dU,dX,dV,dW){dX[dW]=dM(dU)});function c6(dV,dU){if(typeof dV==="string"){if(!isNaN(dV)){dV=parseInt(dV,10)}else{dV=dU.weekdaysParse(dV);if(typeof dV!=="number"){return null}}}return dV}var an="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");function bO(dU){return this._weekdays[dU.day()]}var w="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function F(dU){return this._weekdaysShort[dU.day()]}var cV="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function B(dU){return this._weekdaysMin[dU.day()]}function dj(dX){var dU,dW,dV;if(!this._weekdaysParse){this._weekdaysParse=[]}for(dU=0;dU<7;dU++){if(!this._weekdaysParse[dU]){dW=bU([2000,1]).day(dU);dV="^"+this.weekdays(dW,"")+"|^"+this.weekdaysShort(dW,"")+"|^"+this.weekdaysMin(dW,"");this._weekdaysParse[dU]=new RegExp(dV.replace(".",""),"i")}if(this._weekdaysParse[dU].test(dX)){return dU}}}function cX(dV){var dU=this._isUTC?this._d.getUTCDay():this._d.getDay();if(dV!=null){dV=c6(dV,this.localeData());return this.add(dV-dU,"d")}else{return dU}}function aN(dU){var dV=(this.day()+7-this.localeData()._week.dow)%7;return dU==null?dV:this.add(dU-dV,"d")}function bv(dU){return dU==null?this.day()||7:this.day(this.day()%7?dU:dU-7)}a4("H",["HH",2],0,"hour");a4("h",["hh",2],0,function(){return this.hours()%12||12});function r(dU,dV){a4(dU,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),dV)})}r("a",true);r("A",false);dJ("hour","h");function cy(dV,dU){return dU._meridiemParse}k("a",cy);k("A",cy);k("H",cu);k("h",cu);k("HH",cu,dC);k("hh",cu,dC);b8(["H","HH"],aA);b8(["a","A"],function(dU,dW,dV){dV._isPm=dV._locale.isPM(dU);dV._meridiem=dU});b8(["h","hh"],function(dU,dW,dV){dW[aA]=dM(dU);cq(dV).bigHour=true});function bj(dU){return((dU+"").toLowerCase().charAt(0)==="p")}var dr=/[ap]\.?m?\.?/i;function d(dU,dV,dW){if(dU>11){return dW?"pm":"PM"}else{return dW?"am":"AM"}}var cO=b2("Hours",true);a4("m",["mm",2],0,"minute");dJ("minute","m");k("m",cu);k("mm",cu,dC);b8(["m","mm"],di);var dd=b2("Minutes",false);a4("s",["ss",2],0,"second");dJ("second","s");k("s",cu);k("ss",cu,dC);b8(["s","ss"],cC);var cp=b2("Seconds",false);a4("S",0,0,function(){return ~~(this.millisecond()/100)});a4(0,["SS",2],0,function(){return ~~(this.millisecond()/10)});function cc(dU){a4(0,[dU,3],0,"millisecond")}cc("SSS");cc("SSSS");dJ("millisecond","ms");k("S",cr,dD);k("SS",cr,dC);k("SSS",cr,dA);k("SSSS",aF);b8(["S","SS","SSS","SSSS"],function(dU,dV){dV[dK]=dM(("0."+dU)*1000)});var at=b2("Milliseconds",false);a4("z",0,0,"zoneAbbr");a4("zz",0,0,"zoneName");function Q(){return this._isUTC?"UTC":""}function b7(){return this._isUTC?"Coordinated Universal Time":""}var dP=bC.prototype;dP.add=X;dP.calendar=ak;dP.clone=cW;dP.diff=cs;dP.endOf=cN;dP.format=j;dP.from=cR;dP.fromNow=bd;dP.to=aH;dP.toNow=aS;dP.get=bq;dP.invalidAt=bf;dP.isAfter=bL;dP.isBefore=ca;dP.isBetween=bK;dP.isSame=H;dP.isValid=cx;dP.lang=da;dP.locale=bZ;dP.localeData=bJ;dP.max=dH;dP.min=aK;dP.parsingFlags=f;dP.set=bq;dP.startOf=ds;dP.subtract=bP;dP.toArray=K;dP.toDate=aC;dP.toISOString=cv;dP.toJSON=cv;dP.toString=G;dP.unix=bI;dP.valueOf=bH;dP.year=V;dP.isLeapYear=cS;dP.weekYear=cK;dP.isoWeekYear=cG;dP.quarter=dP.quarters=bS;dP.month=q;dP.daysInMonth=aU;dP.week=dP.weeks=bk;dP.isoWeek=dP.isoWeeks=dx;dP.weeksInYear=c7;dP.isoWeeksInYear=dR;dP.date=J;dP.day=dP.days=cX;dP.weekday=aN;dP.isoWeekday=bv;dP.dayOfYear=bN;dP.hour=dP.hours=cO;dP.minute=dP.minutes=dd;dP.second=dP.seconds=cp;dP.millisecond=dP.milliseconds=at;dP.utcOffset=ci;dP.utc=g;dP.local=bn;dP.parseZone=bB;dP.hasAlignedHourOffset=cd;dP.isDST=ch;dP.isDSTShifted=c3;dP.isLocal=a8;dP.isUtcOffset=bM;dP.isUtc=a7;dP.isUTC=a7;dP.zoneAbbr=Q;dP.zoneName=b7;dP.dates=cI("dates accessor is deprecated. Use date instead.",J);dP.months=cI("months accessor is deprecated. Use month instead",q);dP.years=cI("years accessor is deprecated. Use year instead",V);dP.zone=cI("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",az);var aR=dP;function bE(dU){return bU(dU*1000)}function a0(){return bU.apply(null,arguments).parseZone()}var aE={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function bu(dW,dX,dV){var dU=this._calendar[dW];return typeof dU==="function"?dU.call(dX,dV):dU}var au={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"};function cb(dV){var dU=this._longDateFormat[dV];if(!dU&&this._longDateFormat[dV.toUpperCase()]){dU=this._longDateFormat[dV.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(dW){return dW.slice(1)});this._longDateFormat[dV]=dU}return dU}var aj="Invalid date";function cP(){return this._invalidDate}var bg="%d";var dq=/\d{1,2}/;function ay(dU){return this._ordinal.replace("%d",dU)}function v(dU){return dU}var c5={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function df(dX,dW,dV,dY){var dU=this._relativeTime[dV];return(typeof dU==="function")?dU(dX,dW,dV,dY):dU.replace(/%d/i,dX)}function c4(dW,dU){var dV=this._relativeTime[dW>0?"future":"past"];return typeof dV==="function"?dV(dU):dV.replace(/%s/i,dU)}function dL(dU){var dW,dV;for(dV in dU){dW=dU[dV];if(typeof dW==="function"){this[dV]=dW}else{this["_"+dV]=dW}}this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+(/\d{1,2}/).source)}var bp=aI.prototype;bp._calendar=aE;bp.calendar=bu;bp._longDateFormat=au;bp.longDateFormat=cb;bp._invalidDate=aj;bp.invalidDate=cP;bp._ordinal=bg;bp.ordinal=ay;bp._ordinalParse=dq;bp.preparse=v;bp.postformat=v;bp._relativeTime=c5;bp.relativeTime=df;bp.pastFuture=c4;bp.set=dL;bp.months=cw;bp._months=dQ;bp.monthsShort=cL;bp._monthsShort=bx;bp.monthsParse=bG;bp.week=c1;bp._week=bw;bp.firstDayOfYear=u;bp.firstDayOfWeek=aM;bp.weekdays=bO;bp._weekdays=an;bp.weekdaysMin=B;bp._weekdaysMin=cV;bp.weekdaysShort=F;bp._weekdaysShort=w;bp.weekdaysParse=dj;bp.isPM=bj;bp._meridiemParse=dr;bp.meridiem=d;function bh(dY,dV,dX,dZ){var dU=o();var dW=I().set(dZ,dV);return dU[dX](dW,dY)}function aP(dZ,dV,dY,dX,d0){if(typeof dZ==="number"){dV=dZ;dZ=undefined}dZ=dZ||"";if(dV!=null){return bh(dZ,dV,dY,d0)}var dW;var dU=[];for(dW=0;dW<dX;dW++){dU[dW]=bh(dZ,dW,dY,d0)}return dU}function ax(dV,dU){return aP(dV,dU,"months",12,"month")}function bz(dV,dU){return aP(dV,dU,"monthsShort",12,"month")}function c8(dV,dU){return aP(dV,dU,"weekdays",7,"day")}function dl(dV,dU){return aP(dV,dU,"weekdaysShort",7,"day")}function c0(dV,dU){return aP(dV,dU,"weekdaysMin",7,"day")}dp("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(dW){var dU=dW%10,dV=(dM(dW%100/10)===1)?"th":(dU===1)?"st":(dU===2)?"nd":(dU===3)?"rd":"th";return dW+dV}});c9.lang=cI("moment.lang is deprecated. Use moment.locale instead.",dp);c9.langData=cI("moment.langData is deprecated. Use moment.localeData instead.",o);var i=Math.abs;function bD(){var dU=this._data;this._milliseconds=i(this._milliseconds);this._days=i(this._days);this._months=i(this._months);dU.milliseconds=i(dU.milliseconds);dU.seconds=i(dU.seconds);dU.minutes=i(dU.minutes);dU.hours=i(dU.hours);dU.months=i(dU.months);dU.years=i(dU.years);return this}function cQ(dY,dV,dW,dX){var dU=cY(dV,dW);dY._milliseconds+=dX*dU._milliseconds;dY._days+=dX*dU._days;dY._months+=dX*dU._months;return dY._bubble()}function bR(dU,dV){return cQ(this,dU,dV,1)}function b4(dU,dV){return cQ(this,dU,dV,-1)}function bX(){var dW=this._milliseconds;var d1=this._days;var dU=this._months;var dZ=this._data;var d0,dY,dV,dX=0;dZ.milliseconds=dW%1000;d0=bA(dW/1000);dZ.seconds=d0%60;dY=bA(d0/60);dZ.minutes=dY%60;dV=bA(dY/60);dZ.hours=dV%24;d1+=bA(dV/24);dX=bA(dE(d1));d1-=bA(aq(dX));dU+=bA(d1/30);d1%=30;dX+=bA(dU/12);dU%=12;dZ.days=d1;dZ.months=dU;dZ.years=dX;return this}function dE(dU){return dU*400/146097}function aq(dU){return dU*146097/400}function dc(dV){var dX;var dU;var dW=this._milliseconds;dV=aa(dV);if(dV==="month"||dV==="year"){dX=this._days+dW/86400000;dU=this._months+dE(dX)*12;return dV==="month"?dU:dU/12}else{dX=this._days+Math.round(aq(this._months/12));switch(dV){case"week":return dX/7+dW/604800000;case"day":return dX+dW/86400000;case"hour":return dX*24+dW/3600000;case"minute":return dX*1440+dW/60000;case"second":return dX*86400+dW/1000;case"millisecond":return Math.floor(dX*86400000)+dW;default:throw new Error("Unknown unit "+dV)}}}function aZ(){return(this._milliseconds+this._days*86400000+(this._months%12)*2592000000+dM(this._months/12)*31536000000)}function dF(dU){return function(){return this.as(dU)}}var t=dF("ms");var A=dF("s");var a2=dF("m");var E=dF("h");var cZ=dF("d");var bi=dF("w");var W=dF("M");var aQ=dF("y");function ag(dU){dU=aa(dU);return this[dU+"s"]()}function cU(dU){return function(){return this._data[dU]}}var aW=cU("milliseconds");var ae=cU("seconds");var bb=cU("minutes");var b6=cU("hours");var Y=cU("days");var db=cU("months");var de=cU("years");function dI(){return bA(this.days()/7)}var U=Math.round;var be={s:45,m:45,h:22,d:26,M:11};function dv(dV,dX,dW,dY,dU){return dU.relativeTime(dX||1,!!dW,dV,dY)}function av(dY,dV,d2){var dW=cY(dY).abs();var d3=U(dW.as("s"));var dX=U(dW.as("m"));var d1=U(dW.as("h"));var d4=U(dW.as("d"));var dU=U(dW.as("M"));var dZ=U(dW.as("y"));var d0=d3<be.s&&["s",d3]||dX===1&&["m"]||dX<be.m&&["mm",dX]||d1===1&&["h"]||d1<be.h&&["hh",d1]||d4===1&&["d"]||d4<be.d&&["dd",d4]||dU===1&&["M"]||dU<be.M&&["MM",dU]||dZ===1&&["y"]||["yy",dZ];d0[2]=dV;d0[3]=+dY>0;d0[4]=d2;return dv.apply(null,d0)}function al(dU,dV){if(be[dU]===undefined){return false}if(dV===undefined){return be[dU]}be[dU]=dV;return true}function b1(dW){var dU=this.localeData();var dV=av(this,!dW,dU);if(dW){dV=dU.pastFuture(+this,dV)}return dU.postformat(dV)}var b9=Math.abs;function P(){var dZ=b9(this.years());var d0=b9(this.months());var dY=b9(this.days());var dW=b9(this.hours());var dU=b9(this.minutes());var dV=b9(this.seconds()+this.milliseconds()/1000);var dX=this.asSeconds();if(!dX){return"P0D"}return(dX<0?"-":"")+"P"+(dZ?dZ+"Y":"")+(d0?d0+"M":"")+(dY?dY+"D":"")+((dW||dU||dV)?"T":"")+(dW?dW+"H":"")+(dU?dU+"M":"")+(dV?dV+"S":"")}var ac=af.prototype;ac.abs=bD;ac.add=bR;ac.subtract=b4;ac.as=dc;ac.asMilliseconds=t;ac.asSeconds=A;ac.asMinutes=a2;ac.asHours=E;ac.asDays=cZ;ac.asWeeks=bi;ac.asMonths=W;ac.asYears=aQ;ac.valueOf=aZ;ac._bubble=bX;ac.get=ag;ac.milliseconds=aW;ac.seconds=ae;ac.minutes=bb;ac.hours=b6;ac.days=Y;ac.weeks=dI;ac.months=db;ac.years=de;ac.humanize=b1;ac.toISOString=P;ac.toString=P;ac.toJSON=P;ac.locale=bZ;ac.localeData=bJ;ac.toIsoString=cI("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",P);ac.lang=da;a4("X",0,0,"unix");a4("x",0,0,"valueOf");k("x",dN);k("X",S);b8("X",function(dU,dW,dV){dV._d=new Date(parseFloat(dU,10)*1000)});b8("x",function(dU,dW,dV){dV._d=new Date(dM(dU))});c9.version="2.10.3";aY(bU);c9.fn=aR;c9.min=cB;c9.max=aV;c9.utc=I;c9.unix=bE;c9.months=ax;c9.isDate=aL;c9.locale=dp;c9.invalid=bV;c9.duration=cY;c9.isMoment=bQ;c9.weekdays=c8;c9.parseZone=a0;c9.localeData=o;c9.isDuration=L;c9.monthsShort=bz;c9.weekdaysMin=c0;c9.defineLocale=l;c9.weekdaysShort=dl;c9.normalizeUnits=aa;c9.relativeTimeThreshold=al;var ce=c9;return ce}));(function(c,b){typeof exports==="object"&&typeof module!=="undefined"?b(require("../moment")):typeof define==="function"&&define.amd?define(["moment"],b):b(c.moment)}(this,function(g){function e(k,j){var i=k.split("_");return j%10===1&&j%100!==11?i[0]:(j%10>=2&&j%10<=4&&(j%100<10||j%100>=20)?i[1]:i[2])}function h(k,j,i){var l={mm:j?"__":"__",hh:"__",dd:"__",MM:"__",yy:"__"};if(i==="m"){return j?"":""}else{return k+" "+e(l[i],+k)}}function f(j,l){var i={nominative:"___________".split("_"),accusative:"___________".split("_")},k=(/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/).test(l)?"accusative":"nominative";return i[k][j.month()]}function d(i,l){var k={nominative:"___________".split("_"),accusative:"___________".split("_")},j=(/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/).test(l)?"accusative":"nominative";return k[j][i.month()]}function c(i,l){var j={nominative:"______".split("_"),accusative:"______".split("_")},k=(/\[ ?[] ?(?:||)? ?\] ?dddd/).test(l)?"accusative":"nominative";return j[k][i.day()]}var b=g.defineLocale("ru",{months:f,monthsShort:d,weekdays:c,weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),monthsParse:[/^/i,/^/i,/^/i,/^/i,/^[|]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., LT",LLLL:"dddd, D MMMM YYYY ., LT"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(){return this.day()===2?"[] dddd [] LT":"[] dddd [] LT"},lastWeek:function(i){if(i.week()!==this.week()){switch(this.day()){case 0:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT";case 3:case 5:case 6:return"[ ] dddd [] LT"}}else{if(this.day()===2){return"[] dddd [] LT"}else{return"[] dddd [] LT"}}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:h,mm:h,h:"",hh:h,d:"",dd:h,M:"",MM:h,y:"",yy:h},meridiemParse:/|||/i,isPM:function(i){return/^(|)$/.test(i)},meridiem:function(i,k,j){if(i<4){return""}else{if(i<12){return""}else{if(i<17){return""}else{return""}}}},ordinalParse:/\d{1,2}-(||)/,ordinal:function(i,j){switch(j){case"M":case"d":case"DDD":return i+"-";case"D":return i+"-";case"w":case"W":return i+"-";default:return i}},week:{dow:1,doy:7}});return b}));
/*! version : 4.14.30
 =========================================================
 bootstrap-datetimejs
 https://github.com/Eonasdan/bootstrap-datetimepicker
 Copyright (c) 2015 Jonathan Peterson
 =========================================================
 */
;!function(b){if("function"==typeof define&&define.amd){define(["jquery","moment"],b)}else{if("object"==typeof exports){b(require("jquery"),require("moment"))}else{if("undefined"==typeof jQuery){throw"bootstrap-datetimepicker requires jQuery to be loaded first"}if("undefined"==typeof moment){throw"bootstrap-datetimepicker requires Moment.js to be loaded first"}b(jQuery,moment)}}}(function(e,d){if(!d){throw new Error("bootstrap-datetimepicker requires Moment.js to be loaded first")}var f=function(bd,bc){var bb,a9,a8,a7,a6,a5={},a4=d().startOf("d"),a3=a4.clone(),a2=!0,a1=!1,a0=!1,aZ=0,aY=[{clsName:"days",navFnc:"M",navStep:1},{clsName:"months",navFnc:"y",navStep:1},{clsName:"years",navFnc:"y",navStep:10},{clsName:"decades",navFnc:"y",navStep:100}],aX=["days","months","years","decades"],aW=["top","bottom","auto"],aV=["left","right","auto"],aU=["default","top","bottom"],aT={up:38,38:"up",down:40,40:"down",left:37,37:"left",right:39,39:"right",tab:9,9:"tab",escape:27,27:"escape",enter:13,13:"enter",pageUp:33,33:"pageUp",pageDown:34,34:"pageDown",shift:16,16:"shift",control:17,17:"control",space:32,32:"space",t:84,84:"t","delete":46,46:"delete"},aS={},aR=function(c){if("string"!=typeof c||c.length>1){throw new TypeError("isEnabled expects a single character string parameter")}switch(c){case"y":return -1!==a8.indexOf("Y");case"M":return -1!==a8.indexOf("M");case"d":return -1!==a8.toLowerCase().indexOf("d");case"h":case"H":return -1!==a8.toLowerCase().indexOf("h");case"m":return -1!==a8.indexOf("m");case"s":return -1!==a8.indexOf("s");default:return !1}},aP=function(){return aR("h")||aR("m")||aR("s")},aO=function(){return aR("y")||aR("M")||aR("d")},aE=function(){var g=e("<thead>").append(e("<tr>").append(e("<th>").addClass("prev").attr("data-action","previous").append(e("<span>").addClass(bc.icons.previous))).append(e("<th>").addClass("picker-switch").attr("data-action","pickerSwitch").attr("colspan",bc.calendarWeeks?"6":"5")).append(e("<th>").addClass("next").attr("data-action","next").append(e("<span>").addClass(bc.icons.next)))),h=e("<tbody>").append(e("<tr>").append(e("<td>").attr("colspan",bc.calendarWeeks?"8":"7")));return[e("<div>").addClass("datepicker-days").append(e("<table>").addClass("table-condensed").append(g).append(e("<tbody>"))),e("<div>").addClass("datepicker-months").append(e("<table>").addClass("table-condensed").append(g.clone()).append(h.clone())),e("<div>").addClass("datepicker-years").append(e("<table>").addClass("table-condensed").append(g.clone()).append(h.clone())),e("<div>").addClass("datepicker-decades").append(e("<table>").addClass("table-condensed").append(g.clone()).append(h.clone()))]},aD=function(){var g=e("<tr>"),i=e("<tr>"),h=e("<tr>");return aR("h")&&(g.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:"Increment Hour"}).addClass("btn").attr("data-action","incrementHours").append(e("<span>").addClass(bc.icons.up)))),i.append(e("<td>").append(e("<span>").addClass("timepicker-hour").attr({"data-time-component":"hours",title:"Pick Hour"}).attr("data-action","showHours"))),h.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:"Decrement Hour"}).addClass("btn").attr("data-action","decrementHours").append(e("<span>").addClass(bc.icons.down))))),aR("m")&&(aR("h")&&(g.append(e("<td>").addClass("separator")),i.append(e("<td>").addClass("separator").html(":")),h.append(e("<td>").addClass("separator"))),g.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:"Increment Minute"}).addClass("btn").attr("data-action","incrementMinutes").append(e("<span>").addClass(bc.icons.up)))),i.append(e("<td>").append(e("<span>").addClass("timepicker-minute").attr({"data-time-component":"minutes",title:"Pick Minute"}).attr("data-action","showMinutes"))),h.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:"Decrement Minute"}).addClass("btn").attr("data-action","decrementMinutes").append(e("<span>").addClass(bc.icons.down))))),aR("s")&&(aR("m")&&(g.append(e("<td>").addClass("separator")),i.append(e("<td>").addClass("separator").html(":")),h.append(e("<td>").addClass("separator"))),g.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:"Increment Second"}).addClass("btn").attr("data-action","incrementSeconds").append(e("<span>").addClass(bc.icons.up)))),i.append(e("<td>").append(e("<span>").addClass("timepicker-second").attr({"data-time-component":"seconds",title:"Pick Second"}).attr("data-action","showSeconds"))),h.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:"Decrement Second"}).addClass("btn").attr("data-action","decrementSeconds").append(e("<span>").addClass(bc.icons.down))))),a9||(g.append(e("<td>").addClass("separator")),i.append(e("<td>").append(e("<button>").addClass("btn btn-primary").attr({"data-action":"togglePeriod",tabindex:"-1",title:"Toggle Period"}))),h.append(e("<td>").addClass("separator"))),e("<div>").addClass("timepicker-picker").append(e("<table>").addClass("table-condensed").append([g,i,h]))},aC=function(){var g=e("<div>").addClass("timepicker-hours").append(e("<table>").addClass("table-condensed")),j=e("<div>").addClass("timepicker-minutes").append(e("<table>").addClass("table-condensed")),i=e("<div>").addClass("timepicker-seconds").append(e("<table>").addClass("table-condensed")),h=[aD()];return aR("h")&&h.push(g),aR("m")&&h.push(j),aR("s")&&h.push(i),h},aB=function(){var c=[];return bc.showTodayButton&&c.push(e("<td>").append(e("<a>").attr({"data-action":"today",title:"Go to today"}).append(e("<span>").addClass(bc.icons.today)))),!bc.sideBySide&&aO()&&aP()&&c.push(e("<td>").append(e("<a>").attr({"data-action":"togglePicker",title:"Select Time"}).append(e("<span>").addClass(bc.icons.time)))),bc.showClear&&c.push(e("<td>").append(e("<a>").attr({"data-action":"clear",title:"Clear selection"}).append(e("<span>").addClass(bc.icons.clear)))),bc.showClose&&c.push(e("<td>").append(e("<a>").attr({"data-action":"close",title:"Close the picker"}).append(e("<span>").addClass(bc.icons.close)))),e("<table>").addClass("table-condensed").append(e("<tbody>").append(e("<tr>").append(c)))},aA=function(){var i=e("<div>").addClass("bootstrap-datetimepicker-widget dropdown-menu"),m=e("<div>").addClass("datepicker").append(aE()),l=e("<div>").addClass("timepicker").append(aC()),k=e("<ul>").addClass("list-unstyled"),j=e("<li>").addClass("picker-switch"+(bc.collapse?" accordion-toggle":"")).append(aB());return bc.inline&&i.removeClass("dropdown-menu"),a9&&i.addClass("usetwentyfour"),aR("s")&&!a9&&i.addClass("wider"),bc.sideBySide&&aO()&&aP()?(i.addClass("timepicker-sbs"),i.append(e("<div>").addClass("row").append(m.addClass("col-sm-6")).append(l.addClass("col-sm-6"))),i.append(j),i):("top"===bc.toolbarPlacement&&k.append(j),aO()&&k.append(e("<li>").addClass(bc.collapse&&aP()?"collapse in":"").append(m)),"default"===bc.toolbarPlacement&&k.append(j),aP()&&k.append(e("<li>").addClass(bc.collapse&&aO()?"collapse":"").append(l)),"bottom"===bc.toolbarPlacement&&k.append(j),i.append(k))},az=function(){var c,g={};return c=bd.is("input")||bc.inline?bd.data():bd.find("input").data(),c.dateOptions&&c.dateOptions instanceof Object&&(g=e.extend(!0,g,c.dateOptions)),e.each(bc,function(h){var i="date"+h.charAt(0).toUpperCase()+h.slice(1);void 0!==c[i]&&(g[h]=c[i])}),g},ay=function(){var c,l=(a1||bd).position(),k=(a1||bd).offset(),j=bc.widgetPositioning.vertical,i=bc.widgetPositioning.horizontal;if(bc.widgetParent){c=bc.widgetParent.append(a0)}else{if(bd.is("input")){c=bd.after(a0).parent()}else{if(bc.inline){return void (c=bd.append(a0))}c=bd,bd.children().first().after(a0)}}if("auto"===j&&(j=k.top+1.5*a0.height()>=e(window).height()+e(window).scrollTop()&&a0.height()+bd.outerHeight()<k.top?"top":"bottom"),"auto"===i&&(i=c.width()<k.left+a0.outerWidth()/2&&k.left+a0.outerWidth()>e(window).width()?"right":"left"),"top"===j?a0.addClass("top").removeClass("bottom"):a0.addClass("bottom").removeClass("top"),"right"===i?a0.addClass("pull-right"):a0.removeClass("pull-right"),"relative"!==c.css("position")&&(c=c.parents().filter(function(){return"relative"===e(this).css("position")}).first()),0===c.length){throw new Error("datetimepicker component should be placed within a relative positioned container")}a0.css({top:"top"===j?"auto":l.top+bd.outerHeight(),bottom:"top"===j?l.top+bd.outerHeight():"auto",left:"left"===i?c===bd?0:l.left:"auto",right:"left"===i?"auto":c.outerWidth()-bd.outerWidth()-(c===bd?0:l.left)})},ax=function(c){"dp.change"===c.type&&(c.date&&c.date.isSame(c.oldDate)||!c.date&&!c.oldDate)||bd.trigger(c)},aw=function(c){"y"===c&&(c="YYYY"),ax({type:"dp.update",change:c,viewDate:a3.clone()})},av=function(c){a0&&(c&&(a6=Math.max(aZ,Math.min(3,a6+c))),a0.find(".datepicker > div").hide().filter(".datepicker-"+aY[a6].clsName).show())},au=function(){var g=e("<tr>"),h=a3.clone().startOf("w").startOf("d");for(bc.calendarWeeks===!0&&g.append(e("<th>").addClass("cw").text("#"));h.isBefore(a3.clone().endOf("w"));){g.append(e("<th>").addClass("dow").text(h.format("dd"))),h.add(1,"d")}a0.find(".datepicker-days thead").append(g)},at=function(c){return bc.disabledDates[c.format("YYYY-MM-DD")]===!0},ar=function(c){return bc.enabledDates[c.format("YYYY-MM-DD")]===!0},aq=function(c){return bc.disabledHours[c.format("H")]===!0},ap=function(c){return bc.enabledHours[c.format("H")]===!0},ao=function(g,i){if(!g.isValid()){return !1}if(bc.disabledDates&&"d"===i&&at(g)){return !1}if(bc.enabledDates&&"d"===i&&!ar(g)){return !1}if(bc.minDate&&g.isBefore(bc.minDate,i)){return !1}if(bc.maxDate&&g.isAfter(bc.maxDate,i)){return !1}if(bc.daysOfWeekDisabled&&"d"===i&&-1!==bc.daysOfWeekDisabled.indexOf(g.day())){return !1}if(bc.disabledHours&&("h"===i||"m"===i||"s"===i)&&aq(g)){return !1}if(bc.enabledHours&&("h"===i||"m"===i||"s"===i)&&!ap(g)){return !1}if(bc.disabledTimeIntervals&&("h"===i||"m"===i||"s"===i)){var h=!1;if(e.each(bc.disabledTimeIntervals,function(){return g.isBetween(this[0],this[1])?(h=!0,!1):void 0}),h){return !1}}return !0},an=function(){for(var g=[],h=a3.clone().startOf("y").startOf("d");h.isSame(a3,"y");){g.push(e("<span>").attr("data-action","selectMonth").addClass("month").text(h.format("MMM"))),h.add(1,"M")}a0.find(".datepicker-months td").empty().append(g)},am=function(){var g=a0.find(".datepicker-months"),i=g.find("th"),h=g.find("tbody").find("span");i.eq(0).find("span").attr("title","Previous Year"),i.eq(1).attr("title","Select Year"),i.eq(2).find("span").attr("title","Next Year"),g.find(".disabled").removeClass("disabled"),ao(a3.clone().subtract(1,"y"),"y")||i.eq(0).addClass("disabled"),i.eq(1).text(a3.year()),ao(a3.clone().add(1,"y"),"y")||i.eq(2).addClass("disabled"),h.removeClass("active"),a4.isSame(a3,"y")&&!a2&&h.eq(a4.month()).addClass("active"),h.each(function(c){ao(a3.clone().month(c),"M")||e(this).addClass("disabled")})},al=function(){var h=a0.find(".datepicker-years"),g=h.find("th"),k=a3.clone().subtract(5,"y"),j=a3.clone().add(6,"y"),i="";for(g.eq(0).find("span").attr("title","Previous Decade"),g.eq(1).attr("title","Select Decade"),g.eq(2).find("span").attr("title","Next Decade"),h.find(".disabled").removeClass("disabled"),bc.minDate&&bc.minDate.isAfter(k,"y")&&g.eq(0).addClass("disabled"),g.eq(1).text(k.year()+"-"+j.year()),bc.maxDate&&bc.maxDate.isBefore(j,"y")&&g.eq(2).addClass("disabled");!k.isAfter(j,"y");){i+='<span data-action="selectYear" class="year'+(k.isSame(a4,"y")&&!a2?" active":"")+(ao(k,"y")?"":" disabled")+'">'+k.year()+"</span>",k.add(1,"y")}h.find("td").html(i)},ak=function(){var h=a0.find(".datepicker-decades"),l=h.find("th"),k=d(a3.isBefore(d({y:1999}))?{y:1899}:{y:1999}),j=k.clone().add(100,"y"),i="";for(l.eq(0).find("span").attr("title","Previous Century"),l.eq(2).find("span").attr("title","Next Century"),h.find(".disabled").removeClass("disabled"),(k.isSame(d({y:1900}))||bc.minDate&&bc.minDate.isAfter(k,"y"))&&l.eq(0).addClass("disabled"),l.eq(1).text(k.year()+"-"+j.year()),(k.isSame(d({y:2000}))||bc.maxDate&&bc.maxDate.isBefore(j,"y"))&&l.eq(2).addClass("disabled");!k.isAfter(j,"y");){i+='<span data-action="selectDecade" class="decade'+(k.isSame(a4,"y")?" active":"")+(ao(k,"y")?"":" disabled")+'" data-selection="'+(k.year()+6)+'">'+(k.year()+1)+" - "+(k.year()+12)+"</span>",k.add(12,"y")}i+="<span></span><span></span><span></span>",h.find("td").html(i)},aj=function(){var r,q,o,n,m=a0.find(".datepicker-days"),l=m.find("th"),k=[];if(aO()){for(l.eq(0).find("span").attr("title","Previous Month"),l.eq(1).attr("title","Select Month"),l.eq(2).find("span").attr("title","Next Month"),m.find(".disabled").removeClass("disabled"),l.eq(1).text(a3.format(bc.dayViewHeaderFormat)),ao(a3.clone().subtract(1,"M"),"M")||l.eq(0).addClass("disabled"),ao(a3.clone().add(1,"M"),"M")||l.eq(2).addClass("disabled"),r=a3.clone().startOf("M").startOf("w").startOf("d"),n=0;42>n;n++){0===r.weekday()&&(q=e("<tr>"),bc.calendarWeeks&&q.append('<td class="cw">'+r.week()+"</td>"),k.push(q)),o="",r.isBefore(a3,"M")&&(o+=" old"),r.isAfter(a3,"M")&&(o+=" new"),r.isSame(a4,"d")&&!a2&&(o+=" active"),ao(r,"d")||(o+=" disabled"),r.isSame(d(),"d")&&(o+=" today"),(0===r.day()||6===r.day())&&(o+=" weekend"),q.append('<td data-action="selectDay" data-day="'+r.format("L")+'" class="day'+o+'">'+r.date()+"</td>"),r.add(1,"d")}m.find("tbody").empty().append(k),am(),al(),ak()}},ai=function(){var g=a0.find(".timepicker-hours table"),j=a3.clone().startOf("d"),i=[],h=e("<tr>");for(a3.hour()>11&&!a9&&j.hour(12);j.isSame(a3,"d")&&(a9||a3.hour()<12&&j.hour()<12||a3.hour()>11);){j.hour()%4===0&&(h=e("<tr>"),i.push(h)),h.append('<td data-action="selectHour" class="hour'+(ao(j,"h")?"":" disabled")+'">'+j.format(a9?"HH":"hh")+"</td>"),j.add(1,"h")}g.empty().append(i)},ah=function(){for(var h=a0.find(".timepicker-minutes table"),l=a3.clone().startOf("h"),k=[],j=e("<tr>"),i=1===bc.stepping?5:bc.stepping;a3.isSame(l,"h");){l.minute()%(4*i)===0&&(j=e("<tr>"),k.push(j)),j.append('<td data-action="selectMinute" class="minute'+(ao(l,"m")?"":" disabled")+'">'+l.format("mm")+"</td>"),l.add(i,"m")}h.empty().append(k)},af=function(){for(var g=a0.find(".timepicker-seconds table"),j=a3.clone().startOf("m"),i=[],h=e("<tr>");a3.isSame(j,"m");){j.second()%20===0&&(h=e("<tr>"),i.push(h)),h.append('<td data-action="selectSecond" class="second'+(ao(j,"s")?"":" disabled")+'">'+j.format("ss")+"</td>"),j.add(5,"s")}g.empty().append(i)},ae=function(){var h,g,i=a0.find(".timepicker span[data-time-component]");a9||(h=a0.find(".timepicker [data-action=togglePeriod]"),g=a4.clone().add(a4.hours()>=12?-12:12,"h"),h.text(a4.format("A")),ao(g,"h")?h.removeClass("disabled"):h.addClass("disabled")),i.filter("[data-time-component=hours]").text(a4.format(a9?"HH":"hh")),i.filter("[data-time-component=minutes]").text(a4.format("mm")),i.filter("[data-time-component=seconds]").text(a4.format("ss")),ai(),ah(),af()},ac=function(){a0&&(aj(),ae())},aK=function(g){var c=a2?null:a4;return g?(g=g.clone().locale(bc.locale),1!==bc.stepping&&g.minutes(Math.round(g.minutes()/bc.stepping)*bc.stepping%60).seconds(0),void (ao(g)?(a4=g,a3=a4.clone(),bb.val(a4.format(a8)),bd.data("date",a4.format(a8)),a2=!1,ac(),ax({type:"dp.change",date:a4.clone(),oldDate:c})):(bc.keepInvalid||bb.val(a2?"":a4.format(a8)),ax({type:"dp.error",date:g})))):(a2=!0,bb.val(""),bd.data("date",""),ax({type:"dp.change",date:!1,oldDate:c}),void ac())},bf=function(){var c=!1;return a0?(a0.find(".collapse").each(function(){var g=e(this).data("collapse");return g&&g.transitioning?(c=!0,!1):!0}),c?a5:(a1&&a1.hasClass("btn")&&a1.toggleClass("active"),a0.hide(),e(window).off("resize",ay),a0.off("click","[data-action]"),a0.off("mousedown",!1),a0.remove(),a0=!1,ax({type:"dp.hide",date:a4.clone()}),a5)):a5},aF=function(){aK(null)},be={next:function(){var c=aY[a6].navFnc;a3.add(aY[a6].navStep,c),aj(),aw(c)},previous:function(){var c=aY[a6].navFnc;a3.subtract(aY[a6].navStep,c),aj(),aw(c)},pickerSwitch:function(){av(1)},selectMonth:function(g){var h=e(g.target).closest("tbody").find("span").index(e(g.target));a3.month(h),a6===aZ?(aK(a4.clone().year(a3.year()).month(a3.month())),bc.inline||bf()):(av(-1),aj()),aw("M")},selectYear:function(g){var h=parseInt(e(g.target).text(),10)||0;a3.year(h),a6===aZ?(aK(a4.clone().year(a3.year())),bc.inline||bf()):(av(-1),aj()),aw("YYYY")},selectDecade:function(g){var h=parseInt(e(g.target).data("selection"),10)||0;a3.year(h),a6===aZ?(aK(a4.clone().year(a3.year())),bc.inline||bf()):(av(-1),aj()),aw("YYYY")},selectDay:function(g){var h=a3.clone();e(g.target).is(".old")&&h.subtract(1,"M"),e(g.target).is(".new")&&h.add(1,"M"),aK(h.date(parseInt(e(g.target).text(),10))),aP()||bc.keepOpen||bc.inline||bf()},incrementHours:function(){var c=a4.clone().add(1,"h");ao(c,"h")&&aK(c)},incrementMinutes:function(){var c=a4.clone().add(bc.stepping,"m");ao(c,"m")&&aK(c)},incrementSeconds:function(){var c=a4.clone().add(1,"s");ao(c,"s")&&aK(c)},decrementHours:function(){var c=a4.clone().subtract(1,"h");ao(c,"h")&&aK(c)},decrementMinutes:function(){var c=a4.clone().subtract(bc.stepping,"m");ao(c,"m")&&aK(c)},decrementSeconds:function(){var c=a4.clone().subtract(1,"s");ao(c,"s")&&aK(c)},togglePeriod:function(){aK(a4.clone().add(a4.hours()>=12?-12:12,"h"))},togglePicker:function(i){var n,m=e(i.target),l=m.closest("ul"),k=l.find(".in"),j=l.find(".collapse:not(.in)");if(k&&k.length){if(n=k.data("collapse"),n&&n.transitioning){return}k.collapse?(k.collapse("hide"),j.collapse("show")):(k.removeClass("in"),j.addClass("in")),m.is("span")?m.toggleClass(bc.icons.time+" "+bc.icons.date):m.find("span").toggleClass(bc.icons.time+" "+bc.icons.date)}},showPicker:function(){a0.find(".timepicker > div:not(.timepicker-picker)").hide(),a0.find(".timepicker .timepicker-picker").show()},showHours:function(){a0.find(".timepicker .timepicker-picker").hide(),a0.find(".timepicker .timepicker-hours").show()},showMinutes:function(){a0.find(".timepicker .timepicker-picker").hide(),a0.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){a0.find(".timepicker .timepicker-picker").hide(),a0.find(".timepicker .timepicker-seconds").show()},selectHour:function(g){var h=parseInt(e(g.target).text(),10);a9||(a4.hours()>=12?12!==h&&(h+=12):12===h&&(h=0)),aK(a4.clone().hours(h)),be.showPicker.call(a5)},selectMinute:function(c){aK(a4.clone().minutes(parseInt(e(c.target).text(),10))),be.showPicker.call(a5)},selectSecond:function(c){aK(a4.clone().seconds(parseInt(e(c.target).text(),10))),be.showPicker.call(a5)},clear:aF,today:function(){ao(d(),"d")&&aK(d())},close:bf},aL=function(c){return e(c.currentTarget).is(".disabled")?!1:(be[e(c.currentTarget).data("action")].apply(a5,arguments),!1)},aG=function(){var h,g={year:function(c){return c.month(0).date(1).hours(0).seconds(0).minutes(0)},month:function(c){return c.date(1).hours(0).seconds(0).minutes(0)},day:function(c){return c.hours(0).seconds(0).minutes(0)},hour:function(c){return c.seconds(0).minutes(0)},minute:function(c){return c.seconds(0)}};return bb.prop("disabled")||!bc.ignoreReadonly&&bb.prop("readonly")||a0?a5:(void 0!==bb.val()&&0!==bb.val().trim().length?aK(aM(bb.val().trim())):bc.useCurrent&&a2&&(bb.is("input")&&0===bb.val().trim().length||bc.inline)&&(h=d(),"string"==typeof bc.useCurrent&&(h=g[bc.useCurrent](h)),aK(h)),a0=aA(),au(),an(),a0.find(".timepicker-hours").hide(),a0.find(".timepicker-minutes").hide(),a0.find(".timepicker-seconds").hide(),ac(),av(),e(window).on("resize",ay),a0.on("click","[data-action]",aL),a0.on("mousedown",!1),a1&&a1.hasClass("btn")&&a1.toggleClass("active"),a0.show(),ay(),bc.focusOnShow&&!bb.is(":focus")&&bb.focus(),ax({type:"dp.show"}),a5)},b=function(){return a0?bf():aG()},aM=function(c){return c=d.isMoment(c)||c instanceof Date?d(c):d(c,a7,bc.useStrict),c.locale(bc.locale),c},aH=function(v){var u,t,s,r,q=null,o=[],n={},m=v.which,j="p";aS[m]=j;for(u in aS){aS.hasOwnProperty(u)&&aS[u]===j&&(o.push(u),parseInt(u,10)!==m&&(n[u]=!0))}for(u in bc.keyBinds){if(bc.keyBinds.hasOwnProperty(u)&&"function"==typeof bc.keyBinds[u]&&(s=u.split(" "),s.length===o.length&&aT[m]===s[s.length-1])){for(r=!0,t=s.length-2;t>=0;t--){if(!(aT[s[t]] in n)){r=!1;break}}if(r){q=bc.keyBinds[u];break}}}q&&(q.call(a5,a0),v.stopPropagation(),v.preventDefault())},ab=function(c){aS[c.which]="r",c.stopPropagation(),c.preventDefault()},aN=function(g){var i=e(g.target).val().trim(),h=i?aM(i):null;return aK(h),g.stopImmediatePropagation(),!1},aI=function(){bb.on({change:aN,blur:bc.debug?"":bf,keydown:aH,keyup:ab,focus:bc.allowInputToggle?aG:""}),bd.is("input")?bb.on({focus:aG}):a1&&(a1.on("click",b),a1.on("mousedown",!1))},ad=function(){bb.off({change:aN,blur:bf,keydown:aH,keyup:ab,focus:bc.allowInputToggle?bf:""}),bd.is("input")?bb.off({focus:aG}):a1&&(a1.off("click",b),a1.off("mousedown",!1))},aQ=function(g){var h={};return e.each(g,function(){var c=aM(this);c.isValid()&&(h[c.format("YYYY-MM-DD")]=!0)}),Object.keys(h).length?h:!1},aJ=function(g){var h={};return e.each(g,function(){h[this]=!0}),Object.keys(h).length?h:!1},ag=function(){var c=bc.format||"L LT";a8=c.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(h){var g=a4.localeData().longDateFormat(h)||h;return g.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(i){return a4.localeData().longDateFormat(i)||i})}),a7=bc.extraFormats?bc.extraFormats.slice():[],a7.indexOf(c)<0&&a7.indexOf(a8)<0&&a7.push(a8),a9=a8.toLowerCase().indexOf("a")<1&&a8.replace(/\[.*?\]/g,"").indexOf("h")<1,aR("y")&&(aZ=2),aR("M")&&(aZ=1),aR("d")&&(aZ=0),a6=Math.max(aZ,a6),a2||aK(a4)};if(a5.destroy=function(){bf(),ad(),bd.removeData("DateTimePicker"),bd.removeData("date")},a5.toggle=b,a5.show=aG,a5.hide=bf,a5.disable=function(){return bf(),a1&&a1.hasClass("btn")&&a1.addClass("disabled"),bb.prop("disabled",!0),a5},a5.enable=function(){return a1&&a1.hasClass("btn")&&a1.removeClass("disabled"),bb.prop("disabled",!1),a5},a5.ignoreReadonly=function(c){if(0===arguments.length){return bc.ignoreReadonly}if("boolean"!=typeof c){throw new TypeError("ignoreReadonly () expects a boolean parameter")}return bc.ignoreReadonly=c,a5},a5.options=function(c){if(0===arguments.length){return e.extend(!0,{},bc)}if(!(c instanceof Object)){throw new TypeError("options() options parameter should be an object")}return e.extend(!0,bc,c),e.each(bc,function(h,g){if(void 0===a5[h]){throw new TypeError("option "+h+" is not recognized!")}a5[h](g)}),a5},a5.date=function(c){if(0===arguments.length){return a2?null:a4.clone()}if(!(null===c||"string"==typeof c||d.isMoment(c)||c instanceof Date)){throw new TypeError("date() parameter must be one of [null, string, moment or Date]")}return aK(null===c?null:aM(c)),a5},a5.format=function(c){if(0===arguments.length){return bc.format}if("string"!=typeof c&&("boolean"!=typeof c||c!==!1)){throw new TypeError("format() expects a sting or boolean:false parameter "+c)}return bc.format=c,a8&&ag(),a5},a5.dayViewHeaderFormat=function(c){if(0===arguments.length){return bc.dayViewHeaderFormat}if("string"!=typeof c){throw new TypeError("dayViewHeaderFormat() expects a string parameter")}return bc.dayViewHeaderFormat=c,a5},a5.extraFormats=function(c){if(0===arguments.length){return bc.extraFormats}if(c!==!1&&!(c instanceof Array)){throw new TypeError("extraFormats() expects an array or false parameter")}return bc.extraFormats=c,a7&&ag(),a5},a5.disabledDates=function(c){if(0===arguments.length){return bc.disabledDates?e.extend({},bc.disabledDates):bc.disabledDates}if(!c){return bc.disabledDates=!1,ac(),a5}if(!(c instanceof Array)){throw new TypeError("disabledDates() expects an array parameter")}return bc.disabledDates=aQ(c),bc.enabledDates=!1,ac(),a5},a5.enabledDates=function(c){if(0===arguments.length){return bc.enabledDates?e.extend({},bc.enabledDates):bc.enabledDates}if(!c){return bc.enabledDates=!1,ac(),a5}if(!(c instanceof Array)){throw new TypeError("enabledDates() expects an array parameter")}return bc.enabledDates=aQ(c),bc.disabledDates=!1,ac(),a5},a5.daysOfWeekDisabled=function(g){if(0===arguments.length){return bc.daysOfWeekDisabled.splice(0)}if("boolean"==typeof g&&!g){return bc.daysOfWeekDisabled=!1,ac(),a5}if(!(g instanceof Array)){throw new TypeError("daysOfWeekDisabled() expects an array parameter")}if(bc.daysOfWeekDisabled=g.reduce(function(i,h){return h=parseInt(h,10),h>6||0>h||isNaN(h)?i:(-1===i.indexOf(h)&&i.push(h),i)},[]).sort(),bc.useCurrent&&!bc.keepInvalid){for(var c=0;!ao(a4,"d");){if(a4.add(1,"d"),7===c){throw"Tried 7 times to find a valid date"}c++}aK(a4)}return ac(),a5},a5.maxDate=function(g){if(0===arguments.length){return bc.maxDate?bc.maxDate.clone():bc.maxDate}if("boolean"==typeof g&&g===!1){return bc.maxDate=!1,ac(),a5}"string"==typeof g&&("now"===g||"moment"===g)&&(g=d());var h=aM(g);if(!h.isValid()){throw new TypeError("maxDate() Could not parse date parameter: "+g)}if(bc.minDate&&h.isBefore(bc.minDate)){throw new TypeError("maxDate() date parameter is before options.minDate: "+h.format(a8))}return bc.maxDate=h,bc.useCurrent&&!bc.keepInvalid&&a4.isAfter(g)&&aK(bc.maxDate),a3.isAfter(h)&&(a3=h.clone()),ac(),a5},a5.minDate=function(g){if(0===arguments.length){return bc.minDate?bc.minDate.clone():bc.minDate}if("boolean"==typeof g&&g===!1){return bc.minDate=!1,ac(),a5}"string"==typeof g&&("now"===g||"moment"===g)&&(g=d());var h=aM(g);if(!h.isValid()){throw new TypeError("minDate() Could not parse date parameter: "+g)}if(bc.maxDate&&h.isAfter(bc.maxDate)){throw new TypeError("minDate() date parameter is after options.maxDate: "+h.format(a8))}return bc.minDate=h,bc.useCurrent&&!bc.keepInvalid&&a4.isBefore(g)&&aK(bc.minDate),a3.isBefore(h)&&(a3=h.clone()),ac(),a5},a5.defaultDate=function(g){if(0===arguments.length){return bc.defaultDate?bc.defaultDate.clone():bc.defaultDate}if(!g){return bc.defaultDate=!1,a5}"string"==typeof g&&("now"===g||"moment"===g)&&(g=d());var h=aM(g);if(!h.isValid()){throw new TypeError("defaultDate() Could not parse date parameter: "+g)}if(!ao(h)){throw new TypeError("defaultDate() date passed is invalid according to component setup validations")}return bc.defaultDate=h,(bc.defaultDate&&bc.inline||""===bb.val().trim()&&void 0===bb.attr("placeholder"))&&aK(bc.defaultDate),a5},a5.locale=function(c){if(0===arguments.length){return bc.locale}if(!d.localeData(c)){throw new TypeError("locale() locale "+c+" is not loaded from moment locales!")}return bc.locale=c,a4.locale(bc.locale),a3.locale(bc.locale),a8&&ag(),a0&&(bf(),aG()),a5},a5.stepping=function(c){return 0===arguments.length?bc.stepping:(c=parseInt(c,10),(isNaN(c)||1>c)&&(c=1),bc.stepping=c,a5)},a5.useCurrent=function(g){var c=["year","month","day","hour","minute"];if(0===arguments.length){return bc.useCurrent}if("boolean"!=typeof g&&"string"!=typeof g){throw new TypeError("useCurrent() expects a boolean or string parameter")}if("string"==typeof g&&-1===c.indexOf(g.toLowerCase())){throw new TypeError("useCurrent() expects a string parameter of "+c.join(", "))}return bc.useCurrent=g,a5},a5.collapse=function(c){if(0===arguments.length){return bc.collapse}if("boolean"!=typeof c){throw new TypeError("collapse() expects a boolean parameter")}return bc.collapse===c?a5:(bc.collapse=c,a0&&(bf(),aG()),a5)},a5.icons=function(c){if(0===arguments.length){return e.extend({},bc.icons)}if(!(c instanceof Object)){throw new TypeError("icons() expects parameter to be an Object")}return e.extend(bc.icons,c),a0&&(bf(),aG()),a5},a5.useStrict=function(c){if(0===arguments.length){return bc.useStrict}if("boolean"!=typeof c){throw new TypeError("useStrict() expects a boolean parameter")}return bc.useStrict=c,a5},a5.sideBySide=function(c){if(0===arguments.length){return bc.sideBySide}if("boolean"!=typeof c){throw new TypeError("sideBySide() expects a boolean parameter")}return bc.sideBySide=c,a0&&(bf(),aG()),a5},a5.viewMode=function(c){if(0===arguments.length){return bc.viewMode}if("string"!=typeof c){throw new TypeError("viewMode() expects a string parameter")}if(-1===aX.indexOf(c)){throw new TypeError("viewMode() parameter must be one of ("+aX.join(", ")+") value")}return bc.viewMode=c,a6=Math.max(aX.indexOf(c),aZ),av(),a5},a5.toolbarPlacement=function(c){if(0===arguments.length){return bc.toolbarPlacement}if("string"!=typeof c){throw new TypeError("toolbarPlacement() expects a string parameter")}if(-1===aU.indexOf(c)){throw new TypeError("toolbarPlacement() parameter must be one of ("+aU.join(", ")+") value")}return bc.toolbarPlacement=c,a0&&(bf(),aG()),a5},a5.widgetPositioning=function(c){if(0===arguments.length){return e.extend({},bc.widgetPositioning)}if("[object Object]"!=={}.toString.call(c)){throw new TypeError("widgetPositioning() expects an object variable")}if(c.horizontal){if("string"!=typeof c.horizontal){throw new TypeError("widgetPositioning() horizontal variable must be a string")}if(c.horizontal=c.horizontal.toLowerCase(),-1===aV.indexOf(c.horizontal)){throw new TypeError("widgetPositioning() expects horizontal parameter to be one of ("+aV.join(", ")+")")}bc.widgetPositioning.horizontal=c.horizontal}if(c.vertical){if("string"!=typeof c.vertical){throw new TypeError("widgetPositioning() vertical variable must be a string")}if(c.vertical=c.vertical.toLowerCase(),-1===aW.indexOf(c.vertical)){throw new TypeError("widgetPositioning() expects vertical parameter to be one of ("+aW.join(", ")+")")}bc.widgetPositioning.vertical=c.vertical}return ac(),a5},a5.calendarWeeks=function(c){if(0===arguments.length){return bc.calendarWeeks}if("boolean"!=typeof c){throw new TypeError("calendarWeeks() expects parameter to be a boolean value")}return bc.calendarWeeks=c,ac(),a5},a5.showTodayButton=function(c){if(0===arguments.length){return bc.showTodayButton}if("boolean"!=typeof c){throw new TypeError("showTodayButton() expects a boolean parameter")}return bc.showTodayButton=c,a0&&(bf(),aG()),a5},a5.showClear=function(c){if(0===arguments.length){return bc.showClear}if("boolean"!=typeof c){throw new TypeError("showClear() expects a boolean parameter")}return bc.showClear=c,a0&&(bf(),aG()),a5},a5.widgetParent=function(c){if(0===arguments.length){return bc.widgetParent}if("string"==typeof c&&(c=e(c)),null!==c&&"string"!=typeof c&&!(c instanceof e)){throw new TypeError("widgetParent() expects a string or a jQuery object parameter")}return bc.widgetParent=c,a0&&(bf(),aG()),a5},a5.keepOpen=function(c){if(0===arguments.length){return bc.keepOpen}if("boolean"!=typeof c){throw new TypeError("keepOpen() expects a boolean parameter")}return bc.keepOpen=c,a5},a5.focusOnShow=function(c){if(0===arguments.length){return bc.focusOnShow}if("boolean"!=typeof c){throw new TypeError("focusOnShow() expects a boolean parameter")}return bc.focusOnShow=c,a5},a5.inline=function(c){if(0===arguments.length){return bc.inline}if("boolean"!=typeof c){throw new TypeError("inline() expects a boolean parameter")}return bc.inline=c,a5},a5.clear=function(){return aF(),a5},a5.keyBinds=function(c){return bc.keyBinds=c,a5},a5.debug=function(c){if("boolean"!=typeof c){throw new TypeError("debug() expects a boolean parameter")}return bc.debug=c,a5},a5.allowInputToggle=function(c){if(0===arguments.length){return bc.allowInputToggle}if("boolean"!=typeof c){throw new TypeError("allowInputToggle() expects a boolean parameter")}return bc.allowInputToggle=c,a5},a5.showClose=function(c){if(0===arguments.length){return bc.showClose}if("boolean"!=typeof c){throw new TypeError("showClose() expects a boolean parameter")}return bc.showClose=c,a5},a5.keepInvalid=function(c){if(0===arguments.length){return bc.keepInvalid}if("boolean"!=typeof c){throw new TypeError("keepInvalid() expects a boolean parameter")}return bc.keepInvalid=c,a5},a5.datepickerInput=function(c){if(0===arguments.length){return bc.datepickerInput}if("string"!=typeof c){throw new TypeError("datepickerInput() expects a string parameter")}return bc.datepickerInput=c,a5},a5.disabledTimeIntervals=function(c){if(0===arguments.length){return bc.disabledTimeIntervals?e.extend({},bc.disabledTimeIntervals):bc.disabledTimeIntervals}if(!c){return bc.disabledTimeIntervals=!1,ac(),a5}if(!(c instanceof Array)){throw new TypeError("disabledTimeIntervals() expects an array parameter")}return bc.disabledTimeIntervals=c,ac(),a5},a5.disabledHours=function(g){if(0===arguments.length){return bc.disabledHours?e.extend({},bc.disabledHours):bc.disabledHours}if(!g){return bc.disabledHours=!1,ac(),a5}if(!(g instanceof Array)){throw new TypeError("disabledHours() expects an array parameter")}if(bc.disabledHours=aJ(g),bc.enabledHours=!1,bc.useCurrent&&!bc.keepInvalid){for(var h=0;!ao(a4,"h");){if(a4.add(1,"h"),24===h){throw"Tried 24 times to find a valid date"}h++}aK(a4)}return ac(),a5},a5.enabledHours=function(g){if(0===arguments.length){return bc.enabledHours?e.extend({},bc.enabledHours):bc.enabledHours}if(!g){return bc.enabledHours=!1,ac(),a5}if(!(g instanceof Array)){throw new TypeError("enabledHours() expects an array parameter")}if(bc.enabledHours=aJ(g),bc.disabledHours=!1,bc.useCurrent&&!bc.keepInvalid){for(var h=0;!ao(a4,"h");){if(a4.add(1,"h"),24===h){throw"Tried 24 times to find a valid date"}h++}aK(a4)}return ac(),a5},a5.viewDate=function(c){if(0===arguments.length){return a3.clone()}if(!c){return a3=a4.clone(),a5}if(!("string"==typeof c||d.isMoment(c)||c instanceof Date)){throw new TypeError("viewDate() parameter must be one of [string, moment or Date]")}return a3=aM(c),aw(),a5},bd.is("input")){bb=bd}else{if(bb=bd.find(bc.datepickerInput),0===bb.size()){bb=bd.find("input")}else{if(!bb.is("input")){throw new Error('CSS class "'+bc.datepickerInput+'" cannot be applied to non input element')}}}if(bd.hasClass("input-group")&&(a1=0===bd.find(".datepickerbutton").size()?bd.find('[class^="input-group-"]'):bd.find(".datepickerbutton")),!bc.inline&&!bb.is("input")){throw new Error("Could not initialize DateTimePicker without an input element")}return e.extend(!0,bc,az()),a5.options(bc),ag(),aI(),bb.prop("disabled")&&a5.disable(),bb.is("input")&&0!==bb.val().trim().length?aK(aM(bb.val().trim())):bc.defaultDate&&void 0===bb.attr("placeholder")&&aK(bc.defaultDate),bc.inline&&aG(),a5};e.fn.datetimepicker=function(c){return this.each(function(){var b=e(this);b.data("DateTimePicker")||(c=e.extend(!0,{},e.fn.datetimepicker.defaults,c),b.data("DateTimePicker",f(b,c)))})},e.fn.datetimepicker.defaults={format:!1,dayViewHeaderFormat:"MMMM YYYY",extraFormats:!1,stepping:1,minDate:!1,maxDate:!1,useCurrent:!0,collapse:!0,locale:d.locale(),defaultDate:!1,disabledDates:!1,enabledDates:!1,icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",previous:"glyphicon glyphicon-chevron-left",next:"glyphicon glyphicon-chevron-right",today:"glyphicon glyphicon-screenshot",clear:"glyphicon glyphicon-trash",close:"glyphicon glyphicon-remove"},useStrict:!1,sideBySide:!1,daysOfWeekDisabled:!1,calendarWeeks:!1,viewMode:"days",toolbarPlacement:"default",showTodayButton:!1,showClear:!1,showClose:!1,widgetPositioning:{horizontal:"auto",vertical:"auto"},widgetParent:null,ignoreReadonly:!1,keepOpen:!1,focusOnShow:!0,inline:!1,keepInvalid:!1,datepickerInput:".datepickerinput",keyBinds:{up:function(b){if(b){var g=this.date()||d();b.find(".datepicker").is(":visible")?this.date(g.clone().subtract(7,"d")):this.date(g.clone().add(1,"m"))}},down:function(b){if(!b){return void this.show()}var g=this.date()||d();b.find(".datepicker").is(":visible")?this.date(g.clone().add(7,"d")):this.date(g.clone().subtract(1,"m"))},"control up":function(b){if(b){var g=this.date()||d();b.find(".datepicker").is(":visible")?this.date(g.clone().subtract(1,"y")):this.date(g.clone().add(1,"h"))}},"control down":function(b){if(b){var g=this.date()||d();b.find(".datepicker").is(":visible")?this.date(g.clone().add(1,"y")):this.date(g.clone().subtract(1,"h"))}},left:function(b){if(b){var g=this.date()||d();b.find(".datepicker").is(":visible")&&this.date(g.clone().subtract(1,"d"))}},right:function(b){if(b){var g=this.date()||d();b.find(".datepicker").is(":visible")&&this.date(g.clone().add(1,"d"))}},pageUp:function(b){if(b){var g=this.date()||d();b.find(".datepicker").is(":visible")&&this.date(g.clone().subtract(1,"M"))}},pageDown:function(b){if(b){var g=this.date()||d();b.find(".datepicker").is(":visible")&&this.date(g.clone().add(1,"M"))}},enter:function(){this.hide()},escape:function(){this.hide()},"control space":function(b){b.find(".timepicker").is(":visible")&&b.find('.btn[data-action="togglePeriod"]').click()},t:function(){this.date(d())},"delete":function(){this.clear()}},debug:!1,allowInputToggle:!1,disabledTimeIntervals:!1,disabledHours:!1,enabledHours:!1,viewDate:!1}});(function(M){var e=M.Markdown=function(T){switch(typeof T){case"undefined":this.dialect=e.dialects.Gruber;break;case"object":this.dialect=T;break;default:if(T in e.dialects){this.dialect=e.dialects[T]}else{throw new Error("Unknown Markdown dialect '"+String(T)+"'")}break}this.em_state=[];this.strong_state=[];this.debug_indent=""};M.parse=function(V,T){var U=new e(T);return U.toTree(V)};M.toHTML=function v(W,V,U){var T=M.toHTMLTree(W,V,U);return M.renderJsonML(T)};M.toHTMLTree=function y(U,Y,W){if(typeof U==="string"){U=this.parse(U,Y)}var V=E(U),T={};if(V&&V.references){T=V.references}var X=i(U,T,W);q(X);return X};function f(){return"Markdown.mk_block( "+uneval(this.toString())+", "+uneval(this.trailing)+", "+uneval(this.lineNumber)+" )"}function J(){var T=require("util");return"Markdown.mk_block( "+T.inspect(this.toString())+", "+T.inspect(this.trailing)+", "+T.inspect(this.lineNumber)+" )"}var g=e.mk_block=function(W,U,T){if(arguments.length==1){U="\n\n"}var V=new String(W);V.trailing=U;V.inspect=J;V.toSource=f;if(T!=undefined){V.lineNumber=T}return V};function I(U){var V=0,T=-1;while((T=U.indexOf("\n",T+1))!==-1){V++}return V}e.prototype.split_blocks=function B(V,Y){V=V.replace(/(\r\n|\n|\r)/g,"\n");var W=/([\s\S]+?)($|\n#|\n(?:\s*\n|$)+)/g,X=[],T;var U=1;if((T=/^(\s*\n)/.exec(V))!=null){U+=I(T[0]);W.lastIndex=T[0].length}while((T=W.exec(V))!==null){if(T[2]=="\n#"){T[2]="\n";W.lastIndex--}X.push(g(T[1],T[2],U));U+=I(T[0])}return X};e.prototype.processBlock=function O(Y,X){var U=this.dialect.block,T=U.__order__;if("__call__" in U){return U.__call__.call(this,Y,X)}for(var W=0;W<T.length;W++){var V=U[T[W]].call(this,Y,X);if(V){if(!C(V)||(V.length>0&&!(C(V[0])))){this.debug(T[W],"didn't return a proper array")}return V}}return[]};e.prototype.processInline=function h(T){return this.dialect.inline.__call__.call(this,String(T))};e.prototype.toTree=function K(V,U){var W=V instanceof Array?V:this.split_blocks(V);var X=this.tree;try{this.tree=U||this.tree||["markdown"];W:while(W.length){var T=this.processBlock(W.shift(),W);if(!T.length){continue W}this.tree.push.apply(this.tree,T)}return this.tree}finally{if(U){this.tree=X}}};e.prototype.debug=function(){var T=Array.prototype.slice.call(arguments);T.unshift(this.debug_indent);if(typeof print!=="undefined"){print.apply(print,T)}if(typeof console!=="undefined"&&typeof console.log!=="undefined"){console.log.apply(null,T)}};e.prototype.loop_re_over_block=function(W,X,V){var U,T=X.valueOf();while(T.length&&(U=W.exec(T))!=null){T=T.substr(U[0].length);V.call(this,U)}return T};e.dialects={};e.dialects.Gruber={block:{atxHeader:function s(V,U){var T=V.match(/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/);if(!T){return undefined}var W=["header",{level:T[1].length}];Array.prototype.push.apply(W,this.processInline(T[2]));if(T[0].length<V.length){U.unshift(g(V.substr(T[0].length),V.trailing,V.lineNumber+2))}return[W]},setextHeader:function z(V,U){var T=V.match(/^(.*)\n([-=])\2\2+(?:\n|$)/);if(!T){return undefined}var X=(T[2]==="=")?1:2;var W=["header",{level:X},T[1]];if(T[0].length<V.length){U.unshift(g(V.substr(T[0].length),V.trailing,V.lineNumber+2))}return[W]},code:function l(Y,X){var V=[],W=/^(?: {0,3}\t| {4})(.*)\n?/,U;if(!Y.match(W)){return undefined}block_search:do{var T=this.loop_re_over_block(W,Y.valueOf(),function(Z){V.push(Z[1])});if(T.length){X.unshift(g(T,Y.trailing));break block_search}else{if(X.length){if(!X[0].match(W)){break block_search}V.push(Y.trailing.replace(/[^\n]/g,"").substring(2));Y=X.shift()}else{break block_search}}}while(true);return[["code_block",V.join("\n")]]},horizRule:function R(V,U){var T=V.match(/^(?:([\s\S]*?)\n)?[ \t]*([-_*])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/);if(!T){return undefined}var W=[["hr"]];if(T[1]){W.unshift.apply(W,this.processBlock(T[1],[]))}if(T[3]){U.unshift(g(T[3]))}return W},lists:(function(){var W="[*+-]|\\d+\\.",U=/[*+-]/,ac=/\d+\./,aa=new RegExp("^( {0,3})("+W+")[ \t]+"),V="(?: {0,3}\\t| {4})";function X(ad){return new RegExp("(?:^("+V+"{0,"+ad+"} {0,3})("+W+")\\s+)|(^"+V+"{0,"+(ad-1)+"}[ ]{0,4})")}function T(ad){return ad.replace(/ {0,3}\t/g,"    ")}function ab(ae,ak,aj,af){if(ak){ae.push(["para"].concat(aj));return}var ad=ae[ae.length-1] instanceof Array&&ae[ae.length-1][0]=="para"?ae[ae.length-1]:ae;if(af&&ae.length>1){aj.unshift(af)}for(var ah=0;ah<aj.length;ah++){var ai=aj[ah],ag=typeof ai=="string";if(ag&&ad.length>1&&typeof ad[ad.length-1]=="string"){ad[ad.length-1]+=ai}else{ad.push(ai)}}}function Y(aj,ai){var ah=new RegExp("^("+V+"{"+aj+"}.*?\\n?)*$"),ag=new RegExp("^"+V+"{"+aj+"}","gm"),af=[];while(ai.length>0){if(ah.exec(ai[0])){var ae=ai.shift(),ad=ae.replace(ag,"");af.push(g(ad,ae.trailing,ae.lineNumber))}else{break}}return af}function Z(ag,af,ad){var ai=ag.list;var ah=ai[ai.length-1];if(ah[1] instanceof Array&&ah[1][0]=="para"){return}if(af+1==ad.length){ah.push(["para"].concat(ah.splice(1,ah.length-1)))}else{var ae=ah.pop();ah.push(["para"].concat(ah.splice(1,ah.length-1)),ae)}}return function(ai,ao){var ap=ai.match(aa);if(!ap){return undefined}function ag(az){var aA=U.exec(az[2])?["bulletlist"]:["numberlist"];ah.push({list:aA,indent:az[1]});return aA}var ah=[],au=ag(ap),af,an=false,ay=[ah[0].list],ar;loose_search:while(true){var ad=ai.split(/(?=\n)/);var av="";tight_search:for(var aw=0;aw<ad.length;aw++){var ae="",aq=ad[aw].replace(/^\n/,function(az){ae=az;return""});var al=X(ah.length);ap=aq.match(al);if(ap[1]!==undefined){if(av.length){ab(af,an,this.processInline(av),ae);an=false;av=""}ap[1]=T(ap[1]);var aj=Math.floor(ap[1].length/4)+1;if(aj>ah.length){au=ag(ap);af.push(au);af=au[1]=["listitem"]}else{var am=false;for(ar=0;ar<ah.length;ar++){if(ah[ar].indent!=ap[1]){continue}au=ah[ar].list;ah.splice(ar+1,ah.length-(ar+1));am=true;break}if(!am){aj++;if(aj<=ah.length){ah.splice(aj,ah.length-aj);au=ah[aj-1].list}else{au=ag(ap);af.push(au)}}af=["listitem"];au.push(af)}ae=""}if(aq.length>ap[0].length){av+=ae+aq.substr(ap[0].length)}}if(av.length){ab(af,an,this.processInline(av),ae);an=false;av=""}var at=Y(ah.length,ao);if(at.length>0){c(ah,Z,this);af.push.apply(af,this.toTree(at,[]))}var ak=ao[0]&&ao[0].valueOf()||"";if(ak.match(aa)||ak.match(/^ /)){ai=ao.shift();var ax=this.dialect.block.horizRule(ai,ao);if(ax){ay.push.apply(ay,ax);break}c(ah,Z,this);an=true;continue loose_search}break}return ay}})(),blockquote:function N(W,X){if(!W.match(/^>/m)){return undefined}var ad=[];if(W[0]!=">"){var ae=W.split(/\n/),U=[],Y=W.lineNumber;while(ae.length&&ae[0][0]!=">"){U.push(ae.shift());Y++}var V=g(U.join("\n"),"\n",W.lineNumber);ad.push.apply(ad,this.processBlock(V,[]));W=g(ae.join("\n"),W.trailing,Y)}while(X.length&&X[0][0]==">"){var aa=X.shift();W=g(W+W.trailing+aa,aa.trailing,W.lineNumber)}var ab=W.replace(/^> ?/gm,""),T=this.tree,ac=this.toTree(ab,["blockquote"]),Z=E(ac);if(Z&&Z.references){delete Z.references;if(u(Z)){ac.splice(1,1)}}ad.push(ac);return ad},referenceDefn:function L(X,W){var V=/^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*?)\3|\((.*?)\)))?\n?/;if(!X.match(V)){return undefined}if(!E(this.tree)){this.tree.splice(1,0,{})}var U=E(this.tree);if(U.references===undefined){U.references={}}var T=this.loop_re_over_block(V,X,function(Y){if(Y[2]&&Y[2][0]=="<"&&Y[2][Y[2].length-1]==">"){Y[2]=Y[2].substring(1,Y[2].length-1)}var Z=U.references[Y[1].toLowerCase()]={href:Y[2]};if(Y[4]!==undefined){Z.title=Y[4]}else{if(Y[5]!==undefined){Z.title=Y[5]}}});if(T.length){W.unshift(g(T,X.trailing))}return[]},para:function F(U,T){return[["para"].concat(this.processInline(U))]}}};e.dialects.Gruber.inline={__oneElement__:function d(Y,U,X){var T,V,Z=0;U=U||this.dialect.inline.__patterns__;var W=new RegExp("([\\s\\S]*?)("+(U.source||U)+")");T=W.exec(Y);if(!T){return[Y.length,Y]}else{if(T[1]){return[T[1].length,T[1]]}}var V;if(T[2] in this.dialect.inline){V=this.dialect.inline[T[2]].call(this,Y.substr(T.index),T,X||[])}V=V||[T[2].length,T[2]];return V},__call__:function r(X,V){var T=[],U;function W(Y){if(typeof Y=="string"&&typeof T[T.length-1]=="string"){T[T.length-1]+=Y}else{T.push(Y)}}while(X.length>0){U=this.dialect.inline.__oneElement__.call(this,X,V,T);X=X.substr(U.shift());c(U,W)}return T},"]":function(){},"}":function(){},__escape__:/^\\[\\`\*_{}\[\]()#\+.!\-]/,"\\":function t(T){if(this.dialect.inline.__escape__.exec(T)){return[2,T.charAt(1)]}else{return[1,"\\"]}},"![":function m(V){var T=V.match(/^!\[(.*?)\][ \t]*\([ \t]*([^")]*?)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);if(T){if(T[2]&&T[2][0]=="<"&&T[2][T[2].length-1]==">"){T[2]=T[2].substring(1,T[2].length-1)}T[2]=this.dialect.inline.__call__.call(this,T[2],/\\/)[0];var U={alt:T[1],href:T[2]||""};if(T[4]!==undefined){U.title=T[4]}return[T[0].length,["img",U]]}T=V.match(/^!\[(.*?)\][ \t]*\[(.*?)\]/);if(T){return[T[0].length,["img_ref",{alt:T[1],ref:T[2].toLowerCase(),original:T[0]}]]}return[2,"!["]},"[":function n(ad){var aa=String(ad);var Y=e.DialectHelpers.inline_until_char.call(this,ad.substr(1),"]");if(!Y){return[1,"["]}var ab=1+Y[0],U=Y[1],Z,ac;ad=ad.substr(ab);var W=ad.match(/^\s*\([ \t]*([^"']*)(?:[ \t]+(["'])(.*?)\2)?[ \t]*\)/);if(W){var T=W[1];ab+=W[0].length;if(T&&T[0]=="<"&&T[T.length-1]==">"){T=T.substring(1,T.length-1)}if(!W[3]){var V=1;for(var X=0;X<T.length;X++){switch(T[X]){case"(":V++;break;case")":if(--V==0){ab-=T.length-X;T=T.substring(0,X)}break}}}T=this.dialect.inline.__call__.call(this,T,/\\/)[0];ac={href:T||""};if(W[3]!==undefined){ac.title=W[3]}Z=["link",ac].concat(U);return[ab,Z]}W=ad.match(/^\s*\[(.*?)\]/);if(W){ab+=W[0].length;ac={ref:(W[1]||String(U)).toLowerCase(),original:aa.substr(0,ab)};Z=["link_ref",ac].concat(U);return[ab,Z]}if(U.length==1&&typeof U[0]=="string"){ac={ref:U[0].toLowerCase(),original:aa.substr(0,ab)};Z=["link_ref",ac,U[0]];return[ab,Z]}return[1,"["]},"<":function w(U){var T;if((T=U.match(/^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\.[a-zA-Z]+))>/))!=null){if(T[3]){return[T[0].length,["link",{href:"mailto:"+T[3]},T[3]]]}else{if(T[2]=="mailto"){return[T[0].length,["link",{href:T[1]},T[1].substr("mailto:".length)]]}else{return[T[0].length,["link",{href:T[1]},T[1]]]}}}return[1,"<"]},"`":function A(U){var T=U.match(/(`+)(([\s\S]*?)\1)/);if(T&&T[2]){return[T[1].length+T[2].length,["inlinecode",T[3]]]}else{return[1,"`"]}},"  \n":function Q(T){return[3,["linebreak"]]}};function H(T,W){var V=T+"_state",X=T=="strong"?"em_state":"strong_state";function U(Y){this.len_after=Y;this.name="close_"+W}return function(af,ae){if(this[V][0]==W){this[V].shift();return[af.length,new U(af.length-W.length)]}else{var Y=this[X].slice(),ad=this[V].slice();this[V].unshift(W);var aa=this.processInline(af.substr(W.length));var ab=aa[aa.length-1];var Z=this[V].shift();if(ab instanceof U){aa.pop();var ac=af.length-ab.len_after;return[ac,[T].concat(aa)]}else{this[X]=Y;this[V]=ad;return[W.length,W]}}}}e.dialects.Gruber.inline["**"]=H("strong","**");e.dialects.Gruber.inline.__=H("strong","__");e.dialects.Gruber.inline["*"]=H("em","*");e.dialects.Gruber.inline._=H("em","_");e.buildBlockOrder=function(V){var T=[];for(var U in V){if(U=="__order__"||U=="__call__"){continue}T.push(U)}V.__order__=T};e.buildInlinePatterns=function(X){var W=[];for(var U in X){if(U.match(/^__.*__$/)){continue}var T=U.replace(/([\\.*+?|()\[\]{}])/g,"\\$1").replace(/\n/,"\\n");W.push(U.length==1?T:"(?:"+T+")")}W=W.join("|");X.__patterns__=W;var V=X.__call__;X.__call__=function(Z,Y){if(Y!=undefined){return V.call(this,Z,Y)}else{return V.call(this,Z,W)}}};e.DialectHelpers={};e.DialectHelpers.inline_until_char=function(X,W){var V=0,T=[];while(true){if(X.charAt(V)==W){V++;return[V,T]}if(V>=X.length){return null}var U=this.dialect.inline.__oneElement__.call(this,X.substr(V));V+=U[0];T.push.apply(T,U.slice(1))}};e.subclassDialect=function(V){function T(){}T.prototype=V.block;function U(){}U.prototype=V.inline;return{block:new T(),inline:new U()}};e.buildBlockOrder(e.dialects.Gruber.block);e.buildInlinePatterns(e.dialects.Gruber.inline);e.dialects.Maruku=e.subclassDialect(e.dialects.Gruber);e.dialects.Maruku.processMetaHash=function k(W){var X=o(W),T={};for(var U=0;U<X.length;++U){if(/^#/.test(X[U])){T.id=X[U].substring(1)}else{if(/^\./.test(X[U])){if(T["class"]){T["class"]=T["class"]+X[U].replace(/./," ")}else{T["class"]=X[U].substring(1)}}else{if(/\=/.test(X[U])){var V=X[U].split(/\=/);T[V[0]]=V[1]}}}}return T};function o(V){var X=V.split(""),W=[""],T=false;while(X.length){var U=X.shift();switch(U){case" ":if(T){W[W.length-1]+=U}else{W.push("")}break;case"'":case'"':T=!T;break;case"\\":U=X.shift();default:W[W.length-1]+=U;break}}return W}e.dialects.Maruku.block.document_meta=function j(Y,V){if(Y.lineNumber>1){return undefined}if(!Y.match(/^(?:\w+:.*\n)*\w+:.*$/)){return undefined}if(!E(this.tree)){this.tree.splice(1,0,{})}var X=Y.split(/\n/);for(p in X){var T=X[p].match(/(\w+):\s*(.*)$/),U=T[1].toLowerCase(),W=T[2];this.tree[1][U]=W}return[]};e.dialects.Maruku.block.block_meta=function G(aa,X){var W=aa.match(/(^|\n) {0,3}\{:\s*((?:\\\}|[^\}])*)\s*\}$/);if(!W){return undefined}var V=this.dialect.processMetaHash(W[2]);var Z;if(W[1]===""){var Y=this.tree[this.tree.length-1];Z=E(Y);if(typeof Y==="string"){return undefined}if(!Z){Z={};Y.splice(1,0,Z)}for(a in V){Z[a]=V[a]}return[]}var U=aa.replace(/\n.*$/,""),T=this.processBlock(U,[]);Z=E(T[0]);if(!Z){Z={};T[0].splice(1,0,Z)}for(a in V){Z[a]=V[a]}return T};e.dialects.Maruku.block.definition_list=function P(V,Y){var aa=/^((?:[^\s:].*\n)+):\s+([\s\S]+)$/,Z=["dl"],X,U;if((U=V.match(aa))){var T=[V];while(Y.length&&aa.exec(Y[0])){T.push(Y.shift())}for(var ab=0;ab<T.length;++ab){var U=T[ab].match(aa),W=U[1].replace(/\n$/,"").split(/\n/),ac=U[2].split(/\n:\s+/);for(X=0;X<W.length;++X){Z.push(["dt",W[X]])}for(X=0;X<ac.length;++X){Z.push(["dd"].concat(this.processInline(ac[X].replace(/(\n)\s+/,"$1"))))}}}else{return undefined}return[Z]};e.dialects.Maruku.block.table=function x(V,X){var Y=function(af,ae){ae=ae||"\\s";if(ae.match(/^[\\|\[\]{}?*.+^$]$/)){ae="\\"+ae}var ad=[],ag=new RegExp("^((?:\\\\.|[^\\\\"+ae+"])*)"+ae+"(.*)"),ac;while(ac=af.match(ag)){ad.push(ac[1]);af=ac[2]}ad.push(af);return ad};var Z=/^ {0,3}\|(.+)\n {0,3}\|\s*([\-:]+[\-| :]*)\n((?:\s*\|.*(?:\n|$))*)(?=\n|$)/,T=/^ {0,3}(\S(?:\\.|[^\\|])*\|.*)\n {0,3}([\-:]+\s*\|[\-| :]*)\n((?:(?:\\.|[^\\|])*\|.*(?:\n|$))*)(?=\n|$)/,W,U;if(U=V.match(Z)){U[3]=U[3].replace(/^\s*\|/gm,"")}else{if(!(U=V.match(T))){return undefined}}var aa=["table",["thead",["tr"]],["tbody"]];U[2]=U[2].replace(/\|\s*$/,"").split("|");var ab=[];c(U[2],function(ac){if(ac.match(/^\s*-+:\s*$/)){ab.push({align:"right"})}else{if(ac.match(/^\s*:-+\s*$/)){ab.push({align:"left"})}else{if(ac.match(/^\s*:-+:\s*$/)){ab.push({align:"center"})}else{ab.push({})}}}});U[1]=Y(U[1].replace(/\|\s*$/,""),"|");for(W=0;W<U[1].length;W++){aa[1][1].push(["th",ab[W]||{}].concat(this.processInline(U[1][W].trim())))}c(U[3].replace(/\|\s*$/mg,"").split("\n"),function(ad){var ac=["tr"];ad=Y(ad,"|");for(W=0;W<ad.length;W++){ac.push(["td",ab[W]||{}].concat(this.processInline(ad[W].trim())))}aa[2].push(ac)},this);return[aa]};e.dialects.Maruku.inline["{:"]=function D(aa,Y,W){if(!W.length){return[2,"{:"]}var X=W[W.length-1];if(typeof X==="string"){return[2,"{:"]}var U=aa.match(/^\{:\s*((?:\\\}|[^\}])*)\s*\}/);if(!U){return[2,"{:"]}var Z=this.dialect.processMetaHash(U[1]),T=E(X);if(!T){T={};X.splice(1,0,T)}for(var V in Z){T[V]=Z[V]}return[U[0].length,""]};e.dialects.Maruku.inline.__escape__=/^\\[\\`\*_{}\[\]()#\+.!\-|:]/;e.buildBlockOrder(e.dialects.Maruku.block);e.buildInlinePatterns(e.dialects.Maruku.inline);var C=Array.isArray||function(T){return Object.prototype.toString.call(T)=="[object Array]"};var c;if(Array.prototype.forEach){c=function(U,T,V){return U.forEach(T,V)}}else{c=function(U,T,W){for(var V=0;V<U.length;V++){T.call(W||U,U[V],V,U)}}}var u=function(U){for(var T in U){if(hasOwnProperty.call(U,T)){return false}}return true};function E(T){return C(T)&&T.length>1&&typeof T[1]==="object"&&!(C(T[1]))?T[1]:undefined}M.renderJsonML=function(V,T){T=T||{};T.root=T.root||false;var U=[];if(T.root){U.push(S(V))}else{V.shift();if(V.length&&typeof V[0]==="object"&&!(V[0] instanceof Array)){V.shift()}while(V.length){U.push(S(V.shift()))}}return U.join("\n\n")};function b(T){return T.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function S(Y){if(typeof Y==="string"){return b(Y)}var T=Y.shift(),V={},W=[];if(Y.length&&typeof Y[0]==="object"&&!(Y[0] instanceof Array)){V=Y.shift()}while(Y.length){W.push(S(Y.shift()))}var X="";for(var U in V){X+=" "+U+'="'+b(V[U])+'"'}if(T=="img"||T=="br"||T=="hr"){return"<"+T+X+"/>"}else{return"<"+T+X+">"+W.join("")+"</"+T+">"}}function i(ab,Y,aa){var V;aa=aa||{};var X=ab.slice(0);if(typeof aa.preprocessTreeNode==="function"){X=aa.preprocessTreeNode(X,Y)}var Z=E(X);if(Z){X[1]={};for(V in Z){X[1][V]=Z[V]}Z=X[1]}if(typeof X==="string"){return X}switch(X[0]){case"header":X[0]="h"+X[1].level;delete X[1].level;break;case"bulletlist":X[0]="ul";break;case"numberlist":X[0]="ol";break;case"listitem":X[0]="li";break;case"para":X[0]="p";break;case"markdown":X[0]="html";if(Z){delete Z.references}break;case"code_block":X[0]="pre";V=Z?2:1;var T=["code"];T.push.apply(T,X.splice(V,X.length-V));X[V]=T;break;case"inlinecode":X[0]="code";break;case"img":X[1].src=X[1].href;delete X[1].href;break;case"linebreak":X[0]="br";break;case"link":X[0]="a";break;case"link_ref":X[0]="a";var U=Y[Z.ref];if(U){delete Z.ref;Z.href=U.href;if(U.title){Z.title=U.title}delete Z.original}else{return Z.original}break;case"img_ref":X[0]="img";var U=Y[Z.ref];if(U){delete Z.ref;Z.src=U.href;if(U.title){Z.title=U.title}delete Z.original}else{return Z.original}break}V=1;if(Z){for(var W in X[1]){V=2;break}if(V===1){X.splice(V,1)}}for(;V<X.length;++V){X[V]=i(X[V],Y,aa)}return X}function q(U){var T=E(U)?2:1;while(T<U.length){if(typeof U[T]==="string"){if(T+1<U.length&&typeof U[T+1]==="string"){U[T]+=U.splice(T+1,1)[0]}else{++T}}else{q(U[T]);++T}}}})((function(){if(typeof exports==="undefined"){window.markdown={};return window.markdown}else{return exports}})());!function(e){var c=function(h,g){var i=["autofocus","savable","hideable","width","height","resize","iconlibrary","language","footer","fullscreen","hiddenButtons","disabledButtons"];e.each(i,function(j,k){if(typeof e(h).data(k)!=="undefined"){g=typeof g=="object"?g:{};g[k]=e(h).data(k)}});this.$ns="bootstrap-markdown";this.$element=e(h);this.$editable={el:null,type:null,attrKeys:[],attrValues:[],content:null};this.$options=e.extend(true,{},e.fn.markdown.defaults,g,this.$element.data("options"));this.$oldContent=null;this.$isPreview=false;this.$isFullscreen=false;this.$editor=null;this.$textarea=null;this.$handler=[];this.$callback=[];this.$nextTab=[];this.showEditor()};c.prototype={constructor:c,__alterButtons:function(i,h){var j=this.$handler,g=(i=="all"),k=this;e.each(j,function(m,l){var n=true;if(g){n=false}else{n=l.indexOf(i)<0}if(n===false){h(k.$editor.find('button[data-handler="'+l+'"]'))}})},__buildButtons:function(w,v){var A,E=this.$ns,j=this.$handler,m=this.$callback;for(A=0;A<w.length;A++){var s,n=w[A];for(s=0;s<n.length;s++){var q,C=n[s].data,u=e("<div/>",{"class":"btn-group"});for(q=0;q<C.length;q++){var h=C[q],B,D,x=E+"-"+h.name,o=this.__getIcon(h.icon),g=h.btnText?h.btnText:"",l=h.btnClass?h.btnClass:"btn",k=h.tabIndex?h.tabIndex:"-1",t=typeof h.hotkey!=="undefined"?h.hotkey:"",r=typeof jQuery.hotkeys!=="undefined"&&t!==""?" ("+t+")":"";B=e("<button></button>");B.text(" "+this.__localize(g)).addClass("btn-default btn-sm").addClass(l);if(l.match(/btn\-(primary|success|info|warning|danger|link)/)){B.removeClass("btn-default")}B.attr({type:"button",title:this.__localize(h.title)+r,tabindex:k,"data-provider":E,"data-handler":x,"data-hotkey":t});if(h.toggle===true){B.attr("data-toggle","button")}D=e("<span/>");D.addClass(o);D.prependTo(B);u.append(B);j.push(x);m.push(h.callback)}v.append(u)}}return v},__setListener:function(){var h=typeof this.$textarea.attr("rows")!=="undefined",g=this.$textarea.val().split("\n").length>5?this.$textarea.val().split("\n").length:"5",i=h?this.$textarea.attr("rows"):g;this.$textarea.attr("rows",i);if(this.$options.resize){this.$textarea.css("resize",this.$options.resize)}this.$textarea.on("focus",e.proxy(this.focus,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)).on("change",e.proxy(this.change,this)).on("select",e.proxy(this.select,this));if(this.eventSupported("keydown")){this.$textarea.on("keydown",e.proxy(this.keydown,this))}this.$textarea.data("markdown",this)},__handle:function(k){var j=e(k.currentTarget),i=this.$handler,m=this.$callback,h=j.attr("data-handler"),l=i.indexOf(h),g=m[l];e(k.currentTarget).focus();g(this);this.change(this);if(h.indexOf("cmdSave")<0){this.$textarea.focus()}k.preventDefault()},__localize:function(g){var h=e.fn.markdown.messages,i=this.$options.language;if(typeof h!=="undefined"&&typeof h[i]!=="undefined"&&typeof h[i][g]!=="undefined"){return h[i][g]}return g},__getIcon:function(g){return typeof g=="object"?g[this.$options.iconlibrary]:g},setFullscreen:function(h){var g=this.$editor,i=this.$textarea;if(h===true){g.addClass("md-fullscreen-mode");e("body").addClass("md-nooverflow");this.$options.onFullscreen(this)}else{g.removeClass("md-fullscreen-mode");e("body").removeClass("md-nooverflow");if(this.$isPreview==true){this.hidePreview().showPreview()}}this.$isFullscreen=h;i.focus()},showEditor:function(){var y=this,t,A=this.$ns,s=this.$element,g=s.css("height"),z=s.css("width"),w=this.$editable,l=this.$handler,q=this.$callback,n=this.$options,o=e("<div/>",{"class":"md-editor",click:function(){y.focus()}});if(this.$editor===null){var m=e("<div/>",{"class":"md-header btn-toolbar"});var h=[];if(n.buttons.length>0){h=h.concat(n.buttons[0])}if(n.additionalButtons.length>0){h=h.concat(n.additionalButtons[0])}if(n.reorderButtonGroups.length>0){h=h.filter(function(B){return n.reorderButtonGroups.indexOf(B.name)>-1}).sort(function(C,B){if(n.reorderButtonGroups.indexOf(C.name)<n.reorderButtonGroups.indexOf(B.name)){return -1}if(n.reorderButtonGroups.indexOf(C.name)>n.reorderButtonGroups.indexOf(B.name)){return 1}return 0})}if(h.length>0){m=this.__buildButtons([h],m)}if(n.fullscreen.enable){m.append('<div class="md-controls"><a class="md-control md-control-fullscreen" href="#"><span class="'+this.__getIcon(n.fullscreen.icons.fullscreenOn)+'"></span></a></div>').on("click",".md-control-fullscreen",function(B){B.preventDefault();y.setFullscreen(true)})}o.append(m);if(s.is("textarea")){s.before(o);t=s;t.addClass("md-input");o.append(t)}else{var i=(typeof toMarkdown=="function")?toMarkdown(s.html()):s.html(),x=e.trim(i);t=e("<textarea/>",{"class":"md-input",val:x});o.append(t);w.el=s;w.type=s.prop("tagName").toLowerCase();w.content=s.html();e(s[0].attributes).each(function(){w.attrKeys.push(this.nodeName);w.attrValues.push(this.nodeValue)});s.replaceWith(o)}var j=e("<div/>",{"class":"md-footer"}),r=false,v="";if(n.savable){r=true;var k="cmdSave";l.push(k);q.push(n.onSave);j.append('<button class="btn btn-success" data-provider="'+A+'" data-handler="'+k+'"><i class="icon icon-white icon-ok"></i> '+this.__localize("Save")+"</button>")}v=typeof n.footer==="function"?n.footer(this):n.footer;if(e.trim(v)!==""){r=true;j.append(v)}if(r){o.append(j)}if(n.width&&n.width!=="inherit"){if(jQuery.isNumeric(n.width)){o.css("display","table");t.css("width",n.width+"px")}else{o.addClass(n.width)}}if(n.height&&n.height!=="inherit"){if(jQuery.isNumeric(n.height)){var u=n.height;if(m){u=Math.max(0,u-m.outerHeight())}if(j){u=Math.max(0,u-j.outerHeight())}t.css("height",u+"px")}else{o.addClass(n.height)}}this.$editor=o;this.$textarea=t;this.$editable=w;this.$oldContent=this.getContent();this.__setListener();this.$editor.attr("id",(new Date()).getTime());this.$editor.on("click",'[data-provider="bootstrap-markdown"]',e.proxy(this.__handle,this));if(this.$element.is(":disabled")||this.$element.is("[readonly]")){this.$editor.addClass("md-editor-disabled");this.disableButtons("all")}if(this.eventSupported("keydown")&&typeof jQuery.hotkeys==="object"){m.find('[data-provider="bootstrap-markdown"]').each(function(){var C=e(this),B=C.attr("data-hotkey");if(B.toLowerCase()!==""){t.bind("keydown",B,function(){C.trigger("click");return false})}})}if(n.initialstate==="preview"){this.showPreview()}else{if(n.initialstate==="fullscreen"&&n.fullscreen.enable){this.setFullscreen(true)}}}else{this.$editor.show()}if(n.autofocus){this.$textarea.focus();this.$editor.addClass("active")}if(n.fullscreen.enable&&n.fullscreen!==false){this.$editor.append('<div class="md-fullscreen-controls"><a href="#" class="exit-fullscreen" title="Exit fullscreen"><span class="'+this.__getIcon(n.fullscreen.icons.fullscreenOff)+'"></span></a></div>');this.$editor.on("click",".exit-fullscreen",function(B){B.preventDefault();y.setFullscreen(false)})}this.hideButtons(n.hiddenButtons);this.disableButtons(n.disabledButtons);n.onShow(this);return this},parseContent:function(h){var g;var h=h||this.$textarea.val();if(this.$options.parser){g=this.$options.parser(h)}else{if(typeof markdown=="object"){g=markdown.toHTML(h)}else{if(typeof marked=="function"){g=marked(h)}else{g=h}}}return g},showPreview:function(){var i=this.$options,g=this.$textarea,l=g.next(),h=e("<div/>",{"class":"md-preview","data-provider":"markdown-preview"}),k,j;if(this.$isPreview==true){return this}this.$isPreview=true;this.disableButtons("all").enableButtons("cmdPreview");j=i.onPreview(this);k=typeof j=="string"?j:this.parseContent();h.html(k);if(l&&l.attr("class")=="md-footer"){h.insertBefore(l)}else{g.parent().append(h)}h.css({width:g.outerWidth()+"px",height:g.outerHeight()+"px"});if(this.$options.resize){h.css("resize",this.$options.resize)}g.hide();h.data("markdown",this);if(this.$element.is(":disabled")||this.$element.is("[readonly]")){this.$editor.addClass("md-editor-disabled");this.disableButtons("all")}return this},hidePreview:function(){this.$isPreview=false;var g=this.$editor.find('div[data-provider="markdown-preview"]');g.remove();this.enableButtons("all");this.disableButtons(this.$options.disabledButtons);this.$textarea.show();this.__setListener();return this},isDirty:function(){return this.$oldContent!=this.getContent()},getContent:function(){return this.$textarea.val()},setContent:function(g){this.$textarea.val(g);return this},findSelection:function(h){var k=this.getContent(),j;if(j=k.indexOf(h),j>=0&&h.length>0){var g=this.getSelection(),i;this.setSelection(j,j+h.length);i=this.getSelection();this.setSelection(g.start,g.end);return i}else{return null}},getSelection:function(){var g=this.$textarea[0];return(("selectionStart" in g&&function(){var h=g.selectionEnd-g.selectionStart;return{start:g.selectionStart,end:g.selectionEnd,length:h,text:g.value.substr(g.selectionStart,h)}})||function(){return null})()},setSelection:function(i,g){var h=this.$textarea[0];return(("selectionStart" in h&&function(){h.selectionStart=i;h.selectionEnd=g;return})||function(){return null})()},replaceSelection:function(h){var g=this.$textarea[0];return(("selectionStart" in g&&function(){g.value=g.value.substr(0,g.selectionStart)+h+g.value.substr(g.selectionEnd,g.value.length);g.selectionStart=g.value.length;return this})||function(){g.value+=h;return jQuery(g)})()},getNextTab:function(){if(this.$nextTab.length===0){return null}else{var g,h=this.$nextTab.shift();if(typeof h=="function"){g=h()}else{if(typeof h=="object"&&h.length>0){g=h}}return g}},setNextTab:function(j,h){if(typeof j=="string"){var i=this;this.$nextTab.push(function(){return i.findSelection(j)})}else{if(typeof j=="number"&&typeof h=="number"){var g=this.getSelection();this.setSelection(j,h);this.$nextTab.push(this.getSelection());this.setSelection(g.start,g.end)}}return},__parseButtonNameParam:function(g){var h=[];if(typeof g=="string"){h=g.split(",")}else{h=g}return h},enableButtons:function(g){var i=this.__parseButtonNameParam(g),h=this;e.each(i,function(k,j){h.__alterButtons(i[k],function(l){l.removeAttr("disabled")})});return this},disableButtons:function(g){var i=this.__parseButtonNameParam(g),h=this;e.each(i,function(k,j){h.__alterButtons(i[k],function(l){l.attr("disabled","disabled")})});return this},hideButtons:function(g){var i=this.__parseButtonNameParam(g),h=this;e.each(i,function(k,j){h.__alterButtons(i[k],function(l){l.addClass("hidden")})});return this},showButtons:function(g){var i=this.__parseButtonNameParam(g),h=this;e.each(i,function(k,j){h.__alterButtons(i[k],function(l){l.removeClass("hidden")})});return this},eventSupported:function(g){var h=g in this.$element;if(!h){this.$element.setAttribute(g,"return;");h=typeof this.$element[g]==="function"}return h},keyup:function(j){var h=false;switch(j.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:var g;if(g=this.getNextTab(),g!==null){var i=this;setTimeout(function(){i.setSelection(g.start,g.end)},500);h=true}else{var k=this.getSelection();if(k.start==k.end&&k.end==this.getContent().length){h=false}else{this.setSelection(this.getContent().length,this.getContent().length);h=true}}break;case 13:h=false;break;case 27:if(this.$isFullscreen){this.setFullscreen(false)}h=false;break;default:h=false}if(h){j.stopPropagation();j.preventDefault()}this.$options.onChange(this)},change:function(g){this.$options.onChange(this);return this},select:function(g){this.$options.onSelect(this);return this},focus:function(j){var g=this.$options,i=g.hideable,h=this.$editor;h.addClass("active");e(document).find(".md-editor").each(function(){if(e(this).attr("id")!==h.attr("id")){var k;if(k=e(this).find("textarea").data("markdown"),k===null){k=e(this).find('div[data-provider="markdown-preview"]').data("markdown")}if(k){k.blur()}}});g.onFocus(this);return this},blur:function(n){var h=this.$options,m=h.hideable,k=this.$editor,i=this.$editable;if(k.hasClass("active")||this.$element.parent().length===0){k.removeClass("active");if(m){if(i.el!==null){var g=e("<"+i.type+"/>"),l=this.getContent(),j=this.parseContent(l);e(i.attrKeys).each(function(q,o){g.attr(i.attrKeys[q],i.attrValues[q])});g.html(j);k.replaceWith(g)}else{k.hide()}}h.onBlur(this)}return this}};var b=e.fn.markdown;e.fn.markdown=function(g){return this.each(function(){var j=e(this),i=j.data("markdown"),h=typeof g=="object"&&g;if(!i){j.data("markdown",(i=new c(this,h)))}})};e.fn.markdown.messages={};e.fn.markdown.defaults={autofocus:false,hideable:false,savable:false,width:"inherit",height:"inherit",resize:"none",iconlibrary:"glyph",language:"en",initialstate:"editor",parser:null,buttons:[[{name:"groupFont",data:[{name:"cmdBold",hotkey:"Ctrl+B",title:"Bold",icon:{glyph:"glyphicon glyphicon-bold",fa:"fa fa-bold","fa-3":"icon-bold"},callback:function(j){var g,k,h=j.getSelection(),i=j.getContent();if(h.length===0){g=j.__localize("strong text")}else{g=h.text}if(i.substr(h.start-2,2)==="**"&&i.substr(h.end,2)==="**"){j.setSelection(h.start-2,h.end+2);j.replaceSelection(g);k=h.start-2}else{j.replaceSelection("**"+g+"**");k=h.start+2}j.setSelection(k,k+g.length)}},{name:"cmdItalic",title:"Italic",hotkey:"Ctrl+I",icon:{glyph:"glyphicon glyphicon-italic",fa:"fa fa-italic","fa-3":"icon-italic"},callback:function(j){var g,k,h=j.getSelection(),i=j.getContent();if(h.length===0){g=j.__localize("emphasized text")}else{g=h.text}if(i.substr(h.start-1,1)==="_"&&i.substr(h.end,1)==="_"){j.setSelection(h.start-1,h.end+1);j.replaceSelection(g);k=h.start-1}else{j.replaceSelection("_"+g+"_");k=h.start+1}j.setSelection(k,k+g.length)}},{name:"cmdHeading",title:"Heading",hotkey:"Ctrl+H",icon:{glyph:"glyphicon glyphicon-header",fa:"fa fa-header","fa-3":"icon-font"},callback:function(j){var g,l,h=j.getSelection(),i=j.getContent(),k,m;if(h.length===0){g=j.__localize("heading text")}else{g=h.text+"\n"}if((k=4,i.substr(h.start-k,k)==="### ")||(k=3,i.substr(h.start-k,k)==="###")){j.setSelection(h.start-k,h.end);j.replaceSelection(g);l=h.start-k}else{if(h.start>0&&(m=i.substr(h.start-1,1),!!m&&m!="\n")){j.replaceSelection("\n\n### "+g);l=h.start+6}else{j.replaceSelection("### "+g);l=h.start+4}}j.setSelection(l,l+g.length)}}]},{name:"groupLink",data:[{name:"cmdUrl",title:"URL/Link",hotkey:"Ctrl+L",icon:{glyph:"glyphicon glyphicon-link",fa:"fa fa-link","fa-3":"icon-link"},callback:function(l){var h,m,i=l.getSelection(),k=l.getContent(),j;if(i.length===0){h=l.__localize("enter link description here")}else{h=i.text}j=prompt(l.__localize("Insert Hyperlink"),"http://");if(j!==null&&j!==""&&j!=="http://"&&j.substr(0,4)==="http"){var g=e("<div>"+j+"</div>").text();l.replaceSelection("["+h+"]("+g+")");m=i.start+1;l.setSelection(m,m+h.length)}}},{name:"cmdImage",title:"Image",hotkey:"Ctrl+G",icon:{glyph:"glyphicon glyphicon-picture",fa:"fa fa-picture-o","fa-3":"icon-picture"},callback:function(l){var h,m,i=l.getSelection(),k=l.getContent(),j;if(i.length===0){h=l.__localize("enter image description here")}else{h=i.text}j=prompt(l.__localize("Insert Image Hyperlink"),"http://");if(j!==null&&j!==""&&j!=="http://"&&j.substr(0,4)==="http"){var g=e("<div>"+j+"</div>").text();l.replaceSelection("!["+h+"]("+g+' "'+l.__localize("enter image title here")+'")');m=i.start+2;l.setNextTab(l.__localize("enter image title here"));l.setSelection(m,m+h.length)}}}]},{name:"groupMisc",data:[{name:"cmdList",hotkey:"Ctrl+U",title:"Unordered List",icon:{glyph:"glyphicon glyphicon-list",fa:"fa fa-list","fa-3":"icon-list-ul"},callback:function(k){var g,l,h=k.getSelection(),i=k.getContent();if(h.length===0){g=k.__localize("list text here");k.replaceSelection("- "+g);l=h.start+2}else{if(h.text.indexOf("\n")<0){g=h.text;k.replaceSelection("- "+g);l=h.start+2}else{var j=[];j=h.text.split("\n");g=j[0];e.each(j,function(n,m){j[n]="- "+m});k.replaceSelection("\n\n"+j.join("\n"));l=h.start+4}}k.setSelection(l,l+g.length)}},{name:"cmdListO",hotkey:"Ctrl+O",title:"Ordered List",icon:{glyph:"glyphicon glyphicon-th-list",fa:"fa fa-list-ol","fa-3":"icon-list-ol"},callback:function(k){var g,l,h=k.getSelection(),i=k.getContent();if(h.length===0){g=k.__localize("list text here");k.replaceSelection("1. "+g);l=h.start+3}else{if(h.text.indexOf("\n")<0){g=h.text;k.replaceSelection("1. "+g);l=h.start+3}else{var j=[];j=h.text.split("\n");g=j[0];e.each(j,function(n,m){j[n]="1. "+m});k.replaceSelection("\n\n"+j.join("\n"));l=h.start+5}}k.setSelection(l,l+g.length)}},{name:"cmdCode",hotkey:"Ctrl+K",title:"Code",icon:{glyph:"glyphicon glyphicon-asterisk",fa:"fa fa-code","fa-3":"icon-code"},callback:function(j){var g,k,h=j.getSelection(),i=j.getContent();if(h.length===0){g=j.__localize("code text here")}else{g=h.text}if(i.substr(h.start-4,4)==="```\n"&&i.substr(h.end,4)==="\n```"){j.setSelection(h.start-4,h.end+4);j.replaceSelection(g);k=h.start-4}else{if(i.substr(h.start-1,1)==="`"&&i.substr(h.end,1)==="`"){j.setSelection(h.start-1,h.end+1);j.replaceSelection(g);k=h.start-1}else{if(i.indexOf("\n")>-1){j.replaceSelection("```\n"+g+"\n```");k=h.start+4}else{j.replaceSelection("`"+g+"`");k=h.start+1}}}j.setSelection(k,k+g.length)}},{name:"cmdQuote",hotkey:"Ctrl+Q",title:"Quote",icon:{glyph:"glyphicon glyphicon-comment",fa:"fa fa-quote-left","fa-3":"icon-quote-left"},callback:function(k){var g,l,h=k.getSelection(),i=k.getContent();if(h.length===0){g=k.__localize("quote here");k.replaceSelection("> "+g);l=h.start+2}else{if(h.text.indexOf("\n")<0){g=h.text;k.replaceSelection("> "+g);l=h.start+2}else{var j=[];j=h.text.split("\n");g=j[0];e.each(j,function(n,m){j[n]="> "+m});k.replaceSelection("\n\n"+j.join("\n"));l=h.start+4}}k.setSelection(l,l+g.length)}}]},{name:"groupUtil",data:[{name:"cmdPreview",toggle:true,hotkey:"Ctrl+P",title:"Preview",btnText:"Preview",btnClass:"btn btn-primary btn-sm",icon:{glyph:"glyphicon glyphicon-search",fa:"fa fa-search","fa-3":"icon-search"},callback:function(i){var g=i.$isPreview,h;if(g===false){i.showPreview()}else{i.hidePreview()}}}]}]],additionalButtons:[],reorderButtonGroups:[],hiddenButtons:[],disabledButtons:[],footer:"",fullscreen:{enable:true,icons:{fullscreenOn:{fa:"fa fa-expand",glyph:"glyphicon glyphicon-fullscreen","fa-3":"icon-resize-full"},fullscreenOff:{fa:"fa fa-compress",glyph:"glyphicon glyphicon-fullscreen","fa-3":"icon-resize-small"}}},onShow:function(g){},onPreview:function(g){},onSave:function(g){},onBlur:function(g){},onFocus:function(g){},onChange:function(g){},onFullscreen:function(g){},onSelect:function(g){}};e.fn.markdown.Constructor=c;e.fn.markdown.noConflict=function(){e.fn.markdown=b;return this};var d=function(g){var h=g;if(h.data("markdown")){h.data("markdown").showEditor();return}h.markdown()};var f=function(h){var g=e(document.activeElement);e(document).find(".md-editor").each(function(){var k=e(this),j=g.closest(".md-editor")[0]===this,i=k.find("textarea").data("markdown")||k.find('div[data-provider="markdown-preview"]').data("markdown");if(i&&!j){i.blur()}})};e(document).on("click.markdown.data-api",'[data-provide="markdown-editable"]',function(g){d(e(this));g.preventDefault()}).on("click focusin",function(g){f(g)}).ready(function(){e('textarea[data-provide="markdown"]').each(function(){d(e(this))})})}(window.jQuery);
/*! Sortable 1.6.0 - MIT | git://github.com/rubaxa/Sortable.git */
;!function(b){"function"==typeof define&&define.amd?define(b):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=b():window.Sortable=b()}(function(){function a8(g,f){if(!g||!g.nodeType||1!==g.nodeType){throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(g)}this.el=g,this.options=f=aP({},f),g[ai]=this;var j={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(g.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(d,c){d.setData("Text",c.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0}};for(var i in j){!(i in f)&&(f[i]=j[i])}aF(f);for(var h in this){"_"===h.charAt(0)&&"function"==typeof this[h]&&(this[h]=this[h].bind(this))}this.nativeDraggable=!f.forceFallback&&aG,a3(g,"mousedown",this._onTapStart),a3(g,"touchstart",this._onTapStart),a3(g,"pointerdown",this._onTapStart),this.nativeDraggable&&(a3(g,"dragover",this),a3(g,"dragenter",this)),ab.push(this._onDragOver),f.store&&this.sort(f.store.get(this))}function a7(d,c){"clone"!==d.lastPullMode&&(c=!0),aJ&&aJ.state!==c&&(a0(aJ,"display",c?"none":""),c||aJ.state&&(d.options.group.revertClone?(aC.insertBefore(aJ,aB),d._animate(aM,aJ)):aC.insertBefore(aJ,aM)),aJ.state=c)}function a6(e,d,f){if(e){f=f||ag;do{if(">*"===d&&e.parentNode===f||aR(e,d)){return e}}while(e=a5(e))}return null}function a5(d){var c=d.host;return c&&c.nodeType?c:d.parentNode}function a4(b){b.dataTransfer&&(b.dataTransfer.dropEffect="move"),b.preventDefault()}function a3(e,d,f){e.addEventListener(d,f,ac)}function a2(e,d,f){e.removeEventListener(d,f,ac)}function a1(f,e,h){if(f){if(f.classList){f.classList[h?"add":"remove"](e)}else{var g=(" "+f.className+" ").replace(ak," ").replace(" "+e+" "," ");f.className=(g+(h?" "+e:"")).replace(ak," ")}}}function a0(f,e,h){var g=f&&f.style;if(g){if(void 0===h){return ag.defaultView&&ag.defaultView.getComputedStyle?h=ag.defaultView.getComputedStyle(f,""):f.currentStyle&&(h=f.currentStyle),void 0===e?h:h[e]}e in g||(e="-webkit-"+e),g[e]=h+("string"==typeof h?"":"px")}}function aZ(h,g,l){if(h){var k=h.getElementsByTagName(g),j=0,i=k.length;if(l){for(;j<i;j++){l(k[j],j)}}return k}return[]}function aY(u,t,s,r,q,o,n){u=u||t[ai];var m=ag.createEvent("Event"),l=u.options,k="on"+s.charAt(0).toUpperCase()+s.substr(1);m.initEvent(s,!0,!0),m.to=t,m.from=q||t,m.item=r||t,m.clone=aJ,m.oldIndex=o,m.newIndex=n,t.dispatchEvent(m),l[k]&&l[k].call(u,m)}function aX(y,x,w,v,u,t,s,r){var q,o,n=y[ai],m=n.options.onMove;return q=ag.createEvent("Event"),q.initEvent("move",!0,!0),q.to=x,q.from=y,q.dragged=w,q.draggedRect=v,q.related=u||x,q.relatedRect=t||x.getBoundingClientRect(),q.willInsertAfter=r,y.dispatchEvent(q),m&&(o=m.call(n,q,s)),o}function aW(b){b.draggable=!1}function aV(){aD=!1}function aU(f,e){var h=f.lastElementChild,g=h.getBoundingClientRect();return e.clientY-(g.top+g.height)>5||e.clientX-(g.left+g.width)>5}function aT(f){for(var e=f.tagName+f.className+f.src+f.href+f.textContent,h=e.length,g=0;h--;){g+=e.charCodeAt(h)}return g.toString(36)}function aS(e,d){var f=0;if(!e||!e.parentNode){return -1}for(;e&&(e=e.previousElementSibling);){"TEMPLATE"===e.nodeName.toUpperCase()||">*"!==d&&!aR(e,d)||f++}return f}function aR(f,e){if(f){e=e.split(".");var h=e.shift().toUpperCase(),g=new RegExp("\\s("+e.join("|")+")(?=\\s)","g");return !(""!==h&&f.nodeName.toUpperCase()!=h||e.length&&((" "+f.className+" ").match(g)||[]).length!=e.length)}return !1}function aQ(f,e){var h,g;return function(){void 0===h&&(h=arguments,g=this,setTimeout(function(){1===h.length?f.call(g,h[0]):f.apply(g,h),h=void 0},e))}}function aP(e,d){if(e&&d){for(var f in d){d.hasOwnProperty(f)&&(e[f]=d[f])}}return e}function aO(b){return ae?ae(b).clone(!0)[0]:ad&&ad.dom?ad.dom(b).cloneNode(!0):b.cloneNode(!0)}function aN(f){for(var e=f.getElementsByTagName("input"),h=e.length;h--;){var g=e[h];g.checked&&aE.push(g)}}if("undefined"==typeof window||!window.document){return function(){throw new Error("Sortable.js requires a window with a document")}}var aM,aL,aK,aJ,aC,aB,aA,az,ay,ax,aw,av,au,at,ar,aq,ap,ao,an,am,al={},ak=/\s+/g,aj=/left|right|inline/,ai="Sortable"+(new Date).getTime(),ah=window,ag=ah.document,af=ah.parseInt,ae=ah.jQuery||ah.Zepto,ad=ah.Polymer,ac=!1,aG=!!("draggable" in ag.createElement("div")),bb=function(b){return !navigator.userAgent.match(/Trident.*rv[ :]?11\./)&&(b=ag.createElement("x"),b.style.cssText="pointer-events:auto","auto"===b.style.pointerEvents)}(),aD=!1,a9=Math.abs,aH=Math.min,aE=[],ab=[],aI=aQ(function(F,E,D){if(D&&E.scroll){var C,B,A,z,y,x,w=D[ai],v=E.scrollSensitivity,u=E.scrollSpeed,t=F.clientX,s=F.clientY,r=window.innerWidth,q=window.innerHeight;if(ay!==D&&(az=E.scroll,ay=D,ax=E.scrollFn,az===!0)){az=D;do{if(az.offsetWidth<az.scrollWidth||az.offsetHeight<az.scrollHeight){break}}while(az=az.parentNode)}az&&(C=az,B=az.getBoundingClientRect(),A=(a9(B.right-t)<=v)-(a9(B.left-t)<=v),z=(a9(B.bottom-s)<=v)-(a9(B.top-s)<=v)),A||z||(A=(r-t<=v)-(t<=v),z=(q-s<=v)-(s<=v),(A||z)&&(C=ah)),al.vx===A&&al.vy===z&&al.el===C||(al.el=C,al.vx=A,al.vy=z,clearInterval(al.pid),C&&(al.pid=setInterval(function(){return x=z?z*u:0,y=A?A*u:0,"function"==typeof ax?ax.call(w,y,x,F):void (C===ah?ah.scrollTo(ah.pageXOffset+y,ah.pageYOffset+x):(C.scrollTop+=x,C.scrollLeft+=y))},24)))}},30),aF=function(f){function e(d,c){return void 0!==d&&d!==!0||(d=h.name),"function"==typeof d?d:function(j,i){var b=i.options.group.name;return c?d:d&&(d.join?d.indexOf(b)>-1:b==d)}}var h={},g=f.group;g&&"object"==typeof g||(g={name:g}),h.name=g.name,h.checkPull=e(g.pull,!0),h.checkPut=e(g.put),h.revertClone=g.revertClone,f.group=h};a8.prototype={constructor:a8,_onTapStart:function(w){var v,u=this,t=this.el,s=this.options,r=s.preventOnFilter,q=w.type,o=w.touches&&w.touches[0],n=(o||w).target,k=w.target.shadowRoot&&w.path[0]||n,c=s.filter;if(aN(t),!aM&&!("mousedown"===q&&0!==w.button||s.disabled)&&(n=a6(n,s.draggable,t),n&&aA!==n)){if(v=aS(n,s.draggable),"function"==typeof c){if(c.call(this,w,n,this)){return aY(u,k,"filter",n,t,v),void (r&&w.preventDefault())}}else{if(c&&(c=c.split(",").some(function(b){if(b=a6(k,b.trim(),t)){return aY(u,b,"filter",n,t,v),!0}}))){return void (r&&w.preventDefault())}}s.handle&&!a6(k,s.handle,t)||this._prepareDragStart(w,o,n,v)}},_prepareDragStart:function(s,r,q,o){var m,k=this,j=k.el,h=k.options,f=j.ownerDocument;q&&!aM&&q.parentNode===j&&(ao=s,aC=j,aM=q,aL=aM.parentNode,aB=aM.nextSibling,aA=q,aq=h.group,at=o,this._lastX=(r||s).clientX,this._lastY=(r||s).clientY,aM.style["will-change"]="transform",m=function(){k._disableDelayedDrag(),aM.draggable=k.nativeDraggable,a1(aM,h.chosenClass,!0),k._triggerDragStart(s,r),aY(k,aC,"choose",aM,aC,at)},h.ignore.split(",").forEach(function(b){aZ(aM,b.trim(),aW)}),a3(f,"mouseup",k._onDrop),a3(f,"touchend",k._onDrop),a3(f,"touchcancel",k._onDrop),a3(f,"pointercancel",k._onDrop),a3(f,"selectstart",k),h.delay?(a3(f,"mouseup",k._disableDelayedDrag),a3(f,"touchend",k._disableDelayedDrag),a3(f,"touchcancel",k._disableDelayedDrag),a3(f,"mousemove",k._disableDelayedDrag),a3(f,"touchmove",k._disableDelayedDrag),a3(f,"pointermove",k._disableDelayedDrag),k._dragStartTimer=setTimeout(m,h.delay)):m())},_disableDelayedDrag:function(){var b=this.el.ownerDocument;clearTimeout(this._dragStartTimer),a2(b,"mouseup",this._disableDelayedDrag),a2(b,"touchend",this._disableDelayedDrag),a2(b,"touchcancel",this._disableDelayedDrag),a2(b,"mousemove",this._disableDelayedDrag),a2(b,"touchmove",this._disableDelayedDrag),a2(b,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(d,c){c=c||("touch"==d.pointerType?d:null),c?(ao={target:aM,clientX:c.clientX,clientY:c.clientY},this._onDragStart(ao,"touch")):this.nativeDraggable?(a3(aM,"dragend",this),a3(aC,"dragstart",this._onDragStart)):this._onDragStart(ao,!0);try{ag.selection?setTimeout(function(){ag.selection.empty()}):window.getSelection().removeAllRanges()}catch(d){}},_dragStarted:function(){if(aC&&aM){var c=this.options;a1(aM,c.ghostClass,!0),a1(aM,c.dragClass,!1),a8.active=this,aY(this,aC,"start",aM,aC,at)}else{this._nulling()}},_emulateDragOver:function(){if(an){if(this._lastX===an.clientX&&this._lastY===an.clientY){return}this._lastX=an.clientX,this._lastY=an.clientY,bb||a0(aK,"display","none");var e=ag.elementFromPoint(an.clientX,an.clientY),d=e,f=ab.length;if(d){do{if(d[ai]){for(;f--;){ab[f]({clientX:an.clientX,clientY:an.clientY,target:e,rootEl:d})}break}e=d}while(d=d.parentNode)}bb||a0(aK,"display","")}},_onTouchMove:function(i){if(ao){var r=this.options,q=r.fallbackTolerance,o=r.fallbackOffset,n=i.touches?i.touches[0]:i,m=n.clientX-ao.clientX+o.x,l=n.clientY-ao.clientY+o.y,k=i.touches?"translate3d("+m+"px,"+l+"px,0)":"translate("+m+"px,"+l+"px)";if(!a8.active){if(q&&aH(a9(n.clientX-this._lastX),a9(n.clientY-this._lastY))<q){return}this._dragStarted()}this._appendGhost(),am=!0,an=n,a0(aK,"webkitTransform",k),a0(aK,"mozTransform",k),a0(aK,"msTransform",k),a0(aK,"transform",k),i.preventDefault()}},_appendGhost:function(){if(!aK){var f,e=aM.getBoundingClientRect(),h=a0(aM),g=this.options;aK=aM.cloneNode(!0),a1(aK,g.ghostClass,!1),a1(aK,g.fallbackClass,!0),a1(aK,g.dragClass,!0),a0(aK,"top",e.top-af(h.marginTop,10)),a0(aK,"left",e.left-af(h.marginLeft,10)),a0(aK,"width",e.width),a0(aK,"height",e.height),a0(aK,"opacity","0.8"),a0(aK,"position","fixed"),a0(aK,"zIndex","100000"),a0(aK,"pointerEvents","none"),g.fallbackOnBody&&ag.body.appendChild(aK)||aC.appendChild(aK),f=aK.getBoundingClientRect(),a0(aK,"width",2*e.width-f.width),a0(aK,"height",2*e.height-f.height)}},_onDragStart:function(f,e){var h=f.dataTransfer,g=this.options;this._offUpEvents(),aq.checkPull(this,this,aM,f)&&(aJ=aO(aM),aJ.draggable=!1,aJ.style["will-change"]="",a0(aJ,"display","none"),a1(aJ,this.options.chosenClass,!1),aC.insertBefore(aJ,aM),aY(this,aC,"clone",aM)),a1(aM,g.dragClass,!0),e?("touch"===e?(a3(ag,"touchmove",this._onTouchMove),a3(ag,"touchend",this._onDrop),a3(ag,"touchcancel",this._onDrop),a3(ag,"pointermove",this._onTouchMove),a3(ag,"pointerup",this._onDrop)):(a3(ag,"mousemove",this._onTouchMove),a3(ag,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(h&&(h.effectAllowed="move",g.setData&&g.setData.call(this,h,aM)),a3(ag,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(U){var T,S,R,Q,P=this.el,M=this.options,L=M.group,I=a8.active,H=aq===L,G=!1,z=M.sort;if(void 0!==U.preventDefault&&(U.preventDefault(),!M.dragoverBubble&&U.stopPropagation()),!aM.animated&&(am=!0,I&&!M.disabled&&(H?z||(Q=!aC.contains(aM)):ap===this||(I.lastPullMode=aq.checkPull(this,I,aM,U))&&L.checkPut(this,I,aM,U))&&(void 0===U.rootEl||U.rootEl===this.el))){if(aI(U,M,this.el),aD){return}if(T=a6(U.target,M.draggable,P),S=aM.getBoundingClientRect(),ap!==this&&(ap=this,G=!0),Q){return a7(I,!0),aL=aC,void (aJ||aB?aC.insertBefore(aM,aJ||aB):z||aC.appendChild(aM))}if(0===P.children.length||P.children[0]===aK||P===U.target&&aU(P,U)){if(0!==P.children.length&&P.children[0]!==aK&&P===U.target&&(T=P.lastElementChild),T){if(T.animated){return}R=T.getBoundingClientRect()}a7(I,H),aX(aC,P,aM,S,T,R,U)!==!1&&(aM.contains(P)||(P.appendChild(aM),aL=P),this._animate(S,aM),T&&this._animate(R,T))}else{if(T&&!T.animated&&T!==aM&&void 0!==T.parentNode[ai]){aw!==T&&(aw=T,av=a0(T),au=a0(T.parentNode)),R=T.getBoundingClientRect();var y=R.right-R.left,w=R.bottom-R.top,n=aj.test(av.cssFloat+av.display)||"flex"==au.display&&0===au["flex-direction"].indexOf("row"),B=T.offsetWidth>aM.offsetWidth,A=T.offsetHeight>aM.offsetHeight,x=(n?(U.clientX-R.left)/y:(U.clientY-R.top)/w)>0.5,o=T.nextElementSibling,l=!1;if(n){var i=aM.offsetTop,c=T.offsetTop;l=i===c?T.previousElementSibling===aM&&!B||x&&B:T.previousElementSibling===aM||aM.previousElementSibling===T?(U.clientY-R.top)/w>0.5:c>i}else{G||(l=o!==aM&&!A||x&&A)}var b=aX(aC,P,aM,S,T,R,U,l);b!==!1&&(1!==b&&b!==-1||(l=1===b),aD=!0,setTimeout(aV,30),a7(I,H),aM.contains(P)||(l&&!o?P.appendChild(aM):T.parentNode.insertBefore(aM,l?o:T)),aL=aM.parentNode,this._animate(S,aM),this._animate(R,T))}}}},_animate:function(f,e){var h=this.options.animation;if(h){var g=e.getBoundingClientRect();1===f.nodeType&&(f=f.getBoundingClientRect()),a0(e,"transition","none"),a0(e,"transform","translate3d("+(f.left-g.left)+"px,"+(f.top-g.top)+"px,0)"),e.offsetWidth,a0(e,"transition","all "+h+"ms"),a0(e,"transform","translate3d(0,0,0)"),clearTimeout(e.animated),e.animated=setTimeout(function(){a0(e,"transition",""),a0(e,"transform",""),e.animated=!1},h)}},_offUpEvents:function(){var b=this.el.ownerDocument;a2(ag,"touchmove",this._onTouchMove),a2(ag,"pointermove",this._onTouchMove),a2(b,"mouseup",this._onDrop),a2(b,"touchend",this._onDrop),a2(b,"pointerup",this._onDrop),a2(b,"touchcancel",this._onDrop),a2(b,"pointercancel",this._onDrop),a2(b,"selectstart",this)},_onDrop:function(e){var g=this.el,f=this.options;clearInterval(this._loopId),clearInterval(al.pid),clearTimeout(this._dragStartTimer),a2(ag,"mousemove",this._onTouchMove),this.nativeDraggable&&(a2(ag,"drop",this),a2(g,"dragstart",this._onDragStart)),this._offUpEvents(),e&&(am&&(e.preventDefault(),!f.dropBubble&&e.stopPropagation()),aK&&aK.parentNode&&aK.parentNode.removeChild(aK),aC!==aL&&"clone"===a8.active.lastPullMode||aJ&&aJ.parentNode&&aJ.parentNode.removeChild(aJ),aM&&(this.nativeDraggable&&a2(aM,"dragend",this),aW(aM),aM.style["will-change"]="",a1(aM,this.options.ghostClass,!1),a1(aM,this.options.chosenClass,!1),aY(this,aC,"unchoose",aM,aC,at),aC!==aL?(ar=aS(aM,f.draggable),ar>=0&&(aY(null,aL,"add",aM,aC,at,ar),aY(this,aC,"remove",aM,aC,at,ar),aY(null,aL,"sort",aM,aC,at,ar),aY(this,aC,"sort",aM,aC,at,ar))):aM.nextSibling!==aB&&(ar=aS(aM,f.draggable),ar>=0&&(aY(this,aC,"update",aM,aC,at,ar),aY(this,aC,"sort",aM,aC,at,ar))),a8.active&&(null!=ar&&ar!==-1||(ar=at),aY(this,aC,"end",aM,aC,at,ar),this.save()))),this._nulling()},_nulling:function(){aC=aM=aL=aK=aB=aJ=aA=az=ay=ao=an=am=ar=aw=av=ap=aq=a8.active=null,aE.forEach(function(b){b.checked=!0}),aE.length=0},handleEvent:function(b){switch(b.type){case"drop":case"dragend":this._onDrop(b);break;case"dragover":case"dragenter":aM&&(this._onDragOver(b),a4(b));break;case"selectstart":b.preventDefault()}},toArray:function(){for(var h,c=[],l=this.el.children,k=0,j=l.length,i=this.options;k<j;k++){h=l[k],a6(h,i.draggable,this.el)&&c.push(h.getAttribute(i.dataIdAttr)||aT(h))}return c},sort:function(e){var c={},f=this.el;this.toArray().forEach(function(b,g){var d=f.children[g];a6(d,this.options.draggable,f)&&(c[b]=d)},this),e.forEach(function(b){c[b]&&(f.removeChild(c[b]),f.appendChild(c[b]))})},save:function(){var b=this.options.store;b&&b.set(this)},closest:function(d,c){return a6(d,c||this.options.draggable,this.el)},option:function(e,d){var f=this.options;return void 0===d?f[e]:(f[e]=d,void ("group"===e&&aF(f)))},destroy:function(){var b=this.el;b[ai]=null,a2(b,"mousedown",this._onTapStart),a2(b,"touchstart",this._onTapStart),a2(b,"pointerdown",this._onTapStart),this.nativeDraggable&&(a2(b,"dragover",this),a2(b,"dragenter",this)),Array.prototype.forEach.call(b.querySelectorAll("[draggable]"),function(c){c.removeAttribute("draggable")}),ab.splice(ab.indexOf(this._onDragOver),1),this._onDrop(),this.el=b=null}},a3(ag,"touchmove",function(c){a8.active&&c.preventDefault()});try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){ac={capture:!1,passive:!1}}}))}catch(a8){}return a8.utils={on:a3,off:a2,css:a0,find:aZ,is:function(d,c){return !!a6(d,c,d)},extend:aP,throttle:aQ,closest:a6,toggleClass:a1,clone:aO,index:aS},a8.create=function(d,e){return new a8(d,e)},a8.version="1.6.0",a8});var Student=Backbone.Model.extend({constructor:function(c,b){Backbone.Model.apply(this,arguments);this.reset()},is_changed:function(){if(!this.get("id")){return false}return this.old_name!=this.get("name")||this.old_second_name!=this.get("second_name")||this.old_sex!=this.get("sex")||this.old_photo!=this.get("photo")||this.get("remove_photo")},defaults:function(){return{marks:new MarksCollection()}},toJSON:function(){return{name:this.get("name"),second_name:this.get("second_name"),sex:this.get("sex"),group_id:this.get("group_id"),photo:this.get("photo"),remove_photo:this.get("remove_photo")}},save:function(){var d=this;var e=new FormData(this.get("photo_form"));var c=this.toJSON();for(var b in c){if(typeof c[b]!="undefined"){e.append(b,c[b])}}if(this.get("id")){$.ajax({url:this.get("urlUpdate"),method:"POST",data:e,cache:false,contentType:false,processData:false}).done(function(){d.reset()})}else{$.ajax({url:this.get("urlCreate"),method:"POST",data:e,cache:false,contentType:false,processData:false}).done(function(){loadToContent(window.location)})}},remove:function(){$.ajax({url:this.get("urlRemove"),method:"POST"}).done(function(){loadToContent(window.location)})},reset:function(){this.old_name=this.get("name");this.old_second_name=this.get("second_name");this.old_sex=this.get("sex");this.old_photo=null;this.trigger("change",this)}});var StudentView=Backbone.View.extend({initialize:function(){_.bindAll(this,"render");this.model.on("change",this.render)},events:{click:"toggleOpen","click .btn-remove":"remove","click .btn-add":"save","click .btn-image-select":"select_image","click .btn-image-remove":"toggle_remove_image","input input":"changed","change input":"changed","click .btn-male":"set_male","click .btn-female":"set_female"},select_image:function(c){var b=this;if(typeof this.file_input=="undefined"){this.form=$("<form><input type='file' name='photo'></form>");this.file_input=this.form.find("input");this.file_input.on("change",function(){var e=this.files[0];var d=new FileReader();d.onload=function(f){b.$el.find(".img-photo").get(0).src=f.target.result};d.readAsDataURL(e);b.model.set("photo",$(this).val());b.model.set("photo_form",b.form[0]);b.model.set("remove_photo",undefined)})}this.file_input.click()},toggle_remove_image:function(){if(typeof this.file_input!="undefined"){$(this.form).remove()}if(!this.model.get("remove_photo")){this.last_photo=this.$el.find(".img-photo").attr("src");this.$el.find(".img-photo").attr("src",null);this.model.set("remove_photo",true)}else{this.$el.find(".img-photo").attr("src",this.last_photo);this.model.set("remove_photo",false)}},changed:function(b){this.model.set(b.target.name,b.target.value)},set_male:function(b){this.model.set("sex",1)},set_female:function(b){this.model.set("sex",0)},toggleOpen:function(){this.$el.addClass("open");var b=this;$(document).on("mouseover.studentEditor",function(c){b.onMouseOver(c)})},save:function(){this.model.save()},onMouseOver:function(f){if(!this.$el.hasClass("open")){return}var d=this.$el.find(".student-menu")[0];var g=0;var c=d.getBoundingClientRect();var b=f.clientX;var h=f.clientY;if(c.left-b>g||c.top-h>g||b-(c.left+c.width)>g||h-(c.top+c.height)>g){this.$el.removeClass("open");$(document).off("mouseover.studentEditor")}},remove:function(b){b.preventDefault();student=this.model.get("sex")==0?"":"";if(confirm([" ",student,this.model.get("second_name"),this.model.get("name")].join(" "))){this.model.remove()}},render:function(b){this.$el.find(".info .name-second-name").html(this.model.get("second_name"));this.$el.find(".info .name-name").html(this.model.get("name"));if(this.model.get("name")){this.$el.find(".info .name-n").html(this.model.get("name").substr(0,1))}this.$el.toggleClass("modified",this.model.is_changed());this.$el.find(".btn-male").toggleClass("btn-primary",this.model.get("sex")==1);this.$el.find(".btn-male").toggleClass("btn-default",this.model.get("sex")!=1);this.$el.find(".btn-female").toggleClass("btn-primary",this.model.get("sex")==0);this.$el.find(".btn-female").toggleClass("btn-default",this.model.get("sex")!=0)}});var Lesson=Backbone.Model.extend({defaults:function(){return{marks:new MarksCollection()}},toJSON:function(){return{date:this.get("date"),description:this.get("description"),lesson_type:this.get("lesson_type"),score_ignore:this.get("score_ignore"),discipline_id:this.get("discipline_id"),group_id:this.get("group_id")}},remove:function(){if(this.id){$.ajax({url:this.get("delete-lesson"),method:"DELETE"}).done(function(){loadToContent(window.location)})}},save:function(){if(this.id){$.ajax({url:this.get("update-lesson"),data:this.toJSON(),method:"POST"}).done(function(){loadToContent(window.location)})}else{$.ajax({url:this.get("create-lesson"),data:this.toJSON(),method:"POST"}).done(function(){loadToContent(window.location)})}}});var LessonEditorView=Backbone.View.extend({events:{"change input":"changed","change select":"changed","input textarea":"changed","click .save":"save","click .delete":"remove","dp.change":"changed"},constructor:function(c,b){Backbone.View.apply(this,arguments);this.lastLessonView=null;$(this.el.date).datetimepicker({inline:true,format:"YYYY-MM-DD",locale:"ru"});var d=this;this.styles={1:"",2:"test",3:"lect",4:"laba",5:"exam"}},save:function(b){b.preventDefault();if(this.lastLessonView){this.lastLessonView.model.save()}},remove:function(b){b.preventDefault();if(this.lastLessonView){this.lastLessonView.model.remove()}},onMouseOver:function(d){if(!this.$el.hasClass("lesson-editor-visible")){return}var f=2;var c=this.$el[0].getBoundingClientRect();var b=d.clientX;var g=d.clientY;if(c.left-b>f||c.top-g>20*f||b-(c.left+c.width)>f||g-(c.top+c.height)>f){this.$el.removeClass("lesson-editor-visible");this.$el.fadeOut("fast");$(document).off("mouseover.lessonEditor")}},changed:function(){if(this.lastLessonView){this.lastLessonView.model.set({description:this.el.description.value,lesson_type:this.el.lesson_type.value,style:this.styles[this.el.lesson_type.value],score_ignore:this.el.score_ignore.checked,date:this.el.date.value})}},render:function(){if(this.lastLessonView){this.el.description.value=this.lastLessonView.model.get("description");this.el.lesson_type.value=this.lastLessonView.model.get("lesson_type");this.el.score_ignore.checked=this.lastLessonView.model.get("score_ignore");this.el.date.value=this.lastLessonView.model.get("date");$(this.el.date).data("DateTimePicker").date(this.lastLessonView.model.get("date"))}return this},show:function(e){this.$el.addClass("lesson-editor-visible");var c=this;$(document).on("mouseover.lessonEditor",function(g){c.onMouseOver(g)});this.$el.fadeIn("fast");if(e==this.lastLessonView){return}this.lastLessonView=e;console.log(this.lastLessonView);var b=this.$el.width();var d=e.$el.parents("td");var f=d.offset();this.$el.offset({left:f.left-b/2,top:f.top+d.height()});this.render()}});var LessonView=Backbone.View.extend({constructor:function(c,b){Backbone.View.apply(this,arguments);this.lessonEditor=b.lessonEditor;_.bindAll(this,"render");this.model.bind("change",this.render)},events:{click:"openEditor"},render:function(){this.$el.removeClass();this.$el.addClass(["mark t-cell t-cell-head",this.model.get("style")].join(" "));this.$el.find(".label").html(this.model.get("date").split("-").pop())},openEditor:function(){this.lessonEditor.show(this)}});var Mark=Backbone.Model.extend({constructor:function(){Backbone.Model.apply(this,arguments);this.old_value=this.get("value")},is_changed:function(){return this.get("value")!=this.old_value},reset:function(){this.old_value=this.get("value");this.trigger("change",this)},toJSON:function(){return{student_id:this.get("student").id,lesson_id:this.get("lesson").id,value:this.get("value")}}});var last_offset={left:-1,top:-1};var MARK_BASE=0;var MARK_SPECIAL=1000;var MARK_BLACK_HOLE=MARK_BASE-(MARK_SPECIAL+1);var MARK_ABSENT=MARK_BASE-2;var MARK_EMPTY=MARK_BASE;var MARK_NORMAL=MARK_BASE+1;var MARK_GOOD=MARK_BASE+2;var MARK_EXCELLENT=MARK_BASE+3;var MARK_AWESOME=MARK_BASE+4;var MARK_FANTASTIC=MARK_BASE+5;var MARK_INCREDIBLE=MARK_BASE+6;var MARK_SHINING=MARK_BASE+(MARK_SPECIAL+1);var MARK_MERCY=MARK_BASE+(MARK_SPECIAL+2);var MARK_KEEP=MARK_BASE+(MARK_SPECIAL+3);mark_styles={};mark_styles[MARK_BLACK_HOLE]="black-hole";mark_styles[MARK_ABSENT]="absent";mark_styles[MARK_EMPTY]="empty";mark_styles[MARK_NORMAL]="normal";mark_styles[MARK_GOOD]="good";mark_styles[MARK_EXCELLENT]="excellent";mark_styles[MARK_AWESOME]="awesome";mark_styles[MARK_FANTASTIC]="fantastic";mark_styles[MARK_INCREDIBLE]="incredible";mark_styles[MARK_SHINING]="shining";mark_styles[MARK_MERCY]="mercy";var MarkView=Backbone.View.extend({initialize:function(){_.bindAll(this,"render");this.model.on("change",this.render);this.model.get("lesson").on("change:style",this.render)},events:{click:"showMarkSelector"},render:function(){this.$el.attr("class",null);this.$el.addClass(["t-cell","mark",this.model.get("lesson").get("style"),mark_styles[this.model.get("value")],this.model.is_changed()?"modified":""].join(" "));return this},markSelectorItemChoose:function(c){var b=$(c).data("value");this.new_style=$(c).data("class");this.model.set("value",b);$mark_selector.fadeOut("fast")},showMarkSelector:function(){var e=this;$mark_selector=$("#mark-selector");$mark_selector.find("li").unbind("click");$mark_selector.find("li").one("click",function(){e.markSelectorItemChoose(this)});e.class_list=[];$mark_selector.find("li").each(function(k,l){e.class_list.push($(l).data("class"))});var d=e.$el.offset();var b=e.el.clientWidth*1.1;var j=e.el.clientHeight;var h=28;var i=$mark_selector.find("ul").first().width();var g=$mark_selector.fadeIn("fast").offset({left:d.left-i/2+b/2,top:d.top-i/2+j/2}).find("li");last_offset.left=d.left+(b-h)/2;last_offset.top=d.top+(j-h)/2;if(g.size()){var f=35;var c=2*Math.PI/(g.size());g.each(function(l,m){var k=$(m).data("value");if(k!=e.model.get("value")){$(m).offset({left:last_offset.left+f*Math.cos(l*c),top:last_offset.top+f*Math.sin(l*c)})}else{$(m).offset({left:last_offset.left,top:last_offset.top})}})}$(document).on("mouseover.markSelector",function(o){console.log(o);var l=o.pageX;var q=o.pageY;var k=b+10;var m=(l-(last_offset.left+28/2));var n=(q-(last_offset.top+36/2));console.log(last_offset,o.clientX,o.clientY);if(Math.sqrt(m*m+n*n)>k){$(document).off("mouseover.markSelector");$mark_selector.fadeOut("fast")}});$mark_selector.find(".mark").removeClass("lect exam test current");$mark_selector.find(".mark").toggleClass(this.model.get("lesson").get("style"),true)}});var TaskItem=Backbone.Model.extend({});var TaskItemView=Backbone.View.extend({initialize:function(c,b){this.editor=null;this.complexity=this.$el.data("complexity");_.bindAll(this,"render");this.render()},events:{"click .m-task-btn-save":"save","click .m-task-btn-close":"close","click .m-task-btn-actions .difficult div":"setDifficult"},render:function(){var b=this;this.$el.find(".m-task-btn-actions").toggle(this.editor!==null);this.$el.find(".m-task-btn-actions .difficult div").removeClass("active");this.$el.find('.m-task-btn-actions .difficult div[data-id="'+b.complexity+'"]').addClass("active");this.$el.removeClass("easy medium hard nightmare");this.$el.addClass(["","easy","medium","hard","nightmare"][b.complexity])},setDifficult:function(b){this.complexity=$(b.currentTarget).data("id");this.render()},removeEditor:function(){if(this.editor){this.$el.find(".m-task-description").summernote("destroy");this.editor=null;this.render()}},createEditor:function(){this.editor=this.$el.find(".m-task-description").summernote();this.render()},close:function(){this.removeEditor()},save:function(){var b=this;$.ajax({type:"POST",contentType:"application/json",url:"/task/"+this.$el.data("id")+"/",data:JSON.stringify({description:this.editor.summernote("code"),complexity:this.complexity})}).done(function(){new Noty({theme:"relax",text:"",type:"success",timeout:1000}).show();b.removeEditor()}).fail(function(){new Noty({theme:"relax",text:"  ",type:"error",timeout:1000}).show()})}});var Lab=Backbone.Model.extend({});var LabItem=Backbone.Model.extend({save:function(){return $.ajax({url:"/lab/"+this.get("id")+"/",data:JSON.stringify(this.toJSON()),method:"POST",contentType:"application/json; charset=utf-8"})},increaseOrder:function(){},decreaseOrder:function(){},toJSON:function(){return{id:this.get("id"),title:this.get("title"),description:this.get("description"),discipline_id:this.get("discipline_id"),visible:this.get("visible"),regular:this.get("regular"),order:this.get("order")}}});var LabItemView=Backbone.View.extend({initialize:function(d,c){_.bindAll(this,"render");var b=this;this.lessonEditor=c.lessonEditor;this.model.on("change",this.render);this.taskOrder=[];this.$el.find(".m-task").each(function(e,f){f.view=new TaskItemView({el:f})});this.sortable=Sortable.create(this.$el.find(".m-lab-info-tasks")[0],{handle:".m-task-label",onEnd:function(){b.taskOrder=[];b.$el.find(".m-task").each(function(e,f){b.taskOrder.push($(f).data("id"));$(f).find(".m-task-label").html(e+1)});$.ajax({url:"/lab/set-tasks-order/",type:"POST",contentType:"application/json",data:JSON.stringify({order:b.taskOrder})}).done(function(){new Noty({theme:"relax",text:"",type:"success",timeout:1000}).show()}).fail(function(){new Noty({theme:"relax",text:"  ",type:"error",timeout:1000}).show()})}});this.lastEditor=null;this.editorOptions={};this.render()},events:{"click .toggle-hide":"toggleHide","click .btn-order-up":"orderUp","click .btn-order-down":"orderDown","click .btn-save":"save","click input":"stop","click .m-task .m-task-description":"createTaskItemEditor","click .m-lab-description":"createLabEditor","keyup .lab-title-input":"setTitle"},createTaskItemEditor:function(c){var b=$(c.currentTarget).parents(".m-task")[0];if(this.lastEditor&&this.lastEditor.view&&this.lastEditor.view!==b.view){this.lastEditor.view.removeEditor()}b.view.createEditor();this.lastEditor=b},removeLabEditor:function(b){this.$el.find(".m-lab-description").summernote("destroy")},createLabEditor:function(c){var b=this;this.$el.find(".m-lab-description").summernote($.extend(this.editorOptions,{callbacks:{onChange:function(e,d){b.model.set("description",e)}}}))},save:function(c){var b=this;this.model.save().done(function(){b.removeLabEditor();new Noty({theme:"relax",text:"",type:"success",timeout:1000}).show()}).fail(function(){new Noty({theme:"relax",text:"  ",type:"error",timeout:1000}).show()});c.stopPropagation()},stop:function(b){b.stopPropagation()},setTitle:function(b){this.model.set("title",b.currentTarget.value)},toggleHide:function(b){this.model.set("visible",!this.model.get("visible"));this.model.save();b.stopPropagation()},render:function(){var b=this.model.get("visible");this.$el.find(".toggle-hide ").toggleClass("btn-default",!b);this.$el.find(".toggle-hide ").toggleClass("btn-success",b);this.$el.find(".toggle-hide .fa").toggleClass("fa-eye-slash",!b);this.$el.find(".toggle-hide .fa").toggleClass("fa-eye",b)}});var Task=Backbone.Model.extend({});var TaskResult=Backbone.Model.extend({constructor:function(){Backbone.Model.apply(this,arguments);this.done=this.get("done")},is_changed:function(){return this.get("done")!=this.done},reset:function(){this.done=this.get("done");this.trigger("change",this)},toJSON:function(){return{student_id:this.get("student").id,task_id:this.get("task").id,done:this.get("done")}},toggle:function(){this.set("done",!this.get("done"))}});var TaskResultView=Backbone.View.extend({initialize:function(){_.bindAll(this,"render");this.model.on("change",this.render)},events:{click:"toggle"},toggle:function(){console.log("cool");this.model.toggle()},render:function(){this.$el.toggleClass("done",this.model.get("done"));this.$el.toggleClass("modified",this.model.is_changed())}});var LessonsCollection=Backbone.Collection.extend({model:Lesson});var LabsCollection=Backbone.Collection.extend({model:Lab});var LabItemsCollection=Backbone.Collection.extend({model:LabItem,saveOrder:function(){console.log("save_order")}});var LabItemCollecitonView=Backbone.View.extend({initialize:function(){var b=this;this.sortable=Sortable.create(this.$el.find(".panel-group.m-labs")[0],{handle:".m-lab-title",onEnd:function(){b.labOrder=[];b.$el.find(".m-lab").each(function(c,d){b.labOrder.push($(d).data("id"))});$.ajax({url:"/lab/set-order/",type:"POST",contentType:"application/json",data:JSON.stringify({order:b.labOrder})}).done(function(){new Noty({theme:"relax",text:"",type:"success",timeout:1000}).show()}).fail(function(){new Noty({theme:"relax",text:"  ",type:"error",timeout:1000}).show()})}})}});var TasksCollection=Backbone.Collection.extend({model:Task});var StudentsCollection=Backbone.Collection.extend({model:Student,save:function(){var b=new StudentsCollection(this.filter(function(d){return d.is_changed()}));var c=b.forEach(function(d){d.save()});$.when.apply($,c).then(function(){loadToContent(window.location)})}});var StudentsCollectionView=Backbone.View.extend({events:{"click .btn-update":"save"},save:function(){this.collection.save()}});var MarksCollection=Backbone.Collection.extend({initialize:function(c,b){if(b){this.urls=b.urls}},model:Mark,save:function(){var b=new MarksCollection(this.filter(function(c){return c.is_changed()}));if(b.length){$.ajax({url:this.urls.save_marks,data:JSON.stringify(b.toJSON()),method:"POST",contentType:"application/json; charset=utf-8",dataType:"json"}).done(function(){b.forEach(function(c){c.reset()})})}}});var TasksResultsCollection=Backbone.Collection.extend({initialize:function(c,b){if(b){this.urls=b.urls}},model:TaskResult,save:function(){var b=new TasksResultsCollection(this.filter(function(c){return c.is_changed()}));if(b.length){$.ajax({url:this.urls.save_tasks_results,data:JSON.stringify(b.toJSON()),method:"POST",contentType:"application/json; charset=utf-8",dataType:"json"}).done(function(){b.forEach(function(c){c.reset()})})}}});function EditorController(l){var f=new LessonsCollection([],l);var g=new StudentsCollection([],l);var j=new MarksCollection([],l);var c=new TasksResultsCollection([],l);var k=new LabsCollection([],l);var e=new TasksCollection([],l);var b=new LabItemsCollection([],l);var i=new LessonEditorView({el:"#lesson-editor"});$(".btn-save-marks").click(function(){var n=j.save();var m=c.save();$.when(m,n).done(function(q,r,o){console.log("cool");loadToContent(window.location)})});new StudentsCollectionView({collection:g,el:".s-table"});new LabItemCollecitonView({collection:k,el:"#labs-editor"});function d(m,o,n){if(o==null){return}$(m).each(function(q,s){var t=$(s).data();var r=o(t,s);if(n&&r){n.add(r)}})}function h(){d(".m-table .t-header .mark",function(q,o){var n=new Lesson({id:q.id,date:q.date,group_id:q.group_id,discipline_id:q.discipline_id,style:q.style,description:q.description||"",lesson_type:q.lessonType||1,score_ignore:q.scoreIgnore=="True","update-lesson":q.updateLesson,"delete-lesson":q.deleteLesson,"create-lesson":q.createLesson});new LessonView({model:n,el:o},{lessonEditor:i});return n},f);d(".l-table .t-header",function(o,n){return new Lab({id:o.id})},k);var m=0;d(".m-labs .m-lab",function(o,n){var q=new LabItem({id:o.id,title:o.title,description:$(n).find(".m-lab-description").html(),discipline_id:o.discipline_id,visible:o.visible,regular:o.regular,order:m});new LabItemView({model:q,el:n},{lessonEditor:i});m++;return q},b);d(".l-table .t-header .t-cell-task",function(o,n){return new Task({id:o.id,lab:k.get(o.lab)})},e);d(".s-table .t-content .t-row",function(q,o){var n=new Student({id:q.id,name:q.name.toString(),second_name:q.secondName.toString(),group_id:q.group_id,sex:q.sex!="undefined"?q.sex:1,urlUpdate:q.urlUpdate,urlRemove:q.urlRemove,urlCreate:q.urlCreate});new StudentView({model:n,el:o});return n},g);d(".m-table .t-content .t-cell.mark",function(r,q){if(r.lesson&&r.student){var n=f.get(r.lesson);var o=g.get(r.student);var s=new Mark({student:o,lesson:n,lesson_type:r.lessonType,value:r.value});new MarkView({model:s,el:q});n.get("marks").add(s);return s}},j);d(".l-table .t-content .t-cell.mark",function(q,o){var n=new TaskResult({task:e.get(q.task),student:g.get(q.student),done:q.done});new TaskResultView({model:n,el:o});return n},c)}h()};